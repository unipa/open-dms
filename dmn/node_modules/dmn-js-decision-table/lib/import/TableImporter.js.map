{"version":3,"file":"TableImporter.js","names":["assign","is","elementData","semantic","attrs","id","type","$type","businessObject","TableImporter","constructor","elementFactory","eventBus","sheet","_elementFactory","_eventBus","_sheet","add","element","createRoot","setRoot","createCol","addCol","inputEntry","outputEntry","cells","map","entry","createCell","createRow","addRow","fire","$inject"],"sources":["../../src/import/TableImporter.js"],"sourcesContent":["import { assign } from 'min-dash';\n\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\nfunction elementData(semantic, attrs) {\n  return assign({\n    id: semantic.id,\n    type: semantic.$type,\n    businessObject: semantic\n  }, attrs);\n}\n\nexport default class TableImporter {\n\n  constructor(elementFactory, eventBus, sheet) {\n    this._elementFactory = elementFactory;\n    this._eventBus = eventBus;\n    this._sheet = sheet;\n  }\n\n  /**\n   * Add DMN element.\n   */\n  add(semantic) {\n    let element;\n\n    // decision table\n    if (is(semantic, 'dmn:DecisionTable')) {\n      element = this._elementFactory.createRoot(elementData(semantic));\n\n      this._sheet.setRoot(element);\n    }\n\n    // input clause\n    else if (is(semantic, 'dmn:InputClause')) {\n      element = this._elementFactory.createCol(elementData(semantic));\n\n      this._sheet.addCol(element);\n    }\n\n    // output clause\n    else if (is(semantic, 'dmn:OutputClause')) {\n      element = this._elementFactory.createCol(elementData(semantic));\n\n      this._sheet.addCol(element);\n    }\n\n    // rule\n    else if (is(semantic, 'dmn:DecisionRule')) {\n      if (!semantic.inputEntry) {\n        semantic.inputEntry = [];\n      }\n\n      if (!semantic.outputEntry) {\n        semantic.outputEntry = [];\n      }\n\n      const cells = [\n        ...semantic.inputEntry,\n        ...semantic.outputEntry\n      ].map((entry) => {\n        return this._elementFactory.createCell(elementData(entry));\n      });\n\n      element = this._elementFactory.createRow(assign(elementData(semantic), {\n        cells\n      }));\n\n      this._sheet.addRow(element);\n    }\n\n    this._eventBus.fire('dmnElement.added', { element: element });\n\n    return element;\n  }\n}\n\nTableImporter.$inject = [ 'elementFactory', 'eventBus', 'sheet' ];"],"mappings":"AAAA,SAASA,MAAM,QAAQ,UAAU;AAEjC,SAASC,EAAE,QAAQ,kCAAkC;AAErD,SAASC,WAAW,CAACC,QAAQ,EAAEC,KAAK,EAAE;EACpC,OAAOJ,MAAM,CAAC;IACZK,EAAE,EAAEF,QAAQ,CAACE,EAAE;IACfC,IAAI,EAAEH,QAAQ,CAACI,KAAK;IACpBC,cAAc,EAAEL;EAClB,CAAC,EAAEC,KAAK,CAAC;AACX;AAEA,eAAe,MAAMK,aAAa,CAAC;EAEjCC,WAAW,CAACC,cAAc,EAAEC,QAAQ,EAAEC,KAAK,EAAE;IAC3C,IAAI,CAACC,eAAe,GAAGH,cAAc;IACrC,IAAI,CAACI,SAAS,GAAGH,QAAQ;IACzB,IAAI,CAACI,MAAM,GAAGH,KAAK;EACrB;;EAEA;AACF;AACA;EACEI,GAAG,CAACd,QAAQ,EAAE;IACZ,IAAIe,OAAO;;IAEX;IACA,IAAIjB,EAAE,CAACE,QAAQ,EAAE,mBAAmB,CAAC,EAAE;MACrCe,OAAO,GAAG,IAAI,CAACJ,eAAe,CAACK,UAAU,CAACjB,WAAW,CAACC,QAAQ,CAAC,CAAC;MAEhE,IAAI,CAACa,MAAM,CAACI,OAAO,CAACF,OAAO,CAAC;IAC9B;;IAEA;IAAA,KACK,IAAIjB,EAAE,CAACE,QAAQ,EAAE,iBAAiB,CAAC,EAAE;MACxCe,OAAO,GAAG,IAAI,CAACJ,eAAe,CAACO,SAAS,CAACnB,WAAW,CAACC,QAAQ,CAAC,CAAC;MAE/D,IAAI,CAACa,MAAM,CAACM,MAAM,CAACJ,OAAO,CAAC;IAC7B;;IAEA;IAAA,KACK,IAAIjB,EAAE,CAACE,QAAQ,EAAE,kBAAkB,CAAC,EAAE;MACzCe,OAAO,GAAG,IAAI,CAACJ,eAAe,CAACO,SAAS,CAACnB,WAAW,CAACC,QAAQ,CAAC,CAAC;MAE/D,IAAI,CAACa,MAAM,CAACM,MAAM,CAACJ,OAAO,CAAC;IAC7B;;IAEA;IAAA,KACK,IAAIjB,EAAE,CAACE,QAAQ,EAAE,kBAAkB,CAAC,EAAE;MACzC,IAAI,CAACA,QAAQ,CAACoB,UAAU,EAAE;QACxBpB,QAAQ,CAACoB,UAAU,GAAG,EAAE;MAC1B;MAEA,IAAI,CAACpB,QAAQ,CAACqB,WAAW,EAAE;QACzBrB,QAAQ,CAACqB,WAAW,GAAG,EAAE;MAC3B;MAEA,MAAMC,KAAK,GAAG,CACZ,GAAGtB,QAAQ,CAACoB,UAAU,EACtB,GAAGpB,QAAQ,CAACqB,WAAW,CACxB,CAACE,GAAG,CAAEC,KAAK,IAAK;QACf,OAAO,IAAI,CAACb,eAAe,CAACc,UAAU,CAAC1B,WAAW,CAACyB,KAAK,CAAC,CAAC;MAC5D,CAAC,CAAC;MAEFT,OAAO,GAAG,IAAI,CAACJ,eAAe,CAACe,SAAS,CAAC7B,MAAM,CAACE,WAAW,CAACC,QAAQ,CAAC,EAAE;QACrEsB;MACF,CAAC,CAAC,CAAC;MAEH,IAAI,CAACT,MAAM,CAACc,MAAM,CAACZ,OAAO,CAAC;IAC7B;IAEA,IAAI,CAACH,SAAS,CAACgB,IAAI,CAAC,kBAAkB,EAAE;MAAEb,OAAO,EAAEA;IAAQ,CAAC,CAAC;IAE7D,OAAOA,OAAO;EAChB;AACF;AAEAT,aAAa,CAACuB,OAAO,GAAG,CAAE,gBAAgB,EAAE,UAAU,EAAE,OAAO,CAAE"}