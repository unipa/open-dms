{"version":3,"file":"ContextMenu.js","names":["is","Cell","ContextMenu","constructor","components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate","_contextMenu","_clipboard","_editorActions","_elementRegistry","_eventBus","_modeling","_selection","_sheet","_rules","_translate","_getEntries","bind","onGetComponent","context","contextMenuType","entries","element","get","id","additionalCellEntries","isCell","getComponents","length","cellEntriesGroup","concat","on","event","node","preventDefault","open","x","pageX","y","pageY","handlers","addRuleAbove","rule","selectedIndex","cells","map","cell","indexOf","newRule","trigger","select","close","addRuleBelow","removeRule","addInputLeft","input","addInputRight","removeInput","addOutputLeft","output","addOutputRight","removeOutput","copy","cut","pasteBefore","pasteAfter","clipboardData","row","canPaste","allowed","data","elements","target","push","actualElement","col","canRemove","$inject"],"sources":["../../../src/features/context-menu/ContextMenu.js"],"sourcesContent":["/* eslint-disable max-len */\r\n\r\nimport { is } from 'dmn-js-shared/lib/util/ModelUtil';\r\n\r\nimport { Cell } from 'table-js/lib/model';\r\n\r\nexport default class ContextMenu {\r\n  constructor(\r\n      components,\r\n      contextMenu,\r\n      clipboard,\r\n      editorActions,\r\n      eventBus,\r\n      elementRegistry,\r\n      modeling,\r\n      selection,\r\n      sheet,\r\n      rules,\r\n      translate) {\r\n\r\n    this._contextMenu = contextMenu;\r\n    this._clipboard = clipboard;\r\n    this._editorActions = editorActions;\r\n    this._elementRegistry = elementRegistry;\r\n    this._eventBus = eventBus;\r\n    this._modeling = modeling;\r\n    this._selection = selection;\r\n    this._sheet = sheet;\r\n    this._rules = rules;\r\n    this._translate = translate;\r\n\r\n    this._getEntries = this._getEntries.bind(this);\r\n\r\n    components.onGetComponent('context-menu', (context = {}) => {\r\n      if (context.contextMenuType && context.contextMenuType === 'context-menu') {\r\n        const entries = this._getEntries(context);\r\n\r\n        const element = this._elementRegistry.get(context.id);\r\n\r\n        const additionalCellEntries = isCell(element)\r\n          && components.getComponents('context-menu-cell-additional', context);\r\n\r\n        if (additionalCellEntries && additionalCellEntries.length) {\r\n          const cellEntriesGroup = (\r\n            <div className=\"context-menu-group context-menu-group-cell\">\r\n              { additionalCellEntries }\r\n            </div>\r\n          );\r\n\r\n          return () => (\r\n            <div className=\"context-menu-flex\">\r\n              { (entries || []).concat(cellEntriesGroup) }\r\n            </div>\r\n          );\r\n        } else {\r\n          return () => (\r\n            <div className=\"context-menu-flex\">\r\n              { entries || [] }\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    eventBus.on('cell.contextmenu', ({ event, id, node }) => {\r\n      event.preventDefault();\r\n\r\n      contextMenu.open({\r\n        x: event.pageX,\r\n        y: event.pageY\r\n      }, {\r\n        contextMenuType: 'context-menu',\r\n        event,\r\n        id\r\n      });\r\n    });\r\n  }\r\n\r\n  _getEntries(context) {\r\n    const handlers = {\r\n      addRuleAbove: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleAbove', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addRuleBelow: (rule) => {\r\n        const selectedIndex = rule.cells.map(cell => cell.id).indexOf(context.id);\r\n        const newRule = this._editorActions.trigger('addRuleBelow', { rule });\r\n\r\n        if (newRule.cells[selectedIndex]) {\r\n          this._selection.select(newRule.cells[selectedIndex]);\r\n        } else {\r\n          this._selection.select(newRule.cells[0]);\r\n        }\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeRule: (rule) => {\r\n        this._editorActions.trigger('removeRule', { rule });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputLeft: (input) => {\r\n        this._editorActions.trigger('addInputLeft', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addInputRight: (input) => {\r\n        this._editorActions.trigger('addInputRight', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeInput: (input) => {\r\n        this._editorActions.trigger('removeInput', { input });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputLeft: (output) => {\r\n        this._editorActions.trigger('addOutputLeft', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      addOutputRight: (output) => {\r\n        this._editorActions.trigger('addOutputRight', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      removeOutput: (output) => {\r\n        this._editorActions.trigger('removeOutput', { output });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      copy: element => {\r\n        this._editorActions.trigger('copy', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      cut: element => {\r\n        this._editorActions.trigger('cut', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteBefore: element => {\r\n        this._editorActions.trigger('pasteBefore', { element });\r\n\r\n        this._contextMenu.close();\r\n      },\r\n      pasteAfter: element => {\r\n        this._editorActions.trigger('pasteAfter', { element });\r\n\r\n        this._contextMenu.close();\r\n      }\r\n    };\r\n\r\n    const id = context && context.id;\r\n\r\n    if (!id) {\r\n      return null;\r\n    }\r\n\r\n    const element = this._elementRegistry.get(id);\r\n\r\n    if (!element) {\r\n      return null;\r\n    }\r\n\r\n    const clipboardData = this._clipboard.get() || {};\r\n\r\n    const entries = [];\r\n\r\n    const row = element.row || element;\r\n    if (is(row, 'dmn:DecisionRule')) {\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: row\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-rule\"\r\n            onClick={ () => handlers.copy(row) }>\r\n            { this._translate('Copy Rule') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-cut-rule\"\r\n            onClick={ () => handlers.cut(row) }>\r\n            { this._translate('Cut Rule') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-above` }\r\n            onClick={ () => handlers.pasteBefore(row) }>\r\n            { this._translate('Paste Rule Above') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-rule-below` }\r\n            onClick={ () => handlers.pasteAfter(row) }>\r\n            { this._translate('Paste Rule Below') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-above\"\r\n            onClick={ () => handlers.addRuleAbove(row) }>\r\n            { this._translate('Add Rule Above') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-rule-below\"\r\n            onClick={ () => handlers.addRuleBelow(row) }>\r\n            { this._translate('Add Rule Below') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-remove-rule\"\r\n            onClick={ () => handlers.removeRule(row) }>\r\n            { this._translate('Remove Rule') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:InputClause')) {\r\n      const actualElement = is(element, 'dmn:InputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-input\"\r\n            onClick={ () => handlers.copy(actualElement) }>\r\n            { this._translate('Copy Input Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-input` }\r\n            onClick={ () => handlers.cut(actualElement) }>\r\n            { this._translate('Cut Input Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }>\r\n            { this._translate('Paste Input Column Left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-input-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }>\r\n            { this._translate('Paste Input Column Right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-left\"\r\n            onClick={ () => handlers.addInputLeft(actualElement) }>\r\n            { this._translate('Add Input Column Left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-input-right\"\r\n            onClick={ () => handlers.addInputRight(actualElement) }>\r\n            { this._translate('Add Input Column Right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-input` }\r\n            onClick={ () => handlers.removeInput(actualElement) }>\r\n            { this._translate('Remove Input Column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (is(element, 'dmn:OutputClause') || is(element.col, 'dmn:OutputClause')) {\r\n      const actualElement = is(element, 'dmn:OutputClause') ? element : element.col;\r\n\r\n      const canRemove = this._rules.allowed('col.remove', {\r\n        col: element.col || element\r\n      });\r\n\r\n      const canPaste = this._rules.allowed('paste', {\r\n        data: clipboardData.elements,\r\n        target: element.col || element\r\n      });\r\n\r\n      entries.push(\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-copy-output\"\r\n            onClick={ () => handlers.copy(actualElement) }>\r\n            { this._translate('Copy Output Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-cut-output` }\r\n            onClick={ () => handlers.cut(actualElement) }>\r\n            { this._translate('Cut Output Column') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-left` }\r\n            onClick={ () => handlers.pasteBefore(actualElement) }>\r\n            { this._translate('Paste Output Column Left') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canPaste ? '' : 'disabled' } context-menu-entry-paste-output-right` }\r\n            onClick={ () => handlers.pasteAfter(actualElement) }>\r\n            { this._translate('Paste Output Column Right') }\r\n          </div>\r\n        </div>,\r\n        <div className=\"context-menu-group\">\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-left\"\r\n            onClick={ () => handlers.addOutputLeft(actualElement) }>\r\n            { this._translate('Add Output Column Left') }\r\n          </div>\r\n          <div\r\n            className=\"context-menu-group-entry context-menu-entry-add-output-right\"\r\n            onClick={ () => handlers.addOutputRight(actualElement) }>\r\n            { this._translate('Add Output Column Right') }\r\n          </div>\r\n          <div\r\n            className={ `context-menu-group-entry ${ canRemove ? '' : 'disabled' } context-menu-entry-remove-output` }\r\n            onClick={ () => handlers.removeOutput(actualElement) }>\r\n            { this._translate('Remove Output Column') }\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return entries;\r\n  }\r\n}\r\n\r\nContextMenu.$inject = [\r\n  'components',\r\n  'contextMenu',\r\n  'clipboard',\r\n  'editorActions',\r\n  'eventBus',\r\n  'elementRegistry',\r\n  'modeling',\r\n  'selection',\r\n  'sheet',\r\n  'rules',\r\n  'translate'\r\n];\r\n\r\n// helpers ///////////\r\n\r\nfunction isCell(element) {\r\n  return element instanceof Cell;\r\n}"],"mappings":"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"}