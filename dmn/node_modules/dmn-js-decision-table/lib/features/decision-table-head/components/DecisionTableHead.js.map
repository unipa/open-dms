{"version":3,"file":"DecisionTableHead.js","names":["is","getBusinessObject","Component","mixin","ComponentWithSlots","DecisionTableHead","constructor","props","context","forceUpdate","_sheet","injector","get","_changeSupport","changeSupport","componentWillMount","root","getRoot","onElementsChanged","id","componentWillUnmount","offElementsChanged","render","businessObject","inputs","input","outputs","output","slotFills","type","cellType","map","index","width","slotFill","inputsLength","length","key","DefaultInputHeaderCell","outputsLength","DefaultOutputHeaderCell","className","label","inputExpression","inputValues","translate","actualClassName","text","typeRef","name","outputValues"],"sources":["../../../../src/features/decision-table-head/components/DecisionTableHead.js"],"sourcesContent":["import {\n  is,\n  getBusinessObject\n} from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport { Component } from 'inferno';\n\nimport {\n  mixin\n} from 'table-js/lib/components';\n\nimport {\n  ComponentWithSlots\n} from 'dmn-js-shared/lib/components/mixins';\n\n\nexport default class DecisionTableHead extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    mixin(this, ComponentWithSlots);\n\n    this._sheet = context.injector.get('sheet');\n\n    this._changeSupport = context.changeSupport;\n  }\n\n  onElementsChanged = () => {\n    this.forceUpdate();\n  };\n\n  componentWillMount() {\n    const root = this._sheet.getRoot();\n\n    this._changeSupport.onElementsChanged(root.id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    const root = this._sheet.getRoot();\n\n    this._changeSupport.offElementsChanged(root.id, this.onElementsChanged);\n  }\n\n  render() {\n    const root = this._sheet.getRoot();\n\n    if (!is(root, 'dmn:DMNElement')) {\n      return null;\n    }\n\n    const businessObject = getBusinessObject(root);\n\n    const inputs = businessObject.input,\n          outputs = businessObject.output;\n\n    return <thead>\n      <tr>\n        <th\n          className=\"index-column\"\n        />\n\n        {\n          this.slotFills({\n            type: 'cell',\n            context: { cellType: 'before-label-cells' }\n          })\n        }\n\n        {\n          inputs && inputs.map((input, index) => {\n            const width = input.width || '192px';\n\n            return this.slotFill({\n              type: 'cell',\n              context: {\n                cellType: 'input-header',\n                input,\n                index,\n                inputsLength: inputs.length,\n                width\n              },\n              key: input.id\n            }, DefaultInputHeaderCell);\n          })\n        }\n        {\n          outputs.map((output, index) => {\n            return this.slotFill({\n              type: 'cell',\n              context: {\n                cellType: 'output-header',\n                output,\n                index,\n                outputsLength: outputs.length\n              },\n              key: output.id\n            }, DefaultOutputHeaderCell);\n          })\n        }\n\n        {\n          this.slotFills({\n            type: 'cell',\n            context: { cellType: 'after-label-cells' }\n          })\n        }\n      </tr>\n    </thead>;\n  }\n}\n\n\n// default components ///////////////////////\n\nfunction DefaultInputHeaderCell(props, context) {\n\n  const {\n    input,\n    className,\n    index\n  } = props;\n\n  const {\n    label,\n    inputExpression,\n    inputValues\n  } = input;\n\n  const translate = context.injector.get('translate');\n\n  const actualClassName = (className || '') + ' input-cell';\n\n  return (\n    <th\n      data-col-id={ input.id }\n      className={ actualClassName }\n      key={ input.id }>\n\n      <div className=\"clause\">\n        { index === 0 ? translate('When') : translate('And') }\n      </div>\n\n      {\n        label ? (\n          <div\n            className=\"input-label\"\n            title={ translate('Input Label: ') + label }>\n            { label }\n          </div>\n        ) : (\n          <div\n            className=\"input-expression\"\n            title={ translate('Input Expression: ') + inputExpression.text }>\n            { inputExpression.text }\n          </div>\n        )\n      }\n\n      <div\n        className=\"input-variable\"\n        title={\n          inputValues && inputValues.text ? translate('Input Values') :\n            translate('Input Type')\n        }\n      >\n        { inputValues && inputValues.text || inputExpression.typeRef }\n      </div>\n    </th>\n  );\n}\n\n\nfunction DefaultOutputHeaderCell(props, context) {\n\n  const {\n    output,\n    className,\n    index\n  } = props;\n\n  const {\n    label,\n    name,\n    outputValues,\n    typeRef\n  } = output;\n\n  const translate = context.injector.get('translate');\n\n  const actualClassName = (className || '') + ' output-cell';\n\n  return (\n    <th className={ actualClassName } key={ output.id }>\n\n      <div className=\"clause\">\n        { index === 0 ? translate('Then') : translate('And') }\n      </div>\n\n      {\n        label ? (\n          <div className=\"output-label\" title={ translate('Output Label') }>\n            { label }\n          </div>\n        ) : (\n          <div\n            className=\"output-name\"\n            title={ translate('Output Name') }>\n            { name }\n          </div>\n        )\n      }\n\n      <div\n        className=\"output-variable\"\n        title={\n          outputValues && outputValues.text ? translate('Output Values') :\n            translate('Output Type')\n        }\n      >\n        { outputValues && outputValues.text || typeRef }\n      </div>\n    </th>\n  );\n}\n"],"mappings":"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"}