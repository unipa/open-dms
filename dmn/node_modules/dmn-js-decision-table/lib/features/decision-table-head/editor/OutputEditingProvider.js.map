{"version":3,"file":"OutputEditingProvider.js","names":["closest","domClosest","matches","domMatches","OutputCell","OutputCellContextMenu","OutputEditingProvider","constructor","components","contextMenu","eventBus","renderer","onGetComponent","cellType","context","contextMenuType","on","event","output","target","node","getBoundingClientRect","left","top","offset","getOffset","open","x","y","align","$inject","element"],"sources":["../../../../src/features/decision-table-head/editor/OutputEditingProvider.js"],"sourcesContent":["import {\n  closest as domClosest,\n  matches as domMatches\n} from 'min-dom';\n\nimport OutputCell from './components/OutputCell';\nimport OutputCellContextMenu from './components/OutputCellContextMenu';\n\n\nexport default class OutputEditingProvider {\n\n  constructor(components, contextMenu, eventBus, renderer) {\n\n    components.onGetComponent('cell', ({ cellType }) => {\n      if (cellType === 'output-header') {\n        return OutputCell;\n      }\n    });\n\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (\n        context.contextMenuType === 'output-edit'\n      ) {\n        return OutputCellContextMenu;\n      }\n    });\n\n    eventBus.on('output.edit', ({ event, output }) => {\n      const { target } = event;\n\n      const node = domClosest(target, 'th', true);\n\n      const { left, top } = node.getBoundingClientRect();\n\n      const offset = getOffset(node);\n\n      contextMenu.open({\n        x: left,\n        y: top,\n        align: 'bottom-right'\n      }, {\n        contextMenuType: 'output-edit',\n        output,\n        offset\n      });\n    });\n  }\n\n}\n\nOutputEditingProvider.$inject = [\n  'components',\n  'contextMenu',\n  'eventBus',\n  'renderer'\n];\n\nfunction getOffset(element) {\n  if (!domMatches(element, '.output-cell + .output-cell')) {\n    return { x: -1, y: 0 };\n  }\n}"],"mappings":"AAAA,SACEA,OAAO,IAAIC,UAAU,EACrBC,OAAO,IAAIC,UAAU,QAChB,SAAS;AAEhB,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,qBAAqB,MAAM,oCAAoC;AAGtE,eAAe,MAAMC,qBAAqB,CAAC;EAEzCC,WAAW,CAACC,UAAU,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IAEvDH,UAAU,CAACI,cAAc,CAAC,MAAM,EAAE,QAAkB;MAAA,IAAfC,QAAQ,QAARA,QAAQ;MAC3C,IAAIA,QAAQ,KAAK,eAAe,EAAE;QAChC,OAAOT,UAAU;MACnB;IACF,CAAC,CAAC;IAEFI,UAAU,CAACI,cAAc,CAAC,cAAc,EAAE,YAAkB;MAAA,IAAjBE,OAAO,uEAAG,CAAC,CAAC;MACrD,IACEA,OAAO,CAACC,eAAe,KAAK,aAAa,EACzC;QACA,OAAOV,qBAAqB;MAC9B;IACF,CAAC,CAAC;IAEFK,QAAQ,CAACM,EAAE,CAAC,aAAa,EAAE,SAAuB;MAAA,IAApBC,KAAK,SAALA,KAAK;QAAEC,MAAM,SAANA,MAAM;MACzC,MAAQC,MAAM,GAAKF,KAAK,CAAhBE,MAAM;MAEd,MAAMC,IAAI,GAAGnB,UAAU,CAACkB,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC;MAE3C,8BAAsBC,IAAI,CAACC,qBAAqB,EAAE;QAA1CC,IAAI,yBAAJA,IAAI;QAAEC,GAAG,yBAAHA,GAAG;MAEjB,MAAMC,MAAM,GAAGC,SAAS,CAACL,IAAI,CAAC;MAE9BX,WAAW,CAACiB,IAAI,CAAC;QACfC,CAAC,EAAEL,IAAI;QACPM,CAAC,EAAEL,GAAG;QACNM,KAAK,EAAE;MACT,CAAC,EAAE;QACDd,eAAe,EAAE,aAAa;QAC9BG,MAAM;QACNM;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AAEF;AAEAlB,qBAAqB,CAACwB,OAAO,GAAG,CAC9B,YAAY,EACZ,aAAa,EACb,UAAU,EACV,UAAU,CACX;AAED,SAASL,SAAS,CAACM,OAAO,EAAE;EAC1B,IAAI,CAAC5B,UAAU,CAAC4B,OAAO,EAAE,6BAA6B,CAAC,EAAE;IACvD,OAAO;MAAEJ,CAAC,EAAE,CAAC,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;EACxB;AACF"}