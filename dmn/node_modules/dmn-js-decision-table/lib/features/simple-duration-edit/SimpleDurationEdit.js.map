{"version":3,"file":"SimpleDurationEdit.js","names":["InputDurationEdit","OutputDurationEdit","isInput","isOutput","SimpleDurationEdit","constructor","components","simpleMode","registerProvider","element","typeRef","getTypeRef","col","isDuration","onGetComponent","context","contextMenuType","$inject","businessObject","inputExpression","durations","includes"],"sources":["../../../src/features/simple-duration-edit/SimpleDurationEdit.js"],"sourcesContent":["import InputDurationEdit from './components/InputDurationEdit';\nimport OutputDurationEdit from './components/OutputDurationEdit';\n\nimport { isInput, isOutput } from 'dmn-js-shared/lib/util/ModelUtil';\n\nexport default class SimpleDurationEdit {\n  constructor(components, simpleMode) {\n    simpleMode.registerProvider(element => {\n      const typeRef = getTypeRef(element);\n\n      return (isInput(element.col) || isOutput(element.col))\n        && isDuration(typeRef);\n    });\n\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (context.contextMenuType && context.contextMenuType === 'simple-mode-edit') {\n\n        if (!context.element) {\n          return;\n        }\n\n        const typeRef = getTypeRef(context.element);\n\n        if (isDuration(typeRef)) {\n\n          if (isInput(context.element.col)) {\n            return InputDurationEdit;\n          } else if (isOutput(context.element.col)) {\n            return OutputDurationEdit;\n          }\n\n        }\n\n      }\n    });\n  }\n}\n\nSimpleDurationEdit.$inject = [ 'components', 'simpleMode' ];\n\n\n// helpers //////////////////////\n\nfunction getTypeRef(element) {\n  if (isInput(element.col)) {\n    return element.col && element.col.businessObject.inputExpression.typeRef;\n  } else {\n    return element.col && element.col.businessObject.typeRef;\n  }\n}\n\nconst durations = [\n  'yearMonthDuration',\n  'dayTimeDuration'\n];\n\nfunction isDuration(typeRef) {\n  return durations.includes(typeRef);\n}\n"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,gCAAgC;AAC9D,OAAOC,kBAAkB,MAAM,iCAAiC;AAEhE,SAASC,OAAO,EAAEC,QAAQ,QAAQ,kCAAkC;AAEpE,eAAe,MAAMC,kBAAkB,CAAC;EACtCC,WAAW,CAACC,UAAU,EAAEC,UAAU,EAAE;IAClCA,UAAU,CAACC,gBAAgB,CAACC,OAAO,IAAI;MACrC,MAAMC,OAAO,GAAGC,UAAU,CAACF,OAAO,CAAC;MAEnC,OAAO,CAACP,OAAO,CAACO,OAAO,CAACG,GAAG,CAAC,IAAIT,QAAQ,CAACM,OAAO,CAACG,GAAG,CAAC,KAChDC,UAAU,CAACH,OAAO,CAAC;IAC1B,CAAC,CAAC;IAEFJ,UAAU,CAACQ,cAAc,CAAC,cAAc,EAAE,YAAkB;MAAA,IAAjBC,OAAO,uEAAG,CAAC,CAAC;MACrD,IAAIA,OAAO,CAACC,eAAe,IAAID,OAAO,CAACC,eAAe,KAAK,kBAAkB,EAAE;QAE7E,IAAI,CAACD,OAAO,CAACN,OAAO,EAAE;UACpB;QACF;QAEA,MAAMC,OAAO,GAAGC,UAAU,CAACI,OAAO,CAACN,OAAO,CAAC;QAE3C,IAAII,UAAU,CAACH,OAAO,CAAC,EAAE;UAEvB,IAAIR,OAAO,CAACa,OAAO,CAACN,OAAO,CAACG,GAAG,CAAC,EAAE;YAChC,OAAOZ,iBAAiB;UAC1B,CAAC,MAAM,IAAIG,QAAQ,CAACY,OAAO,CAACN,OAAO,CAACG,GAAG,CAAC,EAAE;YACxC,OAAOX,kBAAkB;UAC3B;QAEF;MAEF;IACF,CAAC,CAAC;EACJ;AACF;AAEAG,kBAAkB,CAACa,OAAO,GAAG,CAAE,YAAY,EAAE,YAAY,CAAE;;AAG3D;;AAEA,SAASN,UAAU,CAACF,OAAO,EAAE;EAC3B,IAAIP,OAAO,CAACO,OAAO,CAACG,GAAG,CAAC,EAAE;IACxB,OAAOH,OAAO,CAACG,GAAG,IAAIH,OAAO,CAACG,GAAG,CAACM,cAAc,CAACC,eAAe,CAACT,OAAO;EAC1E,CAAC,MAAM;IACL,OAAOD,OAAO,CAACG,GAAG,IAAIH,OAAO,CAACG,GAAG,CAACM,cAAc,CAACR,OAAO;EAC1D;AACF;AAEA,MAAMU,SAAS,GAAG,CAChB,mBAAmB,EACnB,iBAAiB,CAClB;AAED,SAASP,UAAU,CAACH,OAAO,EAAE;EAC3B,OAAOU,SAAS,CAACC,QAAQ,CAACX,OAAO,CAAC;AACpC"}