{"version":3,"file":"DmnFactory.js","names":["is","DmnFactory","constructor","moddle","_model","create","type","attrs","element","inputExpression","typeRef","$parent","text","_ensureId","_needsId","prefix","$type","replace","id","ids","nextPrefixed","$inject"],"sources":["../../../src/features/modeling/DmnFactory.js"],"sourcesContent":["import { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\n\nexport default class DmnFactory {\n\n  constructor(moddle) {\n    this._model = moddle;\n  }\n\n  create(type, attrs = {}) {\n\n    var element = this._model.create(type, attrs || {});\n\n    if (is(element, 'dmn:InputClause')) {\n\n      if (attrs.inputExpression) {\n        element.inputExpression = attrs.inputExpression;\n      } else {\n        element.inputExpression = this.create('dmn:LiteralExpression', {\n          typeRef: 'string'\n        });\n\n        element.inputExpression.$parent = element;\n      }\n\n    }\n\n    if (is(element, 'dmn:OutputClause')) {\n      element.typeRef = attrs.typeRef || 'string';\n    }\n\n    if (is(element, 'dmn:UnaryTests') ||\n        is(element, 'dmn:LiteralExpression')) {\n\n      element.text = attrs.text || '';\n    }\n\n    this._ensureId(element);\n\n    return element;\n  }\n\n  _needsId(element) {\n    return is(element, 'dmn:DMNElement');\n  }\n\n  _ensureId(element) {\n\n    // generate semantic ids for elements\n    // dmn:UnaryTests -> UnaryTests_ID\n    var prefix = (element.$type || '').replace(/^[^:]*:/g, '') + '_';\n\n    if (!element.id && this._needsId(element)) {\n      element.id = this._model.ids.nextPrefixed(prefix, element);\n    }\n  }\n\n}\n\nDmnFactory.$inject = [ 'moddle' ];"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kCAAkC;AAGrD,eAAe,MAAMC,UAAU,CAAC;EAE9BC,WAAW,CAACC,MAAM,EAAE;IAClB,IAAI,CAACC,MAAM,GAAGD,MAAM;EACtB;EAEAE,MAAM,CAACC,IAAI,EAAc;IAAA,IAAZC,KAAK,uEAAG,CAAC,CAAC;IAErB,IAAIC,OAAO,GAAG,IAAI,CAACJ,MAAM,CAACC,MAAM,CAACC,IAAI,EAAEC,KAAK,IAAI,CAAC,CAAC,CAAC;IAEnD,IAAIP,EAAE,CAACQ,OAAO,EAAE,iBAAiB,CAAC,EAAE;MAElC,IAAID,KAAK,CAACE,eAAe,EAAE;QACzBD,OAAO,CAACC,eAAe,GAAGF,KAAK,CAACE,eAAe;MACjD,CAAC,MAAM;QACLD,OAAO,CAACC,eAAe,GAAG,IAAI,CAACJ,MAAM,CAAC,uBAAuB,EAAE;UAC7DK,OAAO,EAAE;QACX,CAAC,CAAC;QAEFF,OAAO,CAACC,eAAe,CAACE,OAAO,GAAGH,OAAO;MAC3C;IAEF;IAEA,IAAIR,EAAE,CAACQ,OAAO,EAAE,kBAAkB,CAAC,EAAE;MACnCA,OAAO,CAACE,OAAO,GAAGH,KAAK,CAACG,OAAO,IAAI,QAAQ;IAC7C;IAEA,IAAIV,EAAE,CAACQ,OAAO,EAAE,gBAAgB,CAAC,IAC7BR,EAAE,CAACQ,OAAO,EAAE,uBAAuB,CAAC,EAAE;MAExCA,OAAO,CAACI,IAAI,GAAGL,KAAK,CAACK,IAAI,IAAI,EAAE;IACjC;IAEA,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC;IAEvB,OAAOA,OAAO;EAChB;EAEAM,QAAQ,CAACN,OAAO,EAAE;IAChB,OAAOR,EAAE,CAACQ,OAAO,EAAE,gBAAgB,CAAC;EACtC;EAEAK,SAAS,CAACL,OAAO,EAAE;IAEjB;IACA;IACA,IAAIO,MAAM,GAAG,CAACP,OAAO,CAACQ,KAAK,IAAI,EAAE,EAAEC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,GAAG,GAAG;IAEhE,IAAI,CAACT,OAAO,CAACU,EAAE,IAAI,IAAI,CAACJ,QAAQ,CAACN,OAAO,CAAC,EAAE;MACzCA,OAAO,CAACU,EAAE,GAAG,IAAI,CAACd,MAAM,CAACe,GAAG,CAACC,YAAY,CAACL,MAAM,EAAEP,OAAO,CAAC;IAC5D;EACF;AAEF;AAEAP,UAAU,CAACoB,OAAO,GAAG,CAAE,QAAQ,CAAE"}