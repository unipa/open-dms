{"version":3,"file":"Modeling.js","names":["assign","BaseModeling","UpdateAllowedValuesHandler","UpdatePropertiesHandler","IdClaimHandler","Modeling","constructor","eventBus","elementFactory","commandStack","sheet","_eventBus","_elementFactory","_commandStack","_sheet","getHandlers","_getHandlers","editDecisionTableName","name","root","getRoot","businessObject","parentBusinessObject","$parent","context","element","properties","execute","editDecisionTableId","id","editHitPolicy","hitPolicy","aggregation","updateProperties","el","props","editInputExpression","inputExpression","editOutputName","output","editInputExpressionTypeRef","typeRef","editOutputTypeRef","editCell","cell","text","editAnnotation","rule","description","editAllowedValues","allowedValues","editExpressionLanguage","expressionLanguage","claimId","moddleElement","claiming","unclaimId","$inject"],"sources":["../../../src/features/modeling/Modeling.js"],"sourcesContent":["import { assign } from 'min-dash';\r\n\r\nimport BaseModeling from 'table-js/lib/features/modeling/Modeling';\r\n\r\nimport UpdateAllowedValuesHandler from './cmd/UpdateAllowedValuesHandler';\r\nimport UpdatePropertiesHandler\r\n  from 'dmn-js-shared/lib/features/modeling/cmd/UpdatePropertiesHandler';\r\nimport IdClaimHandler from './cmd/IdClaimHandler';\r\n\r\n\r\nexport default class Modeling extends BaseModeling {\r\n\r\n  constructor(eventBus, elementFactory, commandStack, sheet) {\r\n    super(eventBus, elementFactory, commandStack);\r\n\r\n    this._eventBus = eventBus;\r\n    this._elementFactory = elementFactory;\r\n    this._commandStack = commandStack;\r\n    this._sheet = sheet;\r\n  }\r\n\r\n  getHandlers() {\r\n    return Modeling._getHandlers();\r\n  }\r\n\r\n  static _getHandlers() {\r\n    return assign({}, super._getHandlers(), {\r\n      'editAllowedValues': UpdateAllowedValuesHandler,\r\n      'element.updateProperties': UpdatePropertiesHandler,\r\n      'id.updateClaim': IdClaimHandler\r\n    });\r\n  }\r\n\r\n  editDecisionTableName(name) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject,\r\n          parentBusinessObject = businessObject.$parent;\r\n\r\n    const context = {\r\n      element: parentBusinessObject,\r\n      properties: {\r\n        name\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editDecisionTableId(id) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject,\r\n          parentBusinessObject = businessObject.$parent;\r\n\r\n    const context = {\r\n      element: parentBusinessObject,\r\n      properties: {\r\n        id\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editHitPolicy(hitPolicy, aggregation) {\r\n    const root = this._sheet.getRoot(),\r\n          businessObject = root.businessObject;\r\n\r\n    const context = {\r\n      element: businessObject,\r\n      properties: {\r\n        hitPolicy,\r\n        aggregation\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  updateProperties(el, props) {\r\n    const context = {\r\n      element: el,\r\n      properties: props\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editInputExpression(inputExpression, props) {\r\n    const context = {\r\n      element: inputExpression,\r\n      properties: props\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editOutputName(output, name) {\r\n    const context = {\r\n      element: output,\r\n      properties: {\r\n        name\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editInputExpressionTypeRef(inputExpression, typeRef) {\r\n    const context = {\r\n      element: inputExpression,\r\n      properties: {\r\n        typeRef\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editOutputTypeRef(output, typeRef) {\r\n    const context = {\r\n      element: output,\r\n      properties: {\r\n        typeRef\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editCell(cell, text) {\r\n    const context = {\r\n      element: cell,\r\n      properties: {\r\n        text\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editAnnotation(rule, description) {\r\n    const context = {\r\n      element: rule,\r\n      properties: {\r\n        description\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  editAllowedValues(element, allowedValues) {\r\n    const context = {\r\n      element,\r\n      allowedValues\r\n    };\r\n\r\n    this._commandStack.execute('editAllowedValues', context);\r\n  }\r\n\r\n  editExpressionLanguage(element, expressionLanguage) {\r\n    const context = {\r\n      element,\r\n      properties: {\r\n        expressionLanguage\r\n      }\r\n    };\r\n\r\n    this._commandStack.execute('element.updateProperties', context);\r\n  }\r\n\r\n  claimId(id, moddleElement) {\r\n    const context = {\r\n      id: id,\r\n      element: moddleElement,\r\n      claiming: true\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n\r\n  unclaimId(id, moddleElement) {\r\n    const context = {\r\n      id: id,\r\n      element: moddleElement\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n}\r\n\r\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack', 'sheet' ];"],"mappings":"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"}