{"version":3,"file":"OutputTimeEdit.js","names":["Component","ValidatedInput","getSampleTime","validateISOString","parseString","getSampleDate","OutputTimeEdit","constructor","props","context","_translate","injector","get","_modeling","element","parsedString","businessObject","text","state","date","debounceInput","debouncedEditCell","editCell","bind","onClick","onInput","cell","setState","value","render","example","string"],"sources":["../../../../src/features/simple-time-edit/components/OutputTimeEdit.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport ValidatedInput from 'dmn-js-shared/lib/components/ValidatedInput';\n\nimport {\n  getSampleTime,\n  validateISOString,\n  parseString\n} from '../Utils';\nimport { getSampleDate } from '../../simple-date-edit/Utils';\n\n\nexport default class OutputTimeEdit extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this._translate = context.injector.get('translate');\n    this._modeling = context.injector.get('modeling');\n\n    const { element } = this.props.context;\n\n    const parsedString = parseString(element.businessObject.text);\n\n    this.state = {\n      date: parsedString ? parsedString.date : ''\n    };\n\n    const debounceInput = context.injector.get('debounceInput');\n\n    this.debouncedEditCell = debounceInput(this.editCell.bind(this));\n    this.editCell = this.editCell.bind(this);\n\n    this.onClick = this.onClick.bind(this);\n    this.onInput = this.onInput.bind(this);\n  }\n\n  editCell(cell, text) {\n    this._modeling.editCell(cell, text);\n  }\n\n  onClick() {\n    const { element } = this.props.context;\n\n    const date = getSampleTime();\n\n    this.setState({\n      date\n    });\n\n    this.editCell(element.businessObject, `time(\"${ date }\")`);\n  }\n\n  onInput({ value }) {\n    const { element } = this.props.context;\n\n    this.setState({\n      date: value\n    });\n\n    this.debouncedEditCell(element.businessObject, `time(\"${ value }\")`);\n  }\n\n  render() {\n    const { date } = this.state;\n\n    return (\n      <div class=\"context-menu-container simple-time-edit\">\n\n        <h3 class=\"dms-heading\">{ this._translate('Edit Date') }</h3>\n\n        <h4 class=\"dms-heading\">{ this._translate('Set Date') }</h4>\n\n        <div>\n          <ValidatedInput\n            onInput={ this.onInput }\n            placeholder={ this._translate('e.g. { example } ', {\n              example: getSampleDate()\n            }) }\n            validate={ string => validateISOString(string) &&\n              this._translate(validateISOString(string)) }\n            value={ date }\n            className=\"dms-block\">\n          </ValidatedInput>\n\n          <p className=\"dms-hint\">\n            { this._translate('Set date') } <button type=\"button\"\n              className=\"use-now\"\n              onClick={ this.onClick }>{ this._translate('to now') }</button>.\n          </p>\n        </div>\n\n      </div>\n    );\n  }\n}"],"mappings":"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"}