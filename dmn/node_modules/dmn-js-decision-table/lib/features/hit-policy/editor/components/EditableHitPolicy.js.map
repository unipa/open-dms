{"version":3,"file":"EditableHitPolicy.js","names":["Component","find","InputSelect","inject","HIT_POLICIES","EditableHitPolicy","constructor","props","context","aggregation","hitPolicy","modeling","editHitPolicy","forceUpdate","_translate","injector","get","componentDidMount","changeSupport","onElementsChanged","getRoot","id","componentWillUnmount","offElementsChanged","sheet","render","root","businessObject","hitPolicyEntry","entry","isEqualHitPolicy","value","onChange","map","label","explanation","$inject","a","b"],"sources":["../../../../../src/features/hit-policy/editor/components/EditableHitPolicy.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { find } from 'min-dash';\n\nimport InputSelect from 'dmn-js-shared/lib/components/InputSelect';\n\nimport {\n  inject\n} from 'table-js/lib/components';\n\nimport { HIT_POLICIES } from './../../HitPolicies';\n\n\nexport default class EditableHitPolicy extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this._translate = context.injector.get('translate');\n\n    inject(this);\n  }\n\n  onChange = ({ aggregation, hitPolicy }) => {\n    this.modeling.editHitPolicy(hitPolicy, aggregation);\n  };\n\n  onElementsChanged = () => {\n    this.forceUpdate();\n  };\n\n  componentDidMount() {\n    this.changeSupport.onElementsChanged(this.getRoot().id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    this.changeSupport.offElementsChanged(this.getRoot().id, this.onElementsChanged);\n  }\n\n  getRoot() {\n    return this.sheet.getRoot();\n  }\n\n  render() {\n    const root = this.getRoot(),\n          businessObject = root.businessObject;\n\n    const { aggregation, hitPolicy } = businessObject;\n\n    const hitPolicyEntry = find(HIT_POLICIES, entry => {\n      return isEqualHitPolicy(entry.value, { aggregation, hitPolicy });\n    });\n\n    return (\n      <div className=\"hit-policy\" title={ this._translate(hitPolicyEntry.explanation) }>\n        <label className=\"dms-label\">\n          { this._translate('Hit Policy:') }\n        </label>\n        <InputSelect\n          className=\"hit-policy-edit-policy-select\"\n          onChange={ this.onChange }\n          options={ HIT_POLICIES.map(entry =>\n            ({ ...entry, label: this._translate(entry.label) })) }\n          value={ hitPolicyEntry.value }\n          data-hit-policy=\"true\"\n          noInput\n        />\n      </div>\n    );\n  }\n}\n\nEditableHitPolicy.$inject = [\n  'changeSupport',\n  'sheet',\n  'modeling'\n];\n\n\n// helpers //////////////////////\nfunction isEqualHitPolicy(a, b) {\n  return a.hitPolicy === b.hitPolicy && a.aggregation === b.aggregation;\n}\n"],"mappings":";;;;;;AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,SAASC,IAAI,QAAQ,UAAU;AAE/B,OAAOC,WAAW,MAAM,0CAA0C;AAElE,SACEC,MAAM,QACD,yBAAyB;AAEhC,SAASC,YAAY,QAAQ,qBAAqB;AAGlD,eAAe,MAAMC,iBAAiB,SAASL,SAAS,CAAC;EAEvDM,WAAW,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,EAAEC,OAAO,CAAC;IAAC,kCAOb,QAAgC;MAAA,IAA7BC,WAAW,QAAXA,WAAW;QAAEC,SAAS,QAATA,SAAS;MAClC,IAAI,CAACC,QAAQ,CAACC,aAAa,CAACF,SAAS,EAAED,WAAW,CAAC;IACrD,CAAC;IAAA,2CAEmB,MAAM;MACxB,IAAI,CAACI,WAAW,EAAE;IACpB,CAAC;IAXC,IAAI,CAACC,UAAU,GAAGN,OAAO,CAACO,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;IAEnDb,MAAM,CAAC,IAAI,CAAC;EACd;EAUAc,iBAAiB,GAAG;IAClB,IAAI,CAACC,aAAa,CAACC,iBAAiB,CAAC,IAAI,CAACC,OAAO,EAAE,CAACC,EAAE,EAAE,IAAI,CAACF,iBAAiB,CAAC;EACjF;EAEAG,oBAAoB,GAAG;IACrB,IAAI,CAACJ,aAAa,CAACK,kBAAkB,CAAC,IAAI,CAACH,OAAO,EAAE,CAACC,EAAE,EAAE,IAAI,CAACF,iBAAiB,CAAC;EAClF;EAEAC,OAAO,GAAG;IACR,OAAO,IAAI,CAACI,KAAK,CAACJ,OAAO,EAAE;EAC7B;EAEAK,MAAM,GAAG;IACP,MAAMC,IAAI,GAAG,IAAI,CAACN,OAAO,EAAE;MACrBO,cAAc,GAAGD,IAAI,CAACC,cAAc;IAE1C,MAAQlB,WAAW,GAAgBkB,cAAc,CAAzClB,WAAW;MAAEC,SAAS,GAAKiB,cAAc,CAA5BjB,SAAS;IAE9B,MAAMkB,cAAc,GAAG3B,IAAI,CAACG,YAAY,EAAEyB,KAAK,IAAI;MACjD,OAAOC,gBAAgB,CAACD,KAAK,CAACE,KAAK,EAAE;QAAEtB,WAAW;QAAEC;MAAU,CAAC,CAAC;IAClE,CAAC,CAAC;IAEF,6BACiB,YAAY,2BACR,WAAW,EACxB,IAAI,CAACI,UAAU,CAAC,aAAa,CAAC;MAAA,aAGtB,+BAA+B;MAAA,YAC9B,IAAI,CAACkB,QAAQ;MAAA,WACd5B,YAAY,CAAC6B,GAAG,CAACJ,KAAK,oCACxBA,KAAK;QAAEK,KAAK,EAAE,IAAI,CAACpB,UAAU,CAACe,KAAK,CAACK,KAAK;MAAC,EAAG,CAAC;MAAA,SAC9CN,cAAc,CAACG,KAAK;MAAA,mBACZ,MAAM;MAAA;IAAA;MAAA,SAVU,IAAI,CAACjB,UAAU,CAACc,cAAc,CAACO,WAAW;IAAC;EAenF;AACF;AAEA9B,iBAAiB,CAAC+B,OAAO,GAAG,CAC1B,eAAe,EACf,OAAO,EACP,UAAU,CACX;;AAGD;AACA,SAASN,gBAAgB,CAACO,CAAC,EAAEC,CAAC,EAAE;EAC9B,OAAOD,CAAC,CAAC3B,SAAS,KAAK4B,CAAC,CAAC5B,SAAS,IAAI2B,CAAC,CAAC5B,WAAW,KAAK6B,CAAC,CAAC7B,WAAW;AACvE"}