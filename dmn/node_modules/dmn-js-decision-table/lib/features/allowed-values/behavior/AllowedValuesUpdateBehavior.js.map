{"version":3,"file":"AllowedValuesUpdateBehavior.js","names":["CommandInterceptor","is","isInput","AllowedValuesUpdateBehavior","constructor","eventBus","modeling","postExecuted","event","context","element","properties","actualProperties","inputExpression","typeRef","target","$parent","editAllowedValues","$inject"],"sources":["../../../../src/features/allowed-values/behavior/AllowedValuesUpdateBehavior.js"],"sourcesContent":["import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is, isInput } from 'dmn-js-shared/lib/util/ModelUtil';\n\n/**\n * Makes sure allowed values are removed if type is set to\n * something other than string.\n */\nexport default class AllowedValuesUpdateBehavior extends CommandInterceptor {\n\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    this.postExecuted('element.updateProperties', event => {\n      const {\n        element,\n        properties\n      } = event.context;\n\n      const actualProperties = isInput(element) ? properties.inputExpression : properties;\n\n      if (actualProperties\n        && actualProperties.typeRef\n        && actualProperties.typeRef !== 'string') {\n\n        const target = (\n          is(element, 'dmn:LiteralExpression') ?\n            element.$parent :\n            element\n        );\n\n        // delete allowed values\n        modeling.editAllowedValues(target, null);\n      }\n    });\n  }\n}\n\nAllowedValuesUpdateBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];"],"mappings":"AAAA,OAAOA,kBAAkB,MAAM,2CAA2C;AAE1E,SAASC,EAAE,EAAEC,OAAO,QAAQ,kCAAkC;;AAE9D;AACA;AACA;AACA;AACA,eAAe,MAAMC,2BAA2B,SAASH,kBAAkB,CAAC;EAE1EI,WAAW,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC9B,KAAK,CAACD,QAAQ,CAAC;IAEf,IAAI,CAACE,YAAY,CAAC,0BAA0B,EAAEC,KAAK,IAAI;MACrD,uBAGIA,KAAK,CAACC,OAAO;QAFfC,OAAO,kBAAPA,OAAO;QACPC,UAAU,kBAAVA,UAAU;MAGZ,MAAMC,gBAAgB,GAAGV,OAAO,CAACQ,OAAO,CAAC,GAAGC,UAAU,CAACE,eAAe,GAAGF,UAAU;MAEnF,IAAIC,gBAAgB,IACfA,gBAAgB,CAACE,OAAO,IACxBF,gBAAgB,CAACE,OAAO,KAAK,QAAQ,EAAE;QAE1C,MAAMC,MAAM,GACVd,EAAE,CAACS,OAAO,EAAE,uBAAuB,CAAC,GAClCA,OAAO,CAACM,OAAO,GACfN,OACH;;QAED;QACAJ,QAAQ,CAACW,iBAAiB,CAACF,MAAM,EAAE,IAAI,CAAC;MAC1C;IACF,CAAC,CAAC;EACJ;AACF;AAEAZ,2BAA2B,CAACe,OAAO,GAAG,CACpC,UAAU,EACV,UAAU,CACX"}