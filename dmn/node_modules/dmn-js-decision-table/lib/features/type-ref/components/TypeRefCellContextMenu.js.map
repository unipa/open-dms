{"version":3,"file":"TypeRefCellContextMenu.js","names":["Component","is","isInput","isOutput","InputSelect","TypeRefCellContextMenu","constructor","props","context","value","element","getElement","actualElement","$parent","newProperties","inputExpression","typeRef","_modeling","updateProperties","_translate","injector","get","_dataTypes","input","output","render","typeRefOptions","getAll","map","t","label","onTypeChange"],"sources":["../../../../src/features/type-ref/components/TypeRefCellContextMenu.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { is, isInput, isOutput } from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport InputSelect from 'dmn-js-shared/lib/components/InputSelect';\n\n\nexport default class TypeRefCellContextMenu extends Component {\n\n  constructor(props, context) {\n    super(props);\n\n    this._translate = context.injector.get('translate');\n    this._modeling = context.injector.get('modeling');\n    this._dataTypes = context.injector.get('dataTypes');\n  }\n\n  onTypeChange = (value) => {\n    const element = this.getElement();\n\n    const actualElement = is(element, 'dmn:LiteralExpression')\n      ? element.$parent\n      : element;\n\n    let newProperties;\n\n    if (isInput(actualElement)) {\n      newProperties = {\n        inputExpression: {\n          typeRef: value\n        }\n      };\n    } else if (isOutput(actualElement)) {\n      newProperties = {\n        typeRef: value\n      };\n    }\n\n    this._modeling.updateProperties(actualElement, newProperties);\n  };\n\n  getElement() {\n    return this.props.context.input || this.props.context.output;\n  }\n\n  render() {\n    const element = this.getElement();\n\n    const typeRef = (\n      is(element, 'dmn:InputClause') ?\n        element.inputExpression :\n        element\n    ).typeRef;\n\n    const typeRefOptions = this._dataTypes.getAll().map(t => {\n      return {\n        label: this._translate(t),\n        value: t\n      };\n    });\n\n    return (\n      <div className=\"type-ref-edit context-menu-container\">\n        <div className=\"dms-form-control\">\n          <label className=\"dms-label\">\n            { this._translate('Type') }:\n          </label>\n\n          <InputSelect\n            className=\"type-ref-edit-select\"\n            onChange={ this.onTypeChange }\n            options={ typeRefOptions }\n            value={ typeRef } />\n        </div>\n      </div>\n    );\n  }\n}"],"mappings":";;;;AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,SAASC,EAAE,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,kCAAkC;AAExE,OAAOC,WAAW,MAAM,0CAA0C;AAGlE,eAAe,MAAMC,sBAAsB,SAASL,SAAS,CAAC;EAE5DM,WAAW,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,CAAC;IAAC,sCAOCE,KAAK,IAAK;MACxB,MAAMC,OAAO,GAAG,IAAI,CAACC,UAAU,EAAE;MAEjC,MAAMC,aAAa,GAAGX,EAAE,CAACS,OAAO,EAAE,uBAAuB,CAAC,GACtDA,OAAO,CAACG,OAAO,GACfH,OAAO;MAEX,IAAII,aAAa;MAEjB,IAAIZ,OAAO,CAACU,aAAa,CAAC,EAAE;QAC1BE,aAAa,GAAG;UACdC,eAAe,EAAE;YACfC,OAAO,EAAEP;UACX;QACF,CAAC;MACH,CAAC,MAAM,IAAIN,QAAQ,CAACS,aAAa,CAAC,EAAE;QAClCE,aAAa,GAAG;UACdE,OAAO,EAAEP;QACX,CAAC;MACH;MAEA,IAAI,CAACQ,SAAS,CAACC,gBAAgB,CAACN,aAAa,EAAEE,aAAa,CAAC;IAC/D,CAAC;IA3BC,IAAI,CAACK,UAAU,GAAGX,OAAO,CAACY,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;IACnD,IAAI,CAACJ,SAAS,GAAGT,OAAO,CAACY,QAAQ,CAACC,GAAG,CAAC,UAAU,CAAC;IACjD,IAAI,CAACC,UAAU,GAAGd,OAAO,CAACY,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;EACrD;EA0BAV,UAAU,GAAG;IACX,OAAO,IAAI,CAACJ,KAAK,CAACC,OAAO,CAACe,KAAK,IAAI,IAAI,CAAChB,KAAK,CAACC,OAAO,CAACgB,MAAM;EAC9D;EAEAC,MAAM,GAAG;IACP,MAAMf,OAAO,GAAG,IAAI,CAACC,UAAU,EAAE;IAEjC,MAAMK,OAAO,GAAG,CACdf,EAAE,CAACS,OAAO,EAAE,iBAAiB,CAAC,GAC5BA,OAAO,CAACK,eAAe,GACvBL,OAAO,EACTM,OAAO;IAET,MAAMU,cAAc,GAAG,IAAI,CAACJ,UAAU,CAACK,MAAM,EAAE,CAACC,GAAG,CAACC,CAAC,IAAI;MACvD,OAAO;QACLC,KAAK,EAAE,IAAI,CAACX,UAAU,CAACU,CAAC,CAAC;QACzBpB,KAAK,EAAEoB;MACT,CAAC;IACH,CAAC,CAAC;IAEF,6BACiB,sCAAsC,wBACpC,kBAAkB,2BACd,WAAW,GACxB,IAAI,CAACV,UAAU,CAAC,MAAM,CAAC;MAAA,aAIf,sBAAsB;MAAA,YACrB,IAAI,CAACY,YAAY;MAAA,WAClBL,cAAc;MAAA,SAChBV;IAAO;EAIzB;AACF"}