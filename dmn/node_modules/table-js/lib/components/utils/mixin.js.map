{"version":3,"file":"mixin.js","names":["compose","injectType","mixin","component","mixinDef","Object","keys","forEach","key","mixinFn","call","props","context","componentFn","Error","bind","__init"],"sources":["../../../src/components/utils/mixin.js"],"sourcesContent":["import compose from './compose';\n\nimport { injectType } from './inject';\n\n\n/**\n * A Component and injection aware mixin mechanism.\n *\n * @param {Component} component\n * @param {Object|Function} mixinDef\n */\nexport default function mixin(component, mixinDef) {\n\n  Object.keys(mixinDef).forEach(function(key) {\n\n    if (key === '$inject' || key === '__init') {\n      return;\n    }\n\n    const mixinFn = mixinDef[key];\n\n    if (key === 'constructor') {\n      mixinFn.call(component, component.props, component.context);\n    }\n\n    const componentFn = component[key];\n\n    if (typeof componentFn !== 'undefined') {\n      if (typeof componentFn !== 'function') {\n        throw new Error(\n          `failed to mixin <${ key }>: cannot combine with non-fn component value`\n        );\n      }\n\n\n      component[key] = compose(component, componentFn, mixinFn);\n    } else {\n      component[key] = mixinFn.bind(component);\n    }\n  });\n\n  if ('$inject' in mixinDef) {\n    injectType(mixinDef, component);\n  }\n\n  // call initializer\n  if ('__init' in mixinDef) {\n    mixinDef.__init.call(component, component.props, component.context);\n  }\n\n}"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AAEA,SAASC,UAAT,QAA2B,UAA3B;AAGA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,KAAT,CAAeC,SAAf,EAA0BC,QAA1B,EAAoC;EAEjDC,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,OAAtB,CAA8B,UAASC,GAAT,EAAc;IAE1C,IAAIA,GAAG,KAAK,SAAR,IAAqBA,GAAG,KAAK,QAAjC,EAA2C;MACzC;IACD;;IAED,MAAMC,OAAO,GAAGL,QAAQ,CAACI,GAAD,CAAxB;;IAEA,IAAIA,GAAG,KAAK,aAAZ,EAA2B;MACzBC,OAAO,CAACC,IAAR,CAAaP,SAAb,EAAwBA,SAAS,CAACQ,KAAlC,EAAyCR,SAAS,CAACS,OAAnD;IACD;;IAED,MAAMC,WAAW,GAAGV,SAAS,CAACK,GAAD,CAA7B;;IAEA,IAAI,OAAOK,WAAP,KAAuB,WAA3B,EAAwC;MACtC,IAAI,OAAOA,WAAP,KAAuB,UAA3B,EAAuC;QACrC,MAAM,IAAIC,KAAJ,CACH,oBAAoBN,GAAK,+CADtB,CAAN;MAGD;;MAGDL,SAAS,CAACK,GAAD,CAAT,GAAiBR,OAAO,CAACG,SAAD,EAAYU,WAAZ,EAAyBJ,OAAzB,CAAxB;IACD,CATD,MASO;MACLN,SAAS,CAACK,GAAD,CAAT,GAAiBC,OAAO,CAACM,IAAR,CAAaZ,SAAb,CAAjB;IACD;EACF,CA1BD;;EA4BA,IAAI,aAAaC,QAAjB,EAA2B;IACzBH,UAAU,CAACG,QAAD,EAAWD,SAAX,CAAV;EACD,CAhCgD,CAkCjD;;;EACA,IAAI,YAAYC,QAAhB,EAA0B;IACxBA,QAAQ,CAACY,MAAT,CAAgBN,IAAhB,CAAqBP,SAArB,EAAgCA,SAAS,CAACQ,KAA1C,EAAiDR,SAAS,CAACS,OAA3D;EACD;AAEF"}