{"version":3,"file":"SelectionAware.js","names":["classNames","SelectionAware","getSelectionClasses","selected","selectedSecondary","focussed","state","selectionChanged","newSelection","setState","componentWillUpdate","newProps","elementId","props","updateSelectionSubscription","componentDidUpdate","oldProps","componentDidMount","componentWillUnmount","enable","eventBus","$inject"],"sources":["../../../src/components/mixins/SelectionAware.js"],"sourcesContent":["import {\n  classNames\n} from '../utils';\n\n\n/**\n * A mixin to make an element _selection aware_.\n */\nconst SelectionAware = {\n\n  getSelectionClasses() {\n\n    const {\n      selected,\n      selectedSecondary,\n      focussed\n    } = this.state;\n\n    return classNames({\n      'selected': selected,\n      'selected-secondary': selectedSecondary,\n      'focussed': focussed\n    });\n  },\n\n  selectionChanged(newSelection) {\n\n    // newSelection = { selected, selectedSecondary, focussed }\n    this.setState(newSelection);\n  },\n\n  componentWillUpdate(newProps) {\n    if (newProps.elementId !== this.props.elementId) {\n      this.updateSelectionSubscription(false);\n    }\n  },\n\n  componentDidUpdate(oldProps) {\n\n    if (oldProps.elementId !== this.props.elementId) {\n      this.updateSelectionSubscription(true);\n    }\n  },\n\n  componentDidMount() {\n    this.updateSelectionSubscription(true);\n  },\n\n  componentWillUnmount() {\n    this.updateSelectionSubscription(false);\n  },\n\n  updateSelectionSubscription(enable) {\n    const {\n      elementId\n    } = this.props;\n\n    if (!elementId) {\n      return;\n    }\n\n    if (elementId) {\n      this.eventBus[enable ? 'on' : 'off'](\n        `selection.${elementId}.changed`,\n        this.selectionChanged\n      );\n    }\n  },\n\n};\n\nexport default SelectionAware;\n\nSelectionAware.$inject = [ 'eventBus' ];"],"mappings":"AAAA,SACEA,UADF,QAEO,UAFP;AAKA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG;EAErBC,mBAAmB,GAAG;IAEpB,MAAM;MACJC,QADI;MAEJC,iBAFI;MAGJC;IAHI,IAIF,KAAKC,KAJT;IAMA,OAAON,UAAU,CAAC;MAChB,YAAYG,QADI;MAEhB,sBAAsBC,iBAFN;MAGhB,YAAYC;IAHI,CAAD,CAAjB;EAKD,CAfoB;;EAiBrBE,gBAAgB,CAACC,YAAD,EAAe;IAE7B;IACA,KAAKC,QAAL,CAAcD,YAAd;EACD,CArBoB;;EAuBrBE,mBAAmB,CAACC,QAAD,EAAW;IAC5B,IAAIA,QAAQ,CAACC,SAAT,KAAuB,KAAKC,KAAL,CAAWD,SAAtC,EAAiD;MAC/C,KAAKE,2BAAL,CAAiC,KAAjC;IACD;EACF,CA3BoB;;EA6BrBC,kBAAkB,CAACC,QAAD,EAAW;IAE3B,IAAIA,QAAQ,CAACJ,SAAT,KAAuB,KAAKC,KAAL,CAAWD,SAAtC,EAAiD;MAC/C,KAAKE,2BAAL,CAAiC,IAAjC;IACD;EACF,CAlCoB;;EAoCrBG,iBAAiB,GAAG;IAClB,KAAKH,2BAAL,CAAiC,IAAjC;EACD,CAtCoB;;EAwCrBI,oBAAoB,GAAG;IACrB,KAAKJ,2BAAL,CAAiC,KAAjC;EACD,CA1CoB;;EA4CrBA,2BAA2B,CAACK,MAAD,EAAS;IAClC,MAAM;MACJP;IADI,IAEF,KAAKC,KAFT;;IAIA,IAAI,CAACD,SAAL,EAAgB;MACd;IACD;;IAED,IAAIA,SAAJ,EAAe;MACb,KAAKQ,QAAL,CAAcD,MAAM,GAAG,IAAH,GAAU,KAA9B,EACG,aAAYP,SAAU,UADzB,EAEE,KAAKL,gBAFP;IAID;EACF;;AA3DoB,CAAvB;AA+DA,eAAeN,cAAf;AAEAA,cAAc,CAACoB,OAAf,GAAyB,CAAE,UAAF,CAAzB"}