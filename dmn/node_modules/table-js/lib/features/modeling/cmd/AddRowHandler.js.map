{"version":3,"file":"AddRowHandler.js","names":["AddRowHandler","constructor","sheet","elementFactory","_sheet","_elementFactory","execute","context","root","getRoot","row","index","rows","length","newRoot","cells","cols","forEach","col","idx","cell","create","addRow","revert","removeRow","$inject"],"sources":["../../../../src/features/modeling/cmd/AddRowHandler.js"],"sourcesContent":["\n/**\n * A handler that implements row addition.\n */\nexport default class AddRowHandler {\n\n  constructor(sheet, elementFactory) {\n    this._sheet = sheet;\n    this._elementFactory = elementFactory;\n  }\n\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet,\n          elementFactory = this._elementFactory,\n          root = sheet.getRoot();\n\n    let {\n      row,\n      index\n    } = context;\n\n    if (typeof index === 'undefined') {\n      index = context.index = root.rows.length;\n    }\n\n    context.newRoot = root;\n\n    if (!row.cells.length) {\n      root.cols.forEach((col, idx) => {\n        const cell = elementFactory.create('cell', { row, col });\n\n        row.cells[idx] = cell;\n      });\n    }\n\n    sheet.addRow(row, index);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      row\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.removeRow(row);\n\n    return sheet.getRoot();\n  }\n\n}\n\nAddRowHandler.$inject = [\n  'sheet',\n  'elementFactory'\n];"],"mappings":"AACA;AACA;AACA;AACA,eAAe,MAAMA,aAAN,CAAoB;EAEjCC,WAAW,CAACC,KAAD,EAAQC,cAAR,EAAwB;IACjC,KAAKC,MAAL,GAAcF,KAAd;IACA,KAAKG,eAAL,GAAuBF,cAAvB;EACD;EAGD;AACF;AACA;;;EACEG,OAAO,CAACC,OAAD,EAAU;IAEf,MAAML,KAAK,GAAG,KAAKE,MAAnB;IAAA,MACMD,cAAc,GAAG,KAAKE,eAD5B;IAAA,MAEMG,IAAI,GAAGN,KAAK,CAACO,OAAN,EAFb;IAIA,IAAI;MACFC,GADE;MAEFC;IAFE,IAGAJ,OAHJ;;IAKA,IAAI,OAAOI,KAAP,KAAiB,WAArB,EAAkC;MAChCA,KAAK,GAAGJ,OAAO,CAACI,KAAR,GAAgBH,IAAI,CAACI,IAAL,CAAUC,MAAlC;IACD;;IAEDN,OAAO,CAACO,OAAR,GAAkBN,IAAlB;;IAEA,IAAI,CAACE,GAAG,CAACK,KAAJ,CAAUF,MAAf,EAAuB;MACrBL,IAAI,CAACQ,IAAL,CAAUC,OAAV,CAAkB,CAACC,GAAD,EAAMC,GAAN,KAAc;QAC9B,MAAMC,IAAI,GAAGjB,cAAc,CAACkB,MAAf,CAAsB,MAAtB,EAA8B;UAAEX,GAAF;UAAOQ;QAAP,CAA9B,CAAb;QAEAR,GAAG,CAACK,KAAJ,CAAUI,GAAV,IAAiBC,IAAjB;MACD,CAJD;IAKD;;IAEDlB,KAAK,CAACoB,MAAN,CAAaZ,GAAb,EAAkBC,KAAlB;IAEA,OAAOT,KAAK,CAACO,OAAN,EAAP;EACD;EAGD;AACF;AACA;;;EACEc,MAAM,CAAChB,OAAD,EAAU;IAEd,MAAM;MACJG;IADI,IAEFH,OAFJ;IAIA,MAAML,KAAK,GAAG,KAAKE,MAAnB;IAEAF,KAAK,CAACsB,SAAN,CAAgBd,GAAhB;IAEA,OAAOR,KAAK,CAACO,OAAN,EAAP;EACD;;AAxDgC;AA4DnCT,aAAa,CAACyB,OAAd,GAAwB,CACtB,OADsB,EAEtB,gBAFsB,CAAxB"}