{"version":3,"file":"RemoveRowHandler.js","names":["RemoveRowHandler","constructor","sheet","_sheet","execute","context","root","getRoot","row","oldIndex","rows","indexOf","oldRoot","Error","id","removeRow","revert","addRow","$inject"],"sources":["../../../../src/features/modeling/cmd/RemoveRowHandler.js"],"sourcesContent":["\n/**\n * A handler that implements row deletion.\n */\nexport default class RemoveRowHandler {\n\n  constructor(sheet) {\n    this._sheet = sheet;\n  }\n\n\n  /**\n   * <do>\n   */\n  execute(context) {\n\n    const sheet = this._sheet,\n          root = sheet.getRoot();\n\n    let {\n      row\n    } = context;\n\n    // retrieve and remember previous row position\n    const oldIndex = context.oldIndex = root.rows.indexOf(row);\n\n    context.oldRoot = row.root;\n\n    if (oldIndex === -1) {\n      throw new Error(`row#${row.id} not in sheet`);\n    }\n\n    sheet.removeRow(row);\n\n    return sheet.getRoot();\n  }\n\n\n  /**\n   * <undo>\n   */\n  revert(context) {\n\n    const {\n      row,\n      oldIndex\n    } = context;\n\n    const sheet = this._sheet;\n\n    sheet.addRow(row, oldIndex);\n\n    return sheet.getRoot();\n  }\n\n}\n\nRemoveRowHandler.$inject = [\n  'sheet'\n];"],"mappings":"AACA;AACA;AACA;AACA,eAAe,MAAMA,gBAAN,CAAuB;EAEpCC,WAAW,CAACC,KAAD,EAAQ;IACjB,KAAKC,MAAL,GAAcD,KAAd;EACD;EAGD;AACF;AACA;;;EACEE,OAAO,CAACC,OAAD,EAAU;IAEf,MAAMH,KAAK,GAAG,KAAKC,MAAnB;IAAA,MACMG,IAAI,GAAGJ,KAAK,CAACK,OAAN,EADb;IAGA,IAAI;MACFC;IADE,IAEAH,OAFJ,CALe,CASf;;IACA,MAAMI,QAAQ,GAAGJ,OAAO,CAACI,QAAR,GAAmBH,IAAI,CAACI,IAAL,CAAUC,OAAV,CAAkBH,GAAlB,CAApC;IAEAH,OAAO,CAACO,OAAR,GAAkBJ,GAAG,CAACF,IAAtB;;IAEA,IAAIG,QAAQ,KAAK,CAAC,CAAlB,EAAqB;MACnB,MAAM,IAAII,KAAJ,CAAW,OAAML,GAAG,CAACM,EAAG,eAAxB,CAAN;IACD;;IAEDZ,KAAK,CAACa,SAAN,CAAgBP,GAAhB;IAEA,OAAON,KAAK,CAACK,OAAN,EAAP;EACD;EAGD;AACF;AACA;;;EACES,MAAM,CAACX,OAAD,EAAU;IAEd,MAAM;MACJG,GADI;MAEJC;IAFI,IAGFJ,OAHJ;IAKA,MAAMH,KAAK,GAAG,KAAKC,MAAnB;IAEAD,KAAK,CAACe,MAAN,CAAaT,GAAb,EAAkBC,QAAlB;IAEA,OAAOP,KAAK,CAACK,OAAN,EAAP;EACD;;AAjDmC;AAqDtCP,gBAAgB,CAACkB,OAAjB,GAA2B,CACzB,OADyB,CAA3B"}