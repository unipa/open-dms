{"version":3,"file":"Table.js","names":["Injector","core","Table","constructor","options","injector","modules","config","_init","createInjector","get","invoke","fire","destroy","eventBus","clear","bootstrapModules","concat","init"],"sources":["../src/Table.js"],"sourcesContent":["import { Injector } from 'didi';\n\nimport core from './core';\n\n\nexport default class Table {\n\n  constructor(options = {}) {\n    let {\n      injector\n    } = options;\n\n    if (!injector) {\n      let { modules, config } = this._init(options);\n\n      injector = createInjector(config, modules);\n    }\n\n    this.get = injector.get;\n\n    this.invoke = injector.invoke;\n\n    this.get('eventBus').fire('table.init');\n    this.get('eventBus').fire('diagram.init');\n  }\n\n  /**\n   * Intialize table and return modules and config used for creation.\n   *\n   * @param  {Object} options\n   *\n   * @return {Object} { modules=[], config }\n   */\n  _init(options) {\n    let {\n      modules,\n      ...config\n    } = options;\n\n    return { modules, config };\n  }\n\n  /**\n   * Destroys the table. This results in removing the attachment from the container.\n   */\n  destroy() {\n    const eventBus = this.get('eventBus');\n\n    eventBus.fire('table.destroy');\n    eventBus.fire('diagram.destroy');\n  }\n\n  /**\n   * Clears the table. Should be used to reset the state of any stateful services.\n   */\n  clear() {\n    const eventBus = this.get('eventBus');\n\n    eventBus.fire('table.clear');\n    eventBus.fire('diagram.clear');\n  }\n\n}\n\nfunction createInjector(config, modules) {\n  const bootstrapModules = [\n    {\n      config: [ 'value', config ]\n    },\n    core\n  ].concat(modules || []);\n\n  const injector = new Injector(bootstrapModules);\n\n  injector.init();\n\n  return injector;\n}\n"],"mappings":"AAAA,SAASA,QAAT,QAAyB,MAAzB;AAEA,OAAOC,IAAP,MAAiB,QAAjB;AAGA,eAAe,MAAMC,KAAN,CAAY;EAEzBC,WAAW,CAACC,OAAO,GAAG,EAAX,EAAe;IACxB,IAAI;MACFC;IADE,IAEAD,OAFJ;;IAIA,IAAI,CAACC,QAAL,EAAe;MACb,IAAI;QAAEC,OAAF;QAAWC;MAAX,IAAsB,KAAKC,KAAL,CAAWJ,OAAX,CAA1B;;MAEAC,QAAQ,GAAGI,cAAc,CAACF,MAAD,EAASD,OAAT,CAAzB;IACD;;IAED,KAAKI,GAAL,GAAWL,QAAQ,CAACK,GAApB;IAEA,KAAKC,MAAL,GAAcN,QAAQ,CAACM,MAAvB;IAEA,KAAKD,GAAL,CAAS,UAAT,EAAqBE,IAArB,CAA0B,YAA1B;IACA,KAAKF,GAAL,CAAS,UAAT,EAAqBE,IAArB,CAA0B,cAA1B;EACD;EAED;AACF;AACA;AACA;AACA;AACA;AACA;;;EACEJ,KAAK,CAACJ,OAAD,EAAU;IACb,IAAI;MACFE,OADE;MAEF,GAAGC;IAFD,IAGAH,OAHJ;IAKA,OAAO;MAAEE,OAAF;MAAWC;IAAX,CAAP;EACD;EAED;AACF;AACA;;;EACEM,OAAO,GAAG;IACR,MAAMC,QAAQ,GAAG,KAAKJ,GAAL,CAAS,UAAT,CAAjB;IAEAI,QAAQ,CAACF,IAAT,CAAc,eAAd;IACAE,QAAQ,CAACF,IAAT,CAAc,iBAAd;EACD;EAED;AACF;AACA;;;EACEG,KAAK,GAAG;IACN,MAAMD,QAAQ,GAAG,KAAKJ,GAAL,CAAS,UAAT,CAAjB;IAEAI,QAAQ,CAACF,IAAT,CAAc,aAAd;IACAE,QAAQ,CAACF,IAAT,CAAc,eAAd;EACD;;AAvDwB;;AA2D3B,SAASH,cAAT,CAAwBF,MAAxB,EAAgCD,OAAhC,EAAyC;EACvC,MAAMU,gBAAgB,GAAG,CACvB;IACET,MAAM,EAAE,CAAE,OAAF,EAAWA,MAAX;EADV,CADuB,EAIvBN,IAJuB,EAKvBgB,MALuB,CAKhBX,OAAO,IAAI,EALK,CAAzB;EAOA,MAAMD,QAAQ,GAAG,IAAIL,QAAJ,CAAagB,gBAAb,CAAjB;EAEAX,QAAQ,CAACa,IAAT;EAEA,OAAOb,QAAP;AACD"}