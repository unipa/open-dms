{"version":3,"file":"TableComponent.js","names":["Component","TableComponent","constructor","props","injector","_injector","_sheet","get","_changeSupport","_components","_eventBus","throttle","onElementsChanged","bind","onScroll","forceUpdate","fire","getChildContext","changeSupport","components","componentWillMount","id","getRoot","componentWillUnmount","offElementsChanged","render","rows","cols","beforeTableComponents","getComponents","afterTableComponents","Head","getComponent","Body","Foot","map","index"],"sources":["../../../src/render/components/TableComponent.js"],"sourcesContent":["import { Component } from 'inferno';\n\n\nexport default class TableComponent extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const injector = this._injector = props.injector;\n\n    this._sheet = injector.get('sheet');\n    this._changeSupport = injector.get('changeSupport');\n    this._components = injector.get('components');\n    this._eventBus = injector.get('eventBus');\n\n    const throttle = injector.get('throttle');\n\n    this.onElementsChanged = this.onElementsChanged.bind(this);\n\n    this.onScroll = throttle(this.onScroll.bind(this));\n  }\n\n  onElementsChanged() {\n    this.forceUpdate();\n  }\n\n  onScroll() {\n    this._eventBus.fire('sheet.scroll');\n  }\n\n  getChildContext() {\n    return {\n      changeSupport: this._changeSupport,\n      components: this._components,\n      injector: this._injector\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this._sheet.getRoot();\n\n    this._changeSupport.onElementsChanged(id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    const { id } = this._sheet.getRoot();\n\n    this._changeSupport.offElementsChanged(id, this.onElementsChanged);\n  }\n\n  render() {\n    const { rows, cols } = this._sheet.getRoot();\n\n    const beforeTableComponents = this._components.getComponents('table.before');\n    const afterTableComponents = this._components.getComponents('table.after');\n\n    const Head = this._components.getComponent('table.head');\n    const Body = this._components.getComponent('table.body');\n    const Foot = this._components.getComponent('table.foot');\n\n    return (\n      <div className=\"tjs-container\">\n        {\n          beforeTableComponents &&\n            beforeTableComponents.map((Component, index) => <Component key={ index } />)\n        }\n        <div className=\"tjs-table-container\" onScroll={ this.onScroll }>\n          <table className=\"tjs-table\">\n            { Head && <Head rows={ rows } cols={ cols } /> }\n            { Body && <Body rows={ rows } cols={ cols } /> }\n            { Foot && <Foot rows={ rows } cols={ cols } /> }\n          </table>\n        </div>\n        {\n          afterTableComponents &&\n            afterTableComponents.map((Component, index) => <Component key={ index } />)\n        }\n      </div>\n    );\n  }\n}"],"mappings":";AAAA,SAASA,SAAT,QAA0B,SAA1B;AAGA,eAAe,MAAMC,cAAN,SAA6BD,SAA7B,CAAuC;EAEpDE,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IAEA,MAAMC,QAAQ,GAAG,KAAKC,SAAL,GAAiBF,KAAK,CAACC,QAAxC;IAEA,KAAKE,MAAL,GAAcF,QAAQ,CAACG,GAAT,CAAa,OAAb,CAAd;IACA,KAAKC,cAAL,GAAsBJ,QAAQ,CAACG,GAAT,CAAa,eAAb,CAAtB;IACA,KAAKE,WAAL,GAAmBL,QAAQ,CAACG,GAAT,CAAa,YAAb,CAAnB;IACA,KAAKG,SAAL,GAAiBN,QAAQ,CAACG,GAAT,CAAa,UAAb,CAAjB;IAEA,MAAMI,QAAQ,GAAGP,QAAQ,CAACG,GAAT,CAAa,UAAb,CAAjB;IAEA,KAAKK,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;IAEA,KAAKC,QAAL,GAAgBH,QAAQ,CAAC,KAAKG,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAD,CAAxB;EACD;;EAEDD,iBAAiB,GAAG;IAClB,KAAKG,WAAL;EACD;;EAEDD,QAAQ,GAAG;IACT,KAAKJ,SAAL,CAAeM,IAAf,CAAoB,cAApB;EACD;;EAEDC,eAAe,GAAG;IAChB,OAAO;MACLC,aAAa,EAAE,KAAKV,cADf;MAELW,UAAU,EAAE,KAAKV,WAFZ;MAGLL,QAAQ,EAAE,KAAKC;IAHV,CAAP;EAKD;;EAEDe,kBAAkB,GAAG;IACnB,MAAM;MAAEC;IAAF,IAAS,KAAKf,MAAL,CAAYgB,OAAZ,EAAf;;IAEA,KAAKd,cAAL,CAAoBI,iBAApB,CAAsCS,EAAtC,EAA0C,KAAKT,iBAA/C;EACD;;EAEDW,oBAAoB,GAAG;IACrB,MAAM;MAAEF;IAAF,IAAS,KAAKf,MAAL,CAAYgB,OAAZ,EAAf;;IAEA,KAAKd,cAAL,CAAoBgB,kBAApB,CAAuCH,EAAvC,EAA2C,KAAKT,iBAAhD;EACD;;EAEDa,MAAM,GAAG;IACP,MAAM;MAAEC,IAAF;MAAQC;IAAR,IAAiB,KAAKrB,MAAL,CAAYgB,OAAZ,EAAvB;;IAEA,MAAMM,qBAAqB,GAAG,KAAKnB,WAAL,CAAiBoB,aAAjB,CAA+B,cAA/B,CAA9B;;IACA,MAAMC,oBAAoB,GAAG,KAAKrB,WAAL,CAAiBoB,aAAjB,CAA+B,aAA/B,CAA7B;;IAEA,MAAME,IAAI,GAAG,KAAKtB,WAAL,CAAiBuB,YAAjB,CAA8B,YAA9B,CAAb;;IACA,MAAMC,IAAI,GAAG,KAAKxB,WAAL,CAAiBuB,YAAjB,CAA8B,YAA9B,CAAb;;IACA,MAAME,IAAI,GAAG,KAAKzB,WAAL,CAAiBuB,YAAjB,CAA8B,YAA9B,CAAb;;IAEA,6BACiB,eADjB,GAGMJ,qBAAqB,IACnBA,qBAAqB,CAACO,GAAtB,CAA0B,CAACnC,SAAD,EAAYoC,KAAZ,8CAAuCA,KAAvC,CAA1B,CAJR,wBAMmB,qBANnB,0BAOuB,WAPvB,GAQUL,IAAI;MAAA,QAAiBL,IAAjB;MAAA,QAA+BC;IAA/B,EARd,EASUM,IAAI;MAAA,QAAiBP,IAAjB;MAAA,QAA+BC;IAA/B,EATd,EAUUO,IAAI;MAAA,QAAiBR,IAAjB;MAAA,QAA+BC;IAA/B,EAVd;MAAA,YAMoD,KAAKb;IANzD,IAcMgB,oBAAoB,IAClBA,oBAAoB,CAACK,GAArB,CAAyB,CAACnC,SAAD,EAAYoC,KAAZ,8CAAuCA,KAAvC,CAAzB,CAfR;EAmBD;;AA5EmD"}