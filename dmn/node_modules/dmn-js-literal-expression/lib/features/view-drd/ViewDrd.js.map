{"version":3,"file":"ViewDrd.js","names":["ViewDrdComponent","VERY_HIGH_PRIORITY","ViewDrd","constructor","components","viewer","eventBus","injector","_injector","_viewer","onGetComponent","canViewDrd","on","parent","get","definitions","getDefinitions","view","getView","open","getDecision","$inject","decision","$parent"],"sources":["../../../src/features/view-drd/ViewDrd.js"],"sourcesContent":["import ViewDrdComponent from './components/ViewDrdComponent';\r\n\r\nconst VERY_HIGH_PRIORITY = 2000;\r\n\r\n\r\nexport default class ViewDrd {\r\n\r\n  constructor(components, viewer, eventBus, injector) {\r\n    this._injector = injector;\r\n    this._viewer = viewer;\r\n\r\n    components.onGetComponent('viewer', VERY_HIGH_PRIORITY, () => {\r\n      if (this.canViewDrd()) {\r\n        return ViewDrdComponent;\r\n      }\r\n    });\r\n\r\n    eventBus.on('showDrd', () => {\r\n      const parent = injector.get('_parent', false);\r\n\r\n      // there is only one single element\r\n      const definitions = this.getDefinitions();\r\n\r\n      // open definitions\r\n      const view = parent.getView(definitions);\r\n\r\n      parent.open(view);\r\n    });\r\n  }\r\n\r\n  canViewDrd() {\r\n    const parent = this._injector.get('_parent', false);\r\n\r\n    if (!parent) {\r\n      return;\r\n    }\r\n\r\n    // there is only one single element\r\n    const definitions = this.getDefinitions();\r\n\r\n    return !!parent.getView(definitions);\r\n  }\r\n\r\n  getDefinitions() {\r\n    return getDefinitions(this._viewer.getDecision());\r\n  }\r\n\r\n}\r\n\r\nViewDrd.$inject = [ 'components', 'viewer', 'eventBus', 'injector' ];\r\n\r\n\r\n// helpers //////////////////////\r\n\r\nfunction getDefinitions(decision) {\r\n  const definitions = decision.$parent;\r\n\r\n  return definitions;\r\n}"],"mappings":"AAAA,OAAOA,gBAAgB,MAAM,+BAA+B;AAE5D,MAAMC,kBAAkB,GAAG,IAAI;AAG/B,eAAe,MAAMC,OAAO,CAAC;EAE3BC,WAAW,CAACC,UAAU,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IAClD,IAAI,CAACC,SAAS,GAAGD,QAAQ;IACzB,IAAI,CAACE,OAAO,GAAGJ,MAAM;IAErBD,UAAU,CAACM,cAAc,CAAC,QAAQ,EAAET,kBAAkB,EAAE,MAAM;MAC5D,IAAI,IAAI,CAACU,UAAU,EAAE,EAAE;QACrB,OAAOX,gBAAgB;MACzB;IACF,CAAC,CAAC;IAEFM,QAAQ,CAACM,EAAE,CAAC,SAAS,EAAE,MAAM;MAC3B,MAAMC,MAAM,GAAGN,QAAQ,CAACO,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;;MAE7C;MACA,MAAMC,WAAW,GAAG,IAAI,CAACC,cAAc,EAAE;;MAEzC;MACA,MAAMC,IAAI,GAAGJ,MAAM,CAACK,OAAO,CAACH,WAAW,CAAC;MAExCF,MAAM,CAACM,IAAI,CAACF,IAAI,CAAC;IACnB,CAAC,CAAC;EACJ;EAEAN,UAAU,GAAG;IACX,MAAME,MAAM,GAAG,IAAI,CAACL,SAAS,CAACM,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;IAEnD,IAAI,CAACD,MAAM,EAAE;MACX;IACF;;IAEA;IACA,MAAME,WAAW,GAAG,IAAI,CAACC,cAAc,EAAE;IAEzC,OAAO,CAAC,CAACH,MAAM,CAACK,OAAO,CAACH,WAAW,CAAC;EACtC;EAEAC,cAAc,GAAG;IACf,OAAOA,cAAc,CAAC,IAAI,CAACP,OAAO,CAACW,WAAW,EAAE,CAAC;EACnD;AAEF;AAEAlB,OAAO,CAACmB,OAAO,GAAG,CAAE,YAAY,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,CAAE;;AAGpE;;AAEA,SAASL,cAAc,CAACM,QAAQ,EAAE;EAChC,MAAMP,WAAW,GAAGO,QAAQ,CAACC,OAAO;EAEpC,OAAOR,WAAW;AACpB"}