{"version":3,"file":"EditorActions.js","names":["forEach","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","constructor","commandStack","eventBus","_actions","undo","redo","trigger","action","opts","error","register","actions","listener","_registerAction","isRegistered","unregister","undefined","$inject","message","Error"],"sources":["../../../src/features/editor-actions/EditorActions.js"],"sourcesContent":["import { forEach } from 'min-dash';\n\nconst NOT_REGISTERED_ERROR = 'is not a registered action',\n      IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´ and likewise\n * unregister existing ones with ´unregisterAction´.\n *\n */\nexport default class EditorActions {\n  constructor(commandStack, eventBus) {\n\n    this._actions = {\n      undo() {\n        commandStack.undo();\n      },\n      redo() {\n        commandStack.redo();\n      }\n    };\n  }\n\n  /**\n   * Triggers a registered action\n   *\n   * @param  {string} action\n   * @param  {Object} opts\n   *\n   * @return {Unknown} Returns what the registered listener returns\n   */\n  trigger(action, opts) {\n    if (!this._actions[action]) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    return this._actions[action](opts);\n  }\n\n  /**\n   * Registers a collections of actions.\n   * The key of the object will be the name of the action.\n   *\n   * @param  {Object} actions\n   */\n  register(actions, listener) {\n    if (typeof actions === 'string') {\n      return this._registerAction(actions, listener);\n    }\n\n    forEach(actions, (listener, action) => {\n      this._registerAction(action, listener);\n    }, this);\n  }\n\n  /**\n   * Registers a listener to an action key\n   *\n   * @param  {string} action\n   * @param  {Function} listener\n   */\n  _registerAction(action, listener) {\n    if (this.isRegistered(action)) {\n      throw error(action, IS_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = listener;\n  }\n\n  /**\n   * Unregister an existing action\n   *\n   * @param {string} action\n   */\n  unregister(action) {\n    if (!this.isRegistered(action)) {\n      throw error(action, NOT_REGISTERED_ERROR);\n    }\n\n    this._actions[action] = undefined;\n  }\n\n\n  /**\n   * Checks wether the given action is registered\n   *\n   * @param {string} action\n   *\n   * @return {boolean}\n   */\n  isRegistered(action) {\n    return !!this._actions[action];\n  }\n}\n\nEditorActions.$inject = [\n  'commandStack',\n  'eventBus'\n];\n\n// helpers /////////////\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}"],"mappings":"AAAA,SAASA,OAAO,QAAQ,UAAU;AAElC,MAAMC,oBAAoB,GAAG,4BAA4B;EACnDC,mBAAmB,GAAG,uBAAuB;;AAGnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAMC,aAAa,CAAC;EACjCC,WAAW,CAACC,YAAY,EAAEC,QAAQ,EAAE;IAElC,IAAI,CAACC,QAAQ,GAAG;MACdC,IAAI,GAAG;QACLH,YAAY,CAACG,IAAI,EAAE;MACrB,CAAC;MACDC,IAAI,GAAG;QACLJ,YAAY,CAACI,IAAI,EAAE;MACrB;IACF,CAAC;EACH;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,OAAO,CAACC,MAAM,EAAEC,IAAI,EAAE;IACpB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAACI,MAAM,CAAC,EAAE;MAC1B,MAAME,KAAK,CAACF,MAAM,EAAEV,oBAAoB,CAAC;IAC3C;IAEA,OAAO,IAAI,CAACM,QAAQ,CAACI,MAAM,CAAC,CAACC,IAAI,CAAC;EACpC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEE,QAAQ,CAACC,OAAO,EAAEC,QAAQ,EAAE;IAC1B,IAAI,OAAOD,OAAO,KAAK,QAAQ,EAAE;MAC/B,OAAO,IAAI,CAACE,eAAe,CAACF,OAAO,EAAEC,QAAQ,CAAC;IAChD;IAEAhB,OAAO,CAACe,OAAO,EAAE,CAACC,QAAQ,EAAEL,MAAM,KAAK;MACrC,IAAI,CAACM,eAAe,CAACN,MAAM,EAAEK,QAAQ,CAAC;IACxC,CAAC,EAAE,IAAI,CAAC;EACV;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEC,eAAe,CAACN,MAAM,EAAEK,QAAQ,EAAE;IAChC,IAAI,IAAI,CAACE,YAAY,CAACP,MAAM,CAAC,EAAE;MAC7B,MAAME,KAAK,CAACF,MAAM,EAAET,mBAAmB,CAAC;IAC1C;IAEA,IAAI,CAACK,QAAQ,CAACI,MAAM,CAAC,GAAGK,QAAQ;EAClC;;EAEA;AACF;AACA;AACA;AACA;EACEG,UAAU,CAACR,MAAM,EAAE;IACjB,IAAI,CAAC,IAAI,CAACO,YAAY,CAACP,MAAM,CAAC,EAAE;MAC9B,MAAME,KAAK,CAACF,MAAM,EAAEV,oBAAoB,CAAC;IAC3C;IAEA,IAAI,CAACM,QAAQ,CAACI,MAAM,CAAC,GAAGS,SAAS;EACnC;;EAGA;AACF;AACA;AACA;AACA;AACA;AACA;EACEF,YAAY,CAACP,MAAM,EAAE;IACnB,OAAO,CAAC,CAAC,IAAI,CAACJ,QAAQ,CAACI,MAAM,CAAC;EAChC;AACF;AAEAR,aAAa,CAACkB,OAAO,GAAG,CACtB,cAAc,EACd,UAAU,CACX;;AAED;;AAEA,SAASR,KAAK,CAACF,MAAM,EAAEW,OAAO,EAAE;EAC9B,OAAO,IAAIC,KAAK,CAACZ,MAAM,GAAG,GAAG,GAAGW,OAAO,CAAC;AAC1C"}