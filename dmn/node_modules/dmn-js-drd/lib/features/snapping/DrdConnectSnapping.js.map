{"version":3,"file":"DrdConnectSnapping.js","names":["asTRBL","getMid","getOrientation","LOW_PRIORITY","DrdConnectSnapping","eventBus","on","event","context","canExecute","hover","source","target","type","orientation","connectionStart","connectionEnd","x","y","includes","top","bottom","left","right","$inject"],"sources":["../../../src/features/snapping/DrdConnectSnapping.js"],"sourcesContent":["import {\r\n  asTRBL,\r\n  getMid,\r\n  getOrientation\r\n} from 'diagram-js/lib/layout/LayoutUtil';\r\n\r\nvar LOW_PRIORITY = 250;\r\n\r\n\r\nexport default function DrdConnectSnapping(eventBus) {\r\n  eventBus.on([\r\n    'connect.hover',\r\n    'connect.move',\r\n    'connect.end',\r\n  ], LOW_PRIORITY, function(event) {\r\n    var context = event.context,\r\n        canExecute = context.canExecute,\r\n        hover = context.hover,\r\n        source = context.source,\r\n        target = context.target;\r\n\r\n    if (canExecute && canExecute.type === 'dmn:InformationRequirement') {\r\n      var orientation = getOrientation(source, target);\r\n\r\n      // snap source\r\n      context.connectionStart = getMid(source);\r\n\r\n      // snap target\r\n      if (hover === source) {\r\n        context.connectionEnd = getMid(target);\r\n      } else {\r\n        context.connectionEnd = {\r\n          x: event.x,\r\n          y: event.y\r\n        };\r\n      }\r\n\r\n      if (orientation.includes('bottom')) {\r\n        context.connectionStart.y = asTRBL(source).top;\r\n        context.connectionEnd.y = asTRBL(target).bottom;\r\n      } else if (orientation.includes('top')) {\r\n        context.connectionStart.y = asTRBL(source).bottom;\r\n        context.connectionEnd.y = asTRBL(target).top;\r\n      } else if (orientation.includes('right')) {\r\n        context.connectionStart.x = asTRBL(source).left;\r\n        context.connectionEnd.x = asTRBL(target).right;\r\n      } else {\r\n        context.connectionStart.x = asTRBL(source).right;\r\n        context.connectionEnd.x = asTRBL(target).left;\r\n      }\r\n    } else {\r\n      delete context.connectionStart;\r\n      delete context.connectionEnd;\r\n    }\r\n  });\r\n}\r\n\r\nDrdConnectSnapping.$inject = [ 'eventBus' ];"],"mappings":"AAAA,SACEA,MAAM,EACNC,MAAM,EACNC,cAAc,QACT,kCAAkC;AAEzC,IAAIC,YAAY,GAAG,GAAG;AAGtB,eAAe,SAASC,kBAAkB,CAACC,QAAQ,EAAE;EACnDA,QAAQ,CAACC,EAAE,CAAC,CACV,eAAe,EACf,cAAc,EACd,aAAa,CACd,EAAEH,YAAY,EAAE,UAASI,KAAK,EAAE;IAC/B,IAAIC,OAAO,GAAGD,KAAK,CAACC,OAAO;MACvBC,UAAU,GAAGD,OAAO,CAACC,UAAU;MAC/BC,KAAK,GAAGF,OAAO,CAACE,KAAK;MACrBC,MAAM,GAAGH,OAAO,CAACG,MAAM;MACvBC,MAAM,GAAGJ,OAAO,CAACI,MAAM;IAE3B,IAAIH,UAAU,IAAIA,UAAU,CAACI,IAAI,KAAK,4BAA4B,EAAE;MAClE,IAAIC,WAAW,GAAGZ,cAAc,CAACS,MAAM,EAAEC,MAAM,CAAC;;MAEhD;MACAJ,OAAO,CAACO,eAAe,GAAGd,MAAM,CAACU,MAAM,CAAC;;MAExC;MACA,IAAID,KAAK,KAAKC,MAAM,EAAE;QACpBH,OAAO,CAACQ,aAAa,GAAGf,MAAM,CAACW,MAAM,CAAC;MACxC,CAAC,MAAM;QACLJ,OAAO,CAACQ,aAAa,GAAG;UACtBC,CAAC,EAAEV,KAAK,CAACU,CAAC;UACVC,CAAC,EAAEX,KAAK,CAACW;QACX,CAAC;MACH;MAEA,IAAIJ,WAAW,CAACK,QAAQ,CAAC,QAAQ,CAAC,EAAE;QAClCX,OAAO,CAACO,eAAe,CAACG,CAAC,GAAGlB,MAAM,CAACW,MAAM,CAAC,CAACS,GAAG;QAC9CZ,OAAO,CAACQ,aAAa,CAACE,CAAC,GAAGlB,MAAM,CAACY,MAAM,CAAC,CAACS,MAAM;MACjD,CAAC,MAAM,IAAIP,WAAW,CAACK,QAAQ,CAAC,KAAK,CAAC,EAAE;QACtCX,OAAO,CAACO,eAAe,CAACG,CAAC,GAAGlB,MAAM,CAACW,MAAM,CAAC,CAACU,MAAM;QACjDb,OAAO,CAACQ,aAAa,CAACE,CAAC,GAAGlB,MAAM,CAACY,MAAM,CAAC,CAACQ,GAAG;MAC9C,CAAC,MAAM,IAAIN,WAAW,CAACK,QAAQ,CAAC,OAAO,CAAC,EAAE;QACxCX,OAAO,CAACO,eAAe,CAACE,CAAC,GAAGjB,MAAM,CAACW,MAAM,CAAC,CAACW,IAAI;QAC/Cd,OAAO,CAACQ,aAAa,CAACC,CAAC,GAAGjB,MAAM,CAACY,MAAM,CAAC,CAACW,KAAK;MAChD,CAAC,MAAM;QACLf,OAAO,CAACO,eAAe,CAACE,CAAC,GAAGjB,MAAM,CAACW,MAAM,CAAC,CAACY,KAAK;QAChDf,OAAO,CAACQ,aAAa,CAACC,CAAC,GAAGjB,MAAM,CAACY,MAAM,CAAC,CAACU,IAAI;MAC/C;IACF,CAAC,MAAM;MACL,OAAOd,OAAO,CAACO,eAAe;MAC9B,OAAOP,OAAO,CAACQ,aAAa;IAC9B;EACF,CAAC,CAAC;AACJ;AAEAZ,kBAAkB,CAACoB,OAAO,GAAG,CAAE,UAAU,CAAE"}