{"version":3,"file":"Modeling.js","names":["inherits","BaseModeling","IdClaimHandler","UpdateLabelHandler","UpdatePropertiesHandler","Modeling","canvas","drdRules","injector","_canvas","_drdRules","invoke","$inject","prototype","claimId","id","moddleElement","_commandStack","execute","element","claiming","connect","source","target","attrs","hints","rootElement","getRootElement","canConnect","type","createConnection","getHandlers","handlers","call","unclaimId","updateProperties","properties","updateLabel","newLabel","newBounds"],"sources":["../../../src/features/modeling/Modeling.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport IdClaimHandler from './cmd/IdClaimHandler.js';\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler.js';\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler.js';\n\n\n/**\n * DMN modeling.\n *\n * @param {Canvas} canvas\n * @param {CommandStack} commandStack\n * @param {DrdRules} drdRules\n * @param {ElementFactory} elementFactory\n * @param {EventBus} eventBus\n */\nexport default function Modeling(\n    canvas,\n    drdRules,\n    injector\n) {\n  this._canvas = canvas;\n  this._drdRules = drdRules;\n\n  injector.invoke(BaseModeling, this);\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'canvas',\n  'drdRules',\n  'injector'\n];\n\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n  var drdRules = this._drdRules,\n      rootElement = this._canvas.getRootElement();\n\n  if (!attrs) {\n    attrs = drdRules.canConnect(source, target) || { type: 'dmn:Association' };\n  }\n\n  return this.createConnection(source, target, attrs, rootElement, hints);\n};\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n\n  return handlers;\n};\n\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.updateLabel = function(element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n"],"mappings":"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"}