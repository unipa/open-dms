{"version":3,"file":"ReplaceConnectionBehavior.js","names":["inherits","CommandInterceptor","ReplaceConnectionBehavior","injector","modeling","rules","invoke","preExecute","context","connection","source","newSource","target","newTarget","waypoints","slice","allowed","type","connect","removeConnection","$inject"],"sources":["../../../../src/features/modeling/behavior/ReplaceConnectionBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\n\r\nexport default function ReplaceConnectionBehavior(injector, modeling, rules) {\r\n  injector.invoke(CommandInterceptor, this);\r\n\r\n  this.preExecute('connection.reconnect', function(context) {\r\n    var connection = context.connection,\r\n        source = context.newSource || connection.source,\r\n        target = context.newTarget || connection.target,\r\n        waypoints = connection.waypoints.slice();\r\n\r\n    var allowed = rules.allowed('connection.reconnect', {\r\n      connection: connection,\r\n      source: source,\r\n      target: target\r\n    });\r\n\r\n    if (!allowed || allowed.type === connection.type) {\r\n      return;\r\n    }\r\n\r\n    context.connection = modeling.connect(source, target, {\r\n      type: allowed.type,\r\n      waypoints: waypoints\r\n    });\r\n\r\n    modeling.removeConnection(connection);\r\n  }, true);\r\n}\r\n\r\ninherits(ReplaceConnectionBehavior, CommandInterceptor);\r\n\r\nReplaceConnectionBehavior.$inject = [\r\n  'injector',\r\n  'modeling',\r\n  'rules'\r\n];"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AAEvC,OAAOC,kBAAkB,MAAM,2CAA2C;AAG1E,eAAe,SAASC,yBAAyB,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,EAAE;EAC3EF,QAAQ,CAACG,MAAM,CAACL,kBAAkB,EAAE,IAAI,CAAC;EAEzC,IAAI,CAACM,UAAU,CAAC,sBAAsB,EAAE,UAASC,OAAO,EAAE;IACxD,IAAIC,UAAU,GAAGD,OAAO,CAACC,UAAU;MAC/BC,MAAM,GAAGF,OAAO,CAACG,SAAS,IAAIF,UAAU,CAACC,MAAM;MAC/CE,MAAM,GAAGJ,OAAO,CAACK,SAAS,IAAIJ,UAAU,CAACG,MAAM;MAC/CE,SAAS,GAAGL,UAAU,CAACK,SAAS,CAACC,KAAK,EAAE;IAE5C,IAAIC,OAAO,GAAGX,KAAK,CAACW,OAAO,CAAC,sBAAsB,EAAE;MAClDP,UAAU,EAAEA,UAAU;MACtBC,MAAM,EAAEA,MAAM;MACdE,MAAM,EAAEA;IACV,CAAC,CAAC;IAEF,IAAI,CAACI,OAAO,IAAIA,OAAO,CAACC,IAAI,KAAKR,UAAU,CAACQ,IAAI,EAAE;MAChD;IACF;IAEAT,OAAO,CAACC,UAAU,GAAGL,QAAQ,CAACc,OAAO,CAACR,MAAM,EAAEE,MAAM,EAAE;MACpDK,IAAI,EAAED,OAAO,CAACC,IAAI;MAClBH,SAAS,EAAEA;IACb,CAAC,CAAC;IAEFV,QAAQ,CAACe,gBAAgB,CAACV,UAAU,CAAC;EACvC,CAAC,EAAE,IAAI,CAAC;AACV;AAEAT,QAAQ,CAACE,yBAAyB,EAAED,kBAAkB,CAAC;AAEvDC,yBAAyB,CAACkB,OAAO,GAAG,CAClC,UAAU,EACV,UAAU,EACV,OAAO,CACR"}