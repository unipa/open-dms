{"version":3,"file":"DrdFactory.js","names":["assign","pick","isAny","DrdFactory","moddle","_model","$inject","prototype","_needsId","element","_ensureId","prefix","$type","replace","id","ids","nextPrefixed","create","type","attrs","createDiShape","semantic","bounds","dmnElementRef","createDiBounds","createDiEdge","waypoints","waypoint","createDiWaypoints","self","map","createDiWaypoint","createExtensionElements","values"],"sources":["../../../src/features/modeling/DrdFactory.js"],"sourcesContent":["import {\n  assign,\n  pick\n} from 'min-dash';\n\nimport { isAny } from 'dmn-js-shared/lib/util/ModelUtil';\n\n\nexport default function DrdFactory(moddle) {\n  this._model = moddle;\n}\n\nDrdFactory.$inject = [ 'moddle' ];\n\n\nDrdFactory.prototype._needsId = function(element) {\n  return isAny(element, [\n    'dmn:Artifact',\n    'dmn:DMNElement',\n    'dmn:DRGElement',\n    'dmndi:DMNDiagram',\n    'dmndi:DMNDiagramElement'\n  ]);\n};\n\nDrdFactory.prototype._ensureId = function(element) {\n  var prefix = (element.$type || '').replace(/^[^:]*:/g, '') + '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\nDrdFactory.prototype.create = function(type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\nDrdFactory.prototype.createDiShape = function(semantic, bounds, attrs) {\n\n  return this.create('dmndi:DMNShape', assign({\n    dmnElementRef: semantic,\n    bounds: this.createDiBounds(bounds)\n  }, attrs));\n};\n\nDrdFactory.prototype.createDiBounds = function(bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\nDrdFactory.prototype.createDiEdge = function(semantic, waypoints, attrs) {\n  return this.create('dmndi:DMNEdge', {\n    dmnElementRef: semantic,\n    waypoint: this.createDiWaypoints(waypoints)\n  }, attrs);\n};\n\nDrdFactory.prototype.createDiWaypoints = function(waypoints) {\n  var self = this;\n\n  return waypoints.map(function(waypoint) {\n    return self.createDiWaypoint(waypoint);\n  });\n};\n\nDrdFactory.prototype.createDiWaypoint = function(waypoint) {\n  return this.create('dc:Point', pick(waypoint, [ 'x', 'y' ]));\n};\n\nDrdFactory.prototype.createExtensionElements = function() {\n  return this.create('dmn:ExtensionElements', { values: [] });\n};\n"],"mappings":"AAAA,SACEA,MAAM,EACNC,IAAI,QACC,UAAU;AAEjB,SAASC,KAAK,QAAQ,kCAAkC;AAGxD,eAAe,SAASC,UAAU,CAACC,MAAM,EAAE;EACzC,IAAI,CAACC,MAAM,GAAGD,MAAM;AACtB;AAEAD,UAAU,CAACG,OAAO,GAAG,CAAE,QAAQ,CAAE;AAGjCH,UAAU,CAACI,SAAS,CAACC,QAAQ,GAAG,UAASC,OAAO,EAAE;EAChD,OAAOP,KAAK,CAACO,OAAO,EAAE,CACpB,cAAc,EACd,gBAAgB,EAChB,gBAAgB,EAChB,kBAAkB,EAClB,yBAAyB,CAC1B,CAAC;AACJ,CAAC;AAEDN,UAAU,CAACI,SAAS,CAACG,SAAS,GAAG,UAASD,OAAO,EAAE;EACjD,IAAIE,MAAM,GAAG,CAACF,OAAO,CAACG,KAAK,IAAI,EAAE,EAAEC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,GAAG,GAAG;EAEhE,IAAI,CAACJ,OAAO,CAACK,EAAE,IAAI,IAAI,CAACN,QAAQ,CAACC,OAAO,CAAC,EAAE;IACzCA,OAAO,CAACK,EAAE,GAAG,IAAI,CAACT,MAAM,CAACU,GAAG,CAACC,YAAY,CAACL,MAAM,EAAEF,OAAO,CAAC;EAC5D;AACF,CAAC;AAEDN,UAAU,CAACI,SAAS,CAACU,MAAM,GAAG,UAASC,IAAI,EAAEC,KAAK,EAAE;EAClD,IAAIV,OAAO,GAAG,IAAI,CAACJ,MAAM,CAACY,MAAM,CAACC,IAAI,EAAEC,KAAK,IAAI,CAAC,CAAC,CAAC;EAEnD,IAAI,CAACT,SAAS,CAACD,OAAO,CAAC;EAEvB,OAAOA,OAAO;AAChB,CAAC;AAEDN,UAAU,CAACI,SAAS,CAACa,aAAa,GAAG,UAASC,QAAQ,EAAEC,MAAM,EAAEH,KAAK,EAAE;EAErE,OAAO,IAAI,CAACF,MAAM,CAAC,gBAAgB,EAAEjB,MAAM,CAAC;IAC1CuB,aAAa,EAAEF,QAAQ;IACvBC,MAAM,EAAE,IAAI,CAACE,cAAc,CAACF,MAAM;EACpC,CAAC,EAAEH,KAAK,CAAC,CAAC;AACZ,CAAC;AAEDhB,UAAU,CAACI,SAAS,CAACiB,cAAc,GAAG,UAASF,MAAM,EAAE;EACrD,OAAO,IAAI,CAACL,MAAM,CAAC,WAAW,EAAEK,MAAM,CAAC;AACzC,CAAC;AAEDnB,UAAU,CAACI,SAAS,CAACkB,YAAY,GAAG,UAASJ,QAAQ,EAAEK,SAAS,EAAEP,KAAK,EAAE;EACvE,OAAO,IAAI,CAACF,MAAM,CAAC,eAAe,EAAE;IAClCM,aAAa,EAAEF,QAAQ;IACvBM,QAAQ,EAAE,IAAI,CAACC,iBAAiB,CAACF,SAAS;EAC5C,CAAC,EAAEP,KAAK,CAAC;AACX,CAAC;AAEDhB,UAAU,CAACI,SAAS,CAACqB,iBAAiB,GAAG,UAASF,SAAS,EAAE;EAC3D,IAAIG,IAAI,GAAG,IAAI;EAEf,OAAOH,SAAS,CAACI,GAAG,CAAC,UAASH,QAAQ,EAAE;IACtC,OAAOE,IAAI,CAACE,gBAAgB,CAACJ,QAAQ,CAAC;EACxC,CAAC,CAAC;AACJ,CAAC;AAEDxB,UAAU,CAACI,SAAS,CAACwB,gBAAgB,GAAG,UAASJ,QAAQ,EAAE;EACzD,OAAO,IAAI,CAACV,MAAM,CAAC,UAAU,EAAEhB,IAAI,CAAC0B,QAAQ,EAAE,CAAE,GAAG,EAAE,GAAG,CAAE,CAAC,CAAC;AAC9D,CAAC;AAEDxB,UAAU,CAACI,SAAS,CAACyB,uBAAuB,GAAG,YAAW;EACxD,OAAO,IAAI,CAACf,MAAM,CAAC,uBAAuB,EAAE;IAAEgB,MAAM,EAAE;EAAG,CAAC,CAAC;AAC7D,CAAC"}