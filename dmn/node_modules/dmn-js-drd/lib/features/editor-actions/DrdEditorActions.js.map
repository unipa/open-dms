{"version":3,"file":"DrdEditorActions.js","names":["inherits","EditorActions","DrdEditorActions","injector","invoke","$inject","prototype","_registerDefaultActions","call","canvas","get","elementRegistry","selection","lassoTool","handTool","directEditing","distributeElements","alignElements","_registerAction","rootElement","getRootElement","elements","filter","element","select","opts","currentSelection","type","length","trigger","toggle","activate"],"sources":["../../../src/features/editor-actions/DrdEditorActions.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nexport default function DrdEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(DrdEditorActions, EditorActions);\n\nDrdEditorActions.$inject = [\n  'injector'\n];\n\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nDrdEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var directEditing = injector.get('directEditing', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length > 2) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length > 1) {\n        alignElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n};\n"],"mappings":"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"}