{"version":3,"file":"InputSelect.js","names":["Component","createPortal","inject","assign","domify","remove","domRemove","InputSelect","constructor","props","context","value","setState","onChange","event","preventDefault","stopPropagation","setOptionsVisible","state","optionsVisible","focusInput","target","evt","checkClose","code","which","select","keycode","_portalEl","componentDidMount","document","addEventListener","onGlobalClick","onFocusChanged","keyboard","addListener","onKeyboard","componentWillUnmount","removeEventListener","removeListener","removePortalEl","componentWillReceiveProps","componentWillUpdate","nextProps","nextState","addPortalEl","componentDidUpdate","inputNode","optionsBounds","getOptionsBounds","style","container","renderer","getContainer","getBoundingClientRect","containerTop","top","containerLeft","left","containerBottom","bottom","inputTop","inputLeft","width","height","inputBottom","scrollTop","scrollLeft","bounds","appendChild","node","focus","selectionStart","focusTarget","contains","parentNode","direction","options","option","filter","o","idx","indexOf","nextIdx","length","nextOption","renderOptions","activeOption","map","join","label","e","onOptionClick","render","className","noInput","title","onKeyDown","onInput","onInputClick","$inject"],"sources":["../../src/components/InputSelect.js"],"sourcesContent":["import { Component, createPortal } from 'inferno';\r\n\r\nimport {\r\n  inject\r\n} from 'table-js/lib/components';\r\n\r\nimport { assign } from 'min-dash';\r\n\r\nimport {\r\n  domify,\r\n  remove as domRemove\r\n} from 'min-dom';\r\n\r\n\r\nexport default class InputSelect extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    inject(this);\r\n\r\n    const { value } = props;\r\n\r\n    this.state = {\r\n      value,\r\n      optionsVisible: false\r\n    };\r\n\r\n    this._portalEl = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mousedown', this.onGlobalClick);\r\n    document.addEventListener('focusin', this.onFocusChanged);\r\n\r\n    this.keyboard.addListener(this.onKeyboard);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('focusin', this.onFocusChanged);\r\n    document.removeEventListener('mousedown', this.onGlobalClick);\r\n\r\n    this.keyboard.removeListener(this.onKeyboard);\r\n\r\n    this.removePortalEl();\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    const { value } = props;\r\n\r\n    this.setState({\r\n      value\r\n    });\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    const { optionsVisible } = nextState;\r\n\r\n    if (optionsVisible) {\r\n      if (!this._portalEl) {\r\n        this.addPortalEl();\r\n      }\r\n    } else {\r\n      if (this._portalEl) {\r\n        this.removePortalEl();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible || !this.inputNode) {\r\n      return;\r\n    }\r\n\r\n    const optionsBounds = this.getOptionsBounds();\r\n\r\n    assign(this._portalEl.style, optionsBounds);\r\n  }\r\n\r\n  getOptionsBounds() {\r\n    const container = this.renderer.getContainer();\r\n    const {\r\n      top: containerTop, left: containerLeft, bottom: containerBottom\r\n    } = container.getBoundingClientRect();\r\n\r\n    const {\r\n      top: inputTop, left: inputLeft, width, height, bottom: inputBottom\r\n    } = this.inputNode.getBoundingClientRect();\r\n\r\n    const top = inputTop + height - containerTop + container.scrollTop;\r\n    const left = inputLeft - containerLeft + container.scrollLeft;\r\n\r\n    const bounds = {\r\n      top: `${top}px`,\r\n      left: `${left}px`,\r\n      width: `${width}px`,\r\n      'max-height': `calc(100% - ${top}px)`\r\n    };\r\n\r\n    // open the options upwards when not even one option (=input height) fits\r\n    if (containerBottom - inputBottom < height) {\r\n      const bottom = containerBottom - inputTop;\r\n      bounds.bottom = `${bottom}px`;\r\n      bounds['max-height'] = `calc(100% - ${bottom})`;\r\n\r\n      delete bounds.top;\r\n    }\r\n\r\n    return bounds;\r\n  }\r\n\r\n  addPortalEl() {\r\n    this._portalEl = domify('<div class=\"dms-select-options\"></div>');\r\n\r\n    const container = this.renderer.getContainer();\r\n\r\n    container.appendChild(this._portalEl);\r\n\r\n    // suppress mousedown event propagation to handle click events inside the component\r\n    this._portalEl.addEventListener('mousedown', stopPropagation);\r\n  }\r\n\r\n  removePortalEl() {\r\n    if (this._portalEl) {\r\n      this._portalEl.removeEventListener('mousedown', stopPropagation);\r\n\r\n      domRemove(this._portalEl);\r\n\r\n      this._portalEl = null;\r\n    }\r\n  }\r\n\r\n  onChange = (value) => {\r\n    this.setState({\r\n      value\r\n    });\r\n\r\n    const { onChange } = this.props;\r\n\r\n    if (typeof onChange !== 'function') {\r\n      return;\r\n    }\r\n\r\n    onChange(value);\r\n  };\r\n\r\n  onInputClick = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(!this.state.optionsVisible);\r\n\r\n    this.focusInput();\r\n  };\r\n\r\n  onInput = (event) => {\r\n    const { value } = event.target;\r\n\r\n    this.onChange(value);\r\n  };\r\n\r\n  onOptionClick = (value, event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    this.setOptionsVisible(false);\r\n\r\n    this.onChange(value);\r\n\r\n    this.focusInput();\r\n  };\r\n\r\n  /**\r\n   * Focus input node\r\n   */\r\n  focusInput() {\r\n    const node = this.inputNode;\r\n\r\n    node.focus();\r\n\r\n    // move cursor to end of input\r\n    if ('selectionStart' in node) {\r\n      node.selectionStart = 100000;\r\n    }\r\n  }\r\n\r\n  checkClose(focusTarget) {\r\n\r\n    if (this._portalEl\r\n      && !this._portalEl.contains(focusTarget)\r\n      && !this.parentNode.contains(focusTarget)) {\r\n      this.setOptionsVisible(false);\r\n    }\r\n  }\r\n\r\n  onFocusChanged = (evt) => {\r\n    this.checkClose(evt.target);\r\n  };\r\n\r\n  onGlobalClick = (evt) => {\r\n    this.checkClose(evt.target);\r\n  };\r\n\r\n  select(direction) {\r\n\r\n    const {\r\n      options\r\n    } = this.props;\r\n\r\n    const {\r\n      value\r\n    } = this.state;\r\n\r\n    if (!options) {\r\n      return;\r\n    }\r\n\r\n    const option = options.filter(o => o.value === value)[0];\r\n\r\n    const idx = option\r\n      ? options.indexOf(option)\r\n      : -1;\r\n\r\n    const nextIdx = (\r\n      idx === -1\r\n        ? (\r\n          direction === 1\r\n            ? 0\r\n            : options.length - 1)\r\n        : ((idx + direction) % options.length)\r\n    );\r\n\r\n    const nextOption = options[nextIdx < 0 ? options.length + nextIdx : nextIdx];\r\n\r\n    this.onChange(nextOption.value);\r\n  }\r\n\r\n  setOptionsVisible(optionsVisible) {\r\n    this.setState({\r\n      optionsVisible\r\n    });\r\n  }\r\n\r\n  onKeyDown = (evt) => {\r\n\r\n    const {\r\n      optionsVisible\r\n    } = this.state;\r\n\r\n    var code = evt.which;\r\n\r\n    // DOWN or UP\r\n    if (code === 40 || code === 38) {\r\n\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n\r\n      if (!optionsVisible) {\r\n        this.setOptionsVisible(true);\r\n      } else {\r\n        this.select(code === 40 ? 1 : -1);\r\n      }\r\n    }\r\n\r\n    if (optionsVisible) {\r\n\r\n      // ENTER\r\n      // ESC\r\n      if (code === 13 || code === 27) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        this.setOptionsVisible(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  onKeyboard = (keycode) => {\r\n    const { optionsVisible } = this.state;\r\n\r\n    if (!optionsVisible) {\r\n      return;\r\n    }\r\n\r\n    // close on ESC\r\n    if (keycode === 27) {\r\n      this.setOptionsVisible(false);\r\n\r\n      return true;\r\n    }\r\n  };\r\n\r\n  renderOptions(options, activeOption) {\r\n    return (\r\n      <div className=\"options\">\r\n        {\r\n          options.map(option => {\r\n            return (\r\n              <div\r\n                className={\r\n                  [ 'option', activeOption === option ? 'active' : '' ].join(' ')\r\n                }\r\n                data-value={ option.value }\r\n                onClick={ e => this.onOptionClick(option.value, e) }>\r\n                { option.label }\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      options,\r\n      noInput,\r\n      title\r\n    } = this.props;\r\n\r\n    const {\r\n      optionsVisible,\r\n      value\r\n    } = this.state;\r\n\r\n    const option = options ? options.filter(o => o.value === value)[0] : false;\r\n\r\n    const label = option ? option.label : value;\r\n\r\n    return (\r\n      <div\r\n        title={ title }\r\n        ref={ node => this.parentNode = node }\r\n        className={ [ className || '', 'dms-input-select' ].join(' ') }\r\n        onClick={ this.onInputClick }>\r\n        {\r\n          noInput\r\n            ? (\r\n              <div\r\n                className=\"dms-input\"\r\n                tabindex=\"0\"\r\n                onKeyDown={ this.onKeyDown }\r\n                ref={ node => this.inputNode = node }\r\n              >{ label }</div>\r\n            ) : (\r\n              <input\r\n                className=\"dms-input\"\r\n                onInput={ this.onInput }\r\n                onKeyDown={ this.onKeyDown }\r\n                spellcheck=\"false\"\r\n                ref={ node => this.inputNode = node }\r\n                type=\"text\"\r\n                value={ value }\r\n              />\r\n            )\r\n        }\r\n        <span\r\n          className={ [\r\n            'dms-input-select-icon',\r\n            optionsVisible ? 'dmn-icon-up' : 'dmn-icon-down'\r\n          ].join(' ') }>\r\n        </span>\r\n        {\r\n          optionsVisible\r\n            && createPortal(this.renderOptions(options, option), this._portalEl)\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nInputSelect.$inject = [ 'keyboard', 'renderer' ];\r\n\r\n\r\n// helper ////\r\nfunction stopPropagation(event) {\r\n  event.stopPropagation();\r\n}\r\n"],"mappings":"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"}