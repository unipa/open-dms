{"version":3,"file":"List.js","names":["Component","groupBy","RADIO","REMOVE_BTN_CLS","List","constructor","props","context","item","e","stopPropagation","removeItem","toggleItem","onChange","newItems","state","items","filter","i","setState","type","map","isChecked","componentWillReceiveProps","render","className","labelComponent","classes","push","groupedItems","asPairs","toPairs","join","pair","groupTitle","groupItems","getToggleClickHandler","value","isRemovable","getRemoveClickHandler","object","entrys","key"],"sources":["../../src/components/List.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { groupBy } from 'min-dash';\n\nconst RADIO = 'radio';\n\nconst REMOVE_BTN_CLS =\n  'remove dmn-icon-clear';\n\n/**\n * Shows a list of grouped items that can be checked\n * (checkboxes or radio buttons), removed.\n *\n * Example list of items:\n *\n * [\n *   { value: 'foo', isChecked: true, isRemovable: false, group: 'foo' },\n *   { value: 'bar', isChecked: false, isRemovable: true, group: 'bar' },\n *   { value: 'baz', isCheckable: false, group: 'baz' }\n * ]\n */\nexport default class List extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    const { items } = props;\n\n    this.state = {\n      items\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    const { items } = props;\n\n    this.setState({\n      items\n    });\n  }\n\n  getRemoveClickHandler = (item) => {\n    return (e) => {\n      e.stopPropagation();\n\n      this.removeItem(item);\n    };\n  };\n\n  getToggleClickHandler = (item) => {\n    return (e) => {\n      e.stopPropagation();\n\n      this.toggleItem(item);\n    };\n  };\n\n  removeItem = (item) => {\n    const { onChange } = this.props;\n\n    // remove item\n    const newItems = this.state.items.filter(i => i !== item);\n\n    this.setState({\n      items: newItems\n    });\n\n    onChange && onChange(newItems);\n  };\n\n  toggleItem = (item) => {\n    const { onChange, type } = this.props;\n\n    // toggle item\n    const newItems = this.state.items.map(i => {\n      if (i === item) {\n        i.isChecked = !i.isChecked;\n      } else {\n\n        if (type === RADIO) {\n          i.isChecked = false;\n        }\n\n      }\n\n      return i;\n    });\n\n    this.setState({\n      items: newItems\n    });\n\n    onChange && onChange(newItems);\n  };\n\n  render() {\n    const { className, items, type, labelComponent } = this.props;\n\n    const classes = [\n      'dms-list-component'\n    ];\n\n    if (className) {\n      classes.push(className);\n    }\n\n    // group items by group title\n    const groupedItems = groupBy(items, 'group');\n\n    const asPairs = toPairs(groupedItems);\n\n    return (\n      <div className={ classes.join(' ') }>\n        {\n          asPairs.map(pair => {\n\n            const groupTitle = pair[0],\n                  groupItems = pair[1];\n\n            return (\n              <div className=\"group\">\n\n                { labelComponent && labelComponent(groupTitle) ||\n                  <h4 className=\"dms-heading\">{ groupTitle }</h4> }\n\n                <ul className=\"items no-wrap\">\n                  {\n                    groupItems.map(item => {\n\n                      return (\n                        <li className=\"item\">\n                          {\n                            type\n                              && <input\n                                type={ type }\n                                checked={ item.isChecked }\n                                className=\"item-toggle\"\n                                onClick={ this.getToggleClickHandler(item) } />\n                          }\n                          &nbsp;\n                          { item.value }\n                          {\n                            item.isRemovable\n                              && (<span\n                                title=\"Remove item\"\n                                onClick={ this.getRemoveClickHandler(item) }\n                                className={ REMOVE_BTN_CLS }>\n                              </span>)\n                          }\n                        </li>\n                      );\n\n                    })\n                  }\n                </ul>\n\n              </div>\n            );\n\n          })\n        }\n\n      </div>\n    );\n  }\n}\n\n\n// helpers ////////////\n\nfunction toPairs(object) {\n  const entrys = [];\n\n  for (let key in object) {\n    entrys.push([ key, object[key] ]);\n  }\n\n  return entrys;\n}"],"mappings":"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"}