{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/temporal.ts","../src/types.ts","../src/builtins.ts","../src/parser.ts","../src/interpreter.ts"],"sourcesContent":["import { normalizeContextKey } from 'lezer-feel';\n\nimport { getType } from './types';\n\n\nexport function parseParameterNames(fn) {\n\n  if (Array.isArray(fn.$args)) {\n    return fn.$args;\n  }\n\n  const code = fn.toString();\n\n  const match = /^(?:[^(]*\\s*)?\\(([^)]+)?\\)/.exec(code);\n\n  if (!match) {\n    throw new Error('failed to parse params: ' + code);\n  }\n\n  const [ _, params ] = match;\n\n  if (!params) {\n    return [];\n  }\n\n  return params.split(',').map(p => p.trim());\n}\n\nexport function notImplemented(thing) {\n  return new Error(`not implemented: ${thing}`);\n}\n\n/**\n * @param {string} name\n * @param {Record<string, any>} context\n *\n * @return {any}\n */\nexport function getFromContext(name, context) {\n\n  if ([ 'nil', 'boolean', 'number', 'string' ].includes(getType(context))) {\n    return null;\n  }\n\n  if (name in context) {\n    return context[name];\n  }\n\n  const normalizedName = normalizeContextKey(name);\n\n  if (normalizedName in context) {\n    return context[normalizedName];\n  }\n\n  const entry = Object.entries(context).find(\n    ([ key ]) => normalizedName === normalizeContextKey(key)\n  );\n\n  if (entry) {\n    return entry[1];\n  }\n\n  return null;\n}\n","import {\n  DateTime,\n  Duration,\n  Info,\n  Zone\n} from 'luxon';\n\nimport { notImplemented } from './utils';\n\n\nexport function ms(temporal) {\n\n  if (isDateTime(temporal)) {\n    return temporal.valueOf();\n  }\n\n  if (isDuration(temporal)) {\n    return temporal.valueOf();\n  }\n\n  return null;\n}\n\nexport function isDateTime(obj): obj is DateTime {\n  return DateTime.isDateTime(obj);\n}\n\nexport function isDuration(obj): obj is Duration {\n  return Duration.isDuration(obj);\n}\n\nexport function duration(opts: string|number) : Duration {\n\n  if (typeof opts === 'number') {\n    return Duration.fromMillis(opts);\n  }\n\n  return Duration.fromISO(opts);\n}\n\nexport function date(str: string = null, time: string = null, zone: Zone = null) : DateTime {\n\n  if (time) {\n    if (str) {\n      throw new Error('<str> and <time> provided');\n    }\n\n    return date(`1900-01-01T${ time }`);\n  }\n\n  if (typeof str === 'string') {\n\n    if (str.startsWith('-')) {\n      throw notImplemented('negative date');\n    }\n\n    if (!str.includes('T')) {\n\n      // raw dates are in UTC time zone\n      return date(str + 'T00:00:00.000Z');\n    }\n\n    if (str.includes('@')) {\n\n      if (zone) {\n        throw new Error('<zone> already provided');\n      }\n\n      const [ datePart, zonePart ] = str.split('@');\n\n      return date(datePart, null, Info.normalizeZone(zonePart));\n    }\n\n    return DateTime.fromISO(str.toUpperCase(), {\n      setZone: true,\n      zone\n    });\n  }\n\n  return DateTime.now();\n}","import { FixedOffsetZone } from 'luxon';\nimport { isDateTime, isDuration } from './temporal';\n\nexport {\n  isDateTime,\n  isDuration\n};\n\nexport function isContext(e) {\n  return Object.getPrototypeOf(e) === Object.prototype;\n}\n\nexport function isArray(e) {\n  return Array.isArray(e);\n}\n\nexport function isBoolean(e) {\n  return typeof e === 'boolean';\n}\n\nexport function getType(e) {\n\n  if (e === null || e === undefined) {\n    return 'nil';\n  }\n\n  if (isBoolean(e)) {\n    return 'boolean';\n  }\n\n  if (isNumber(e)) {\n    return 'number';\n  }\n\n  if (isString(e)) {\n    return 'string';\n  }\n\n  if (isContext(e)) {\n    return 'context';\n  }\n\n  if (isArray(e)) {\n    return 'list';\n  }\n\n  if (isDuration(e)) {\n    return 'duration';\n  }\n\n  if (isDateTime(e)) {\n    if (\n      e.year === 1900 &&\n      e.month === 1 &&\n      e.day === 1\n    ) {\n      return 'time';\n    }\n\n    if (\n      e.hour === 0 &&\n      e.minute === 0 &&\n      e.second === 0 &&\n      e.millisecond === 0 &&\n      e.zone === FixedOffsetZone.utcInstance\n    ) {\n      return 'date';\n    }\n\n    return 'date time';\n  }\n\n  if (e instanceof Range) {\n    return 'range';\n  }\n\n  if (e instanceof FunctionWrapper) {\n    return 'function';\n  }\n\n  return 'literal';\n}\n\nexport function isType(el: string, type: string): boolean {\n  return getType(el) === type;\n}\n\nexport function typeCast(obj: any, type: string) {\n\n  if (isDateTime(obj)) {\n\n    if (type === 'time') {\n      return obj.set({\n        year: 1900,\n        month: 1,\n        day: 1\n      });\n    }\n\n    if (type === 'date') {\n      return obj.setZone('utc', { keepLocalTime: true }).startOf('day');\n    }\n\n    if (type === 'date time') {\n      return obj;\n    }\n  }\n\n  return null;\n}\n\nexport type RangeProps = {\n  'start included': boolean,\n  'end included': boolean,\n  start: string|number|null,\n  end: string|number|null,\n  map: <T> (fn: (val: any) => T) => T[],\n  includes: (val: any) => boolean\n};\n\nexport class Range {\n\n  'start included': boolean;\n  'end included': boolean;\n  start: string|number|null;\n  end: string|number|null;\n  map: <T> (fn: (val: any) => T) => T[];\n  includes: (val: any) => boolean;\n\n  constructor(props: RangeProps) {\n    Object.assign(this, props);\n  }\n}\n\nexport function isNumber(obj) : obj is number {\n  return typeof obj === 'number';\n}\n\nexport function isString(obj) : obj is string {\n  return typeof obj === 'string';\n}\n\nexport function equals(a, b) {\n  if (\n    a === null && b !== null ||\n    a !== null && b === null\n  ) {\n    return false;\n  }\n\n  if (isArray(a) && a.length < 2) {\n    a = a[0];\n  }\n\n  if (isArray(b) && b.length < 2) {\n    b = b[0];\n  }\n\n  const aType = getType(a);\n  const bType = getType(b);\n\n  if (aType !== bType) {\n    return null;\n  }\n\n  if (aType === 'nil') {\n    return true;\n  }\n\n  if (aType === 'list') {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    return a.every(\n      (element, idx) => equals(element, b[idx])\n    );\n  }\n\n  if (aType === 'date time' || aType === 'time' || aType === 'date') {\n    return (\n      a.toUTC().valueOf() === b.toUTC().valueOf()\n    );\n  }\n\n  if (aType === 'duration') {\n\n    // years and months duration -> months\n    if (Math.abs(a.as('days')) > 180) {\n      return Math.trunc(a.minus(b).as('months')) === 0;\n    }\n\n    // days and time duration -> seconds\n    else {\n      return Math.trunc(a.minus(b).as('seconds')) === 0;\n    }\n\n  }\n\n  if (aType === 'context') {\n\n    const aEntries = Object.entries(a);\n    const bEntries = Object.entries(b);\n\n    if (aEntries.length !== bEntries.length) {\n      return false;\n    }\n\n    return aEntries.every(\n      ([ key, value ]) => key in b && equals(value, b[key])\n    );\n  }\n\n  if (aType === 'range') {\n    return [\n      [ a.start, b.start ],\n      [ a.end, b.end ],\n      [ a['start included'], b['start included'] ],\n      [ a['end included'], b['end included'] ]\n    ].every(([ a, b ]) => a === b);\n  }\n\n  if (a == b) {\n    return true;\n  }\n\n  return aType === bType ? false : null;\n}\n\nexport class FunctionWrapper {\n\n  fn: (...args) => any;\n  parameterNames: string[];\n\n  constructor(fn: (...args) => any, parameterNames: string[]) {\n\n    this.fn = fn;\n    this.parameterNames = parameterNames;\n  }\n\n  invoke(contextOrArgs) {\n\n    let params;\n\n    if (isArray(contextOrArgs)) {\n      params = contextOrArgs;\n    } else {\n      params = this.parameterNames.map(n => contextOrArgs[n]);\n    }\n\n    return this.fn.call(null, ...params);\n  }\n}","import {\n  isType,\n  equals,\n  Range,\n  isString,\n  isNumber,\n  getType,\n  typeCast\n} from './types';\n\nimport {\n  getFromContext,\n  notImplemented,\n  parseParameterNames\n} from './utils';\n\nimport {\n  duration,\n  date,\n  isDateTime\n} from './temporal';\n\nimport { DateTime, Duration } from 'luxon';\n\n\nconst names = [\n\n  // 10.3.4.1 Conversion functions\n  'date and time',\n  'time',\n  'date',\n  'number',\n  'string',\n  'duration',\n  'years and months duration',\n\n  // 10.3.4.2 Boolean function\n  'not',\n\n  // 10.3.4.3 String functions\n  'substring',\n  'string length',\n  'upper case',\n  'lower case',\n  'substring before',\n  'substring after',\n  'replace',\n  'contains',\n  'starts with',\n  'ends with',\n  'split',\n\n  // 10.3.4.4 List functions\n  'list contains',\n  'count',\n  'min',\n  'max',\n  'sum',\n  'mean',\n  'all',\n  'any',\n  'sublist',\n  'append',\n  'concatenate',\n  'insert before',\n  'remove',\n  'reverse',\n  'index of',\n  'union',\n  'distinct values',\n  'flatten',\n  'product',\n  'median',\n  'stddev',\n  'mode',\n\n  // 10.3.4.5 Numeric functions\n  'decimal',\n  'floor',\n  'ceiling',\n  'abs',\n  'modulo',\n  'sqrt',\n  'log',\n  'exp',\n  'odd',\n  'even',\n\n  // 10.3.4.6 Date and time functions\n  'is',\n\n  // 10.3.4.7 Range Functions\n  'before',\n  'after',\n  'meets',\n  'met by',\n  'overlaps',\n  'overlaps before',\n  'overlaps after',\n  'finishes',\n  'finished by',\n  'includes',\n  'during',\n  'starts',\n  'started by',\n  'coincides',\n\n  // 10.3.4.8 Temporal built-in functions\n  'day of year',\n  'day of week',\n  'month of year',\n  'week of year',\n\n  // 10.3.4.9 Sort\n  'sort',\n  'list',\n  'precedes',\n\n  // 10.3.4.10 Context function\n  'get value',\n  'get entries',\n  'context',\n  'context merge',\n  'context put'\n];\n\n\n// 10.3.4 Built-in functions\n\nconst builtins = {\n\n  // 10.3.4.1 Conversion functions\n\n  'number': function() {\n    throw notImplemented('number');\n  },\n\n  'string': fn(function(from) {\n    if (arguments.length !== 1) {\n      return null;\n    }\n\n    return toString(from);\n  }, [ 'any' ]),\n\n  // date(from) => date string\n  // date(from) => date and time\n  // date(year, month, day)\n  'date': fn(function(year, month, day, from) {\n\n    if (!from && !isNumber(year)) {\n      from = year;\n      year = null;\n    }\n\n    let d;\n\n    if (isString(from)) {\n      d = date(from);\n    }\n\n    if (isDateTime(from)) {\n      d = from;\n    }\n\n    if (year) {\n      d = date().setZone('utc').set({\n        year,\n        month,\n        day\n      });\n    }\n\n    return d && ifValid(d.setZone('utc').startOf('day')) || null;\n  }, [ 'any?', 'number?', 'number?', 'any?' ]),\n\n  // date and time(from) => date time string\n  // date and time(date, time)\n  'date and time': fn(function(d, time, from) {\n\n    let dt;\n\n    if (isDateTime(d) && isDateTime(time)) {\n\n      dt = time.set({\n        year: d.year,\n        month: d.month,\n        day: d.day\n      });\n    }\n\n    if (isString(d)) {\n      from = d;\n      d = null;\n    }\n\n    if (isString(from)) {\n      dt = date(from);\n    }\n\n    return dt && ifValid(dt) || null;\n  }, [ 'any?', 'time?', 'string?' ], [ 'date', 'time', 'from' ]),\n\n  // time(from) => time string\n  // time(from) => time, date and time\n  // time(hour, minute, second, offset?) => ...\n  'time': fn(function(hour, minute, second, offset, from) {\n\n    let t;\n\n    if (offset) {\n      throw notImplemented('time(..., offset)');\n    }\n\n    if (isString(hour) || isDateTime(hour)) {\n      from = hour;\n      hour = null;\n    }\n\n    if (isString(from)) {\n\n      t = date(null, from);\n    }\n\n    if (isDateTime(from)) {\n      t = from.set({\n        year: 1900,\n        month: 1,\n        day: 1\n      });\n    }\n\n    if (isNumber(hour)) {\n\n      // TODO: support offset = days and time duration\n      t = date().set({\n        hour,\n        minute,\n        second\n      }).set({\n        year: 1900,\n        month: 1,\n        day: 1,\n        millisecond: 0\n      });\n    }\n\n    return t && ifValid(t) || null;\n  }, [ 'any?', 'number?', 'number?', 'any?', 'any?' ]),\n\n  'duration': fn(function(from) {\n    return ifValid(duration(from));\n  }, [ 'string' ]),\n\n  'years and months duration': fn(function(from, to) {\n    return ifValid(to.diff(from, [ 'years', 'months' ]));\n  }, [ 'date', 'date' ]),\n\n  '@': fn(function(string) {\n\n    let t;\n\n    if (/^-?P/.test(string)) {\n      t = duration(string);\n    }\n\n    else if (/^[\\d]{1,2}:[\\d]{1,2}:[\\d]{1,2}/.test(string)) {\n      t = date(null, string);\n    }\n\n    else {\n      t = date(string);\n    }\n\n    return t && ifValid(t) || null;\n  }, [ 'string' ]),\n\n  'now': fn(function() {\n    return date();\n  }, []),\n\n  'today': fn(function() {\n    return date().startOf('day');\n  }, []),\n\n  // 10.3.4.2 Boolean function\n  'not': fn(function(bool) {\n    return isType(bool, 'boolean') ? !bool : null;\n  }, [ 'any' ]),\n\n  // 10.3.4.3 String functions\n  'substring': fn(function(string, start, length) {\n\n    const _start = (start < 0 ? string.length + start : start - 1);\n\n    const arr = Array.from(string);\n\n    return (\n      typeof length !== 'undefined'\n        ? arr.slice(_start, _start + length)\n        : arr.slice(_start)\n    ).join('');\n  }, [ 'string', 'number', 'number?' ], [ 'string', 'start position', 'length' ]),\n\n  'string length': fn(function(string) {\n    return countSymbols(string);\n  }, [ 'string' ]),\n\n  'upper case': fn(function(string) {\n    return string.toUpperCase();\n  }, [ 'string' ]),\n\n  'lower case': fn(function(string) {\n    return string.toLowerCase();\n  }, [ 'string' ]),\n\n  'substring before': fn(function(string, match) {\n\n    const index = string.indexOf(match);\n\n    if (index === -1) {\n      return '';\n    }\n\n    return string.substring(0, index);\n  }, [ 'string', 'string' ]),\n\n  'substring after': fn(function(string, match) {\n\n    const index = string.indexOf(match);\n\n    if (index === -1) {\n      return '';\n    }\n\n    return string.substring(index + match.length);\n  }, [ 'string', 'string' ]),\n\n  'replace': fn(function(input, pattern, replacement, flags) {\n    return input.replace(new RegExp(pattern, 'ug' + (flags || '').replace(/[x]/g, '')), replacement.replace(/\\$0/g, '$$&'));\n  }, [ 'string', 'string', 'string', 'string?' ]),\n\n  'contains': fn(function(string, match) {\n    return string.includes(match);\n  }, [ 'string', 'string' ]),\n\n  'starts with': fn(function(string, match) {\n    return string.startsWith(match);\n  }, [ 'string', 'string' ]),\n\n  'ends with': fn(function(string, match) {\n    return string.endsWith(match);\n  }, [ 'string', 'string' ]),\n\n  'split': fn(function(string, delimiter) {\n    return string.split(new RegExp(delimiter, 'u'));\n  }, [ 'string', 'string' ]),\n\n\n  // 10.3.4.4 List functions\n\n  'list contains': fn(function(list, element) {\n    return list.some(el => matches(el, element));\n  }, [ 'list', 'any?' ]),\n\n  'count': fn(function(list) {\n    return list.length;\n  }, [ 'list' ]),\n\n  'min': listFn(function(list) {\n    return list.reduce((min, el) => min === null ? el : Math.min(min, el), null);\n  }, 'number'),\n\n  'max': listFn(function(list) {\n    return list.reduce((max, el) => max === null ? el : Math.max(max, el), null);\n  }, 'number'),\n\n  'sum': listFn(function(list) {\n    return sum(list);\n  }, 'number'),\n\n  'mean': listFn(function(list) {\n    const s = sum(list);\n\n    return s === null ? s : s / list.length;\n  }, 'number'),\n\n  'all': listFn(function(list) {\n\n    let nonBool = false;\n\n    for (const o of list) {\n\n      if (o === false) {\n        return false;\n      }\n\n      if (typeof o !== 'boolean') {\n        nonBool = true;\n      }\n    }\n\n    return nonBool ? null : true;\n\n  }, 'any?'),\n\n  'any': listFn(function(list) {\n\n    let nonBool = false;\n\n    for (const o of list) {\n\n      if (o === true) {\n        return true;\n      }\n\n      if (typeof o !== 'boolean') {\n        nonBool = true;\n      }\n    }\n\n    return nonBool ? null : false;\n  }, 'any?'),\n\n  'sublist': fn(function(list, start, length) {\n\n    const _start = (start < 0 ? list.length + start : start - 1);\n\n    return (\n      typeof length !== 'undefined'\n        ? list.slice(_start, _start + length)\n        : list.slice(_start)\n    );\n\n  }, [ 'list', 'number', 'number?' ]),\n\n  'append': fn(function(list, ...items) {\n    return list.concat(items);\n  }, [ 'list', 'any?' ]),\n\n  'concatenate': fn(function(...args) {\n\n    return args.reduce((result, arg) => {\n      return result.concat(arg);\n    }, []);\n\n  }, [ 'any' ]),\n\n  'insert before': fn(function(list, position, newItem) {\n    return list.slice(0, position - 1).concat([ newItem ], list.slice(position - 1));\n  }, [ 'list', 'number', 'any?' ]),\n\n  'remove': fn(function(list, position) {\n    return list.slice(0, position - 1).concat(list.slice(position));\n  }, [ 'list', 'number' ]),\n\n  'reverse': fn(function(list) {\n    return list.slice().reverse();\n  }, [ 'list' ]),\n\n  'index of': fn(function(list, match) {\n\n    return list.reduce(function(result, element, index) {\n\n      if (matches(element, match)) {\n        result.push(index + 1);\n      }\n\n      return result;\n    }, []);\n  }, [ 'list', 'any' ]),\n\n  'union': fn(function(..._lists) {\n    throw notImplemented('union');\n  }, [ 'list' ]),\n\n  'distinct values': fn(function(_list) {\n    throw notImplemented('distinct values');\n  }, [ 'list' ]),\n\n  'flatten': fn(function(list) {\n    return flatten(list);\n  }, [ 'list' ]),\n\n  'product': listFn(function(list) {\n\n    if (list.length === 0) {\n      return null;\n    }\n\n    return list.reduce((result, n) => {\n      return result * n;\n    }, 1);\n  }, 'number'),\n\n  'median': listFn(function(list) {\n\n    if (list.length === 0) {\n      return null;\n    }\n\n    return median(list);\n  }, 'number'),\n\n  'stddev': listFn(function(list) {\n\n    if (list.length < 2) {\n      return null;\n    }\n\n    return stddev(list);\n  }, 'number'),\n\n  'mode': listFn(function(list) {\n    return mode(list);\n  }, 'number'),\n\n\n  // 10.3.4.5 Numeric functions\n  'decimal': fn(function(n, scale) {\n\n    if (!scale) {\n      return round(n);\n    }\n\n    const offset = 10 ** scale;\n\n    return round(n * offset) / (offset);\n  }, [ 'number', 'number' ]),\n\n  'floor': fn(function(n) {\n    return Math.floor(n);\n  }, [ 'number' ]),\n\n  'ceiling': fn(function(n) {\n    return Math.ceil(n) + 0;\n  }, [ 'number' ]),\n\n  'abs': fn(function(n) {\n\n    if (typeof n !== 'number') {\n      return null;\n    }\n\n    return Math.abs(n);\n  }, [ 'number' ]),\n\n  'modulo': fn(function(dividend, divisor) {\n\n    if (!divisor) {\n      return null;\n    }\n\n    const adjust = 1000000000;\n\n    // cf. https://dustinpfister.github.io/2017/09/02/js-whats-wrong-with-modulo/\n    //\n    // need to round here as using this custom modulo\n    // variant is prone to rounding errors\n    return Math.round((dividend % divisor + divisor) % divisor * adjust) / adjust;\n  }, [ 'number', 'number' ]),\n\n  'sqrt': fn(function(number) {\n\n    if (number < 0) {\n      return null;\n    }\n\n    return Math.sqrt(number);\n  }, [ 'number' ]),\n\n  'log': fn(function(number) {\n    if (number <= 0) {\n      return null;\n    }\n\n    return Math.log(number);\n  }, [ 'number' ]),\n\n  'exp': fn(function(number) {\n    return Math.exp(number);\n  }, [ 'number' ]),\n\n  'odd': fn(function(number) {\n    return Math.abs(number) % 2 === 1;\n  }, [ 'number' ]),\n\n  'even': fn(function(number) {\n    return Math.abs(number) % 2 === 0;\n  }, [ 'number' ]),\n\n\n  // 10.3.4.6 Date and time functions\n\n  'is': fn(function(value1, value2) {\n\n    if (typeof value1 === 'undefined' || typeof value2 === 'undefined') {\n      return false;\n    }\n\n    return equals(value1, value2);\n  }, [ 'any?', 'any?' ]),\n\n  // 10.3.4.7 Range Functions\n\n  'before': fn(function(a, b) {\n    return before(a, b);\n  }, [ 'any', 'any' ]),\n\n  'after': fn(function(a, b) {\n    return before(b, a);\n  }, [ 'any', 'any' ]),\n\n  'meets': fn(function(a, b) {\n    return meets(a, b);\n  }, [ 'range', 'range' ]),\n\n  'met by': fn(function(a, b) {\n    return meets(b, a);\n  }, [ 'range', 'range' ]),\n\n  'overlaps': fn(function() {\n    throw notImplemented('overlaps');\n  }, [ 'any?' ]),\n\n  'overlaps before': fn(function() {\n    throw notImplemented('overlaps before');\n  }, [ 'any?' ]),\n\n  'overlaps after': fn(function() {\n    throw notImplemented('overlaps after');\n  }, [ 'any?' ]),\n\n  'finishes': fn(function() {\n    throw notImplemented('finishes');\n  }, [ 'any?' ]),\n\n  'finished by': fn(function() {\n    throw notImplemented('finished by');\n  }, [ 'any?' ]),\n\n  'includes': fn(function() {\n    throw notImplemented('includes');\n  }, [ 'any?' ]),\n\n  'during': fn(function() {\n    throw notImplemented('during');\n  }, [ 'any?' ]),\n\n  'starts': fn(function() {\n    throw notImplemented('starts');\n  }, [ 'any?' ]),\n\n  'started by': fn(function() {\n    throw notImplemented('started by');\n  }, [ 'any?' ]),\n\n  'coincides': fn(function() {\n    throw notImplemented('coincides');\n  }, [ 'any?' ]),\n\n\n  // 10.3.4.8 Temporal built-in functions\n\n  'day of year': fn(function() {\n    throw notImplemented('day of year');\n  }, [ 'any?' ]),\n\n  'day of week': fn(function() {\n    throw notImplemented('day of week');\n  }, [ 'any?' ]),\n\n  'month of year': fn(function() {\n    throw notImplemented('month of year');\n  }, [ 'any?' ]),\n\n  'week of year': fn(function() {\n    throw notImplemented('week of year');\n  }, [ 'any?' ]),\n\n\n  // 10.3.4.9 Sort\n\n  'sort': function() {\n    throw notImplemented('sort');\n  },\n\n\n  // 10.3.4.10 Context function\n\n  'get value': fn(function(m, key) {\n    return getFromContext(key, m);\n  }, [ 'context', 'string' ]),\n\n  'get entries': fn(function(m) {\n\n    if (arguments.length !== 1) {\n      return null;\n    }\n\n    if (Array.isArray(m)) {\n      return null;\n    }\n\n    return Object.entries(m).map(([ key, value ]) => ({ key, value }));\n  }, [ 'context' ]),\n\n  'context': listFn(function(_contexts) {\n    throw notImplemented('context');\n  }, 'context'),\n\n  'context merge': listFn(function(_contexts) {\n    throw notImplemented('context merge');\n  }, 'context'),\n\n  'context put': fn(function(_context, _keys, _value) {\n    throw notImplemented('context put');\n  }, [ 'context', 'list', 'any' ])\n\n};\n\nexport {\n  names,\n  builtins\n};\n\nfunction matches(a, b) {\n  return a === b;\n}\n\nconst FALSE = {};\n\nfunction createArgTester(arg) {\n  const optional = arg.endsWith('?');\n\n  const type = optional ? arg.substring(0, arg.length - 1) : arg;\n\n  return function(obj) {\n\n    const arr = Array.isArray(obj);\n\n    if (type === 'list') {\n      if (arr || optional && typeof obj === 'undefined') {\n        return obj;\n      } else {\n\n        // implicit conversion obj => [ obj ]\n        return [ obj ];\n      }\n    }\n\n    if (type !== 'any' && arr && obj.length === 1) {\n\n      // implicit conversion [ obj ] => obj\n      obj = obj[0];\n    }\n\n    if (type === 'range') {\n      return obj instanceof Range ? obj : FALSE;\n    }\n\n    const objType = getType(obj);\n\n    if (objType === 'nil') {\n      return (optional ? obj : FALSE);\n    }\n\n    if (type === 'any' || type === objType) {\n      return obj;\n    }\n\n    return typeCast(obj, type) || FALSE;\n  };\n}\n\nfunction createArgsValidator(argDefinitions) {\n\n  const tests = argDefinitions.map(createArgTester);\n\n  return function(args) {\n\n    while (args.length < argDefinitions.length) {\n      args.push(undefined);\n    }\n\n    return args.reduce((result, arg, index) => {\n\n      if (result === false) {\n        return result;\n      }\n\n      const test = tests[index];\n\n      const conversion = test ? test(arg) : arg;\n\n      if (conversion === FALSE) {\n        return false;\n      }\n\n      result.push(conversion);\n\n      return result;\n    }, []);\n\n  };\n}\n\n/**\n * @param {Function} fnDefinition\n * @param {string} type\n * @param {string[]} [parameterNames]\n *\n * @return {Function}\n */\nfunction listFn(fnDefinition, type, parameterNames = null) {\n\n  const tester = createArgTester(type);\n\n  const wrappedFn = function(...args) {\n\n    if (args.length === 0) {\n      return null;\n    }\n\n    // unwrap first arg\n    if (Array.isArray(args[0]) && args.length === 1) {\n      args = args[0];\n    }\n\n    if (!args.every(arg => tester(arg) !== FALSE)) {\n      return null;\n    }\n\n    return fnDefinition(args);\n  };\n\n  wrappedFn.$args = parameterNames || parseParameterNames(fnDefinition);\n\n  return wrappedFn;\n}\n\n/**\n * @param {Function} fnDefinition\n * @param {string[]} argDefinitions\n * @param {string[]} [parameterNames]\n *\n * @return {Function}\n */\nfunction fn(fnDefinition, argDefinitions, parameterNames = null) {\n\n  const checkArgs = createArgsValidator(argDefinitions);\n\n  parameterNames = parameterNames || parseParameterNames(fnDefinition);\n\n  const wrappedFn = function(...args) {\n\n    const convertedArgs = checkArgs(args);\n\n    if (!convertedArgs) {\n      return null;\n    }\n\n    return fnDefinition(...convertedArgs);\n  };\n\n  wrappedFn.$args = parameterNames;\n\n  return wrappedFn;\n}\n\nfunction meets(a, b) {\n  return [\n    (a.end === b.start),\n    (a['end included'] === true),\n    (b['start included'] === true)\n  ].every(v => v);\n}\n\nfunction before(a, b) {\n  if (a instanceof Range && b instanceof Range) {\n    return (\n      a.end < b.start || (\n        !a['end included'] || !b['start included']\n      ) && a.end == b.start\n    );\n  }\n\n  if (a instanceof Range) {\n    return (\n      a.end < b || (\n        !a['end included'] && a.end === b\n      )\n    );\n  }\n\n\n  if (b instanceof Range) {\n    return (\n      b.start > a || (\n        !b['start included'] && b.start === a\n      )\n    );\n  }\n\n  return a < b;\n}\n\nfunction sum(list) {\n  return list.reduce((sum, el) => sum === null ? el : sum + el, null);\n}\n\nfunction flatten<T>([ x,...xs ]: (T|T[])[]):T[] {\n  return (\n    x !== undefined\n      ? [ ...Array.isArray(x) ? flatten(x) : [ x ],...flatten(xs) ]\n      : []\n  );\n}\n\nfunction toKeyString(key) {\n  if (typeof key === 'string' && /\\W/.test(key)) {\n    return toString(key, true);\n  }\n\n  return key;\n}\n\nfunction toDeepString(obj) {\n  return toString(obj, true);\n}\n\nfunction escapeStr(str) {\n  return str.replace(/(\"|\\\\)/g, '\\\\$1');\n}\n\nfunction toString(obj, wrap = false) {\n\n  const type = getType(obj);\n\n  if (type === 'nil') {\n    return 'null';\n  }\n\n  if (type === 'string') {\n    return wrap ? `\"${ escapeStr(obj) }\"` : obj;\n  }\n\n  if (type === 'boolean' || type === 'number') {\n    return String(obj);\n  }\n\n  if (type === 'list') {\n    return '[' + obj.map(toDeepString).join(', ') + ']';\n  }\n\n  if (type === 'context') {\n    return '{' + Object.entries(obj).map(([ key, value ]) => {\n      return toKeyString(key) + ': ' + toDeepString(value);\n    }).join(', ') + '}';\n  }\n\n  if (type === 'duration') {\n    return obj.shiftTo('years', 'months', 'days', 'hours', 'minutes', 'seconds').normalize().toISO();\n  }\n\n  if (type === 'date time') {\n    if (obj.zone?.zoneName) {\n      return obj.toISO({ suppressMilliseconds: true, includeOffset: false }) + '@' + obj.zone?.zoneName;\n    }\n\n    return obj.toISO({ suppressMilliseconds: true });\n  }\n\n  if (type === 'date') {\n    return obj.toISODate();\n  }\n\n  if (type === 'range') {\n    return '<range>';\n  }\n\n  if (type === 'time') {\n\n    if (obj.zone?.zoneName) {\n      return obj.toISOTime({ suppressMilliseconds: true, includeOffset: false }) + '@' + obj.zone?.zoneName;\n    }\n\n    return obj.toISOTime({ suppressMilliseconds: true });\n  }\n\n  if (type === 'function') {\n    return '<function>';\n  }\n\n  throw notImplemented('string(' + type + ')');\n}\n\nfunction countSymbols(str) {\n\n  // cf. https://mathiasbynens.be/notes/javascript-unicode\n  return str.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n}\n\nfunction round(n) {\n\n  const integral = Math.trunc(n);\n\n  if (n - integral > .5) {\n    return integral + 1;\n  } else {\n    return integral;\n  }\n}\n\n// adapted from https://stackoverflow.com/a/53577159\n\nfunction stddev(array) {\n  const n = array.length;\n  const mean = array.reduce((a, b) => a + b) / n;\n\n  return Math.sqrt(\n    array.map(\n      x => Math.pow(x - mean, 2)\n    ).reduce(\n      (a, b) => a + b\n    ) / (n - 1)\n  );\n}\n\nfunction median(array) {\n  const n = array.length;\n  const sorted = array.slice().sort();\n\n  const mid = n / 2 - 1;\n  const index = Math.ceil(mid);\n\n  // even\n  if (mid === index) {\n    return (sorted[index] + sorted[index + 1]) / 2;\n  }\n\n  // uneven\n  return sorted[index];\n}\n\nfunction mode(array: number[]) {\n\n  if (array.length < 2) {\n    return array;\n  }\n\n  const buckets: Record<number, number> = {};\n\n  for (const n of array) {\n    buckets[n] = (buckets[n] || 0) + 1;\n  }\n\n  const sorted = Object.entries(buckets).sort((a, b) => b[1] - a[1]);\n\n  return sorted.filter(s => s[1] === sorted[0][1]).map(e => +e[0]);\n}\n\nfunction ifValid<T extends DateTime | Duration>(o: T) : T | null {\n  return o.isValid ? o : null;\n}","import {\n  parser,\n  trackVariables\n} from 'lezer-feel';\n\nimport { Tree } from '@lezer/common';\n\n\nexport type ParseContext = Record<string, any>;\n\nexport function parseExpressions(expression: string, context: ParseContext = {}): Tree {\n  return parser.configure({\n    top: 'Expressions',\n    contextTracker: trackVariables(context)\n  }).parse(expression);\n}\n\nexport function parseUnaryTests(expression: string, context: ParseContext = {}): Tree {\n  return parser.configure({\n    top: 'UnaryTests',\n    contextTracker: trackVariables(context)\n  }).parse(expression);\n}","import { Tree, SyntaxNodeRef } from '@lezer/common';\n\nimport { builtins } from './builtins';\n\nimport {\n  Range,\n  FunctionWrapper,\n  equals,\n  isArray,\n  getType\n} from './types';\n\nimport {\n  notImplemented,\n  parseParameterNames,\n  getFromContext\n} from './utils';\n\nimport {\n  parseExpressions,\n  parseUnaryTests\n} from './parser';\n\n\nexport type InterpreterContext = Record<string, any>;\n\nclass Interpreter {\n\n  _buildExecutionTree(tree: Tree, input: string) {\n\n    type StackEntry = { args: any[], nodeInput: string };\n\n    const root = { args: [], nodeInput: input };\n\n    const stack: StackEntry[] = [ root ];\n\n    tree.iterate({\n      enter(nodeRef) {\n\n        const {\n          isError,\n          isSkipped\n        } = nodeRef.type;\n\n        const {\n          from,\n          to\n        } = nodeRef;\n\n        if (isError) {\n          throw new Error(`Statement unparseable at [${from}, ${to}]`);\n        }\n\n        if (isSkipped) {\n          return false;\n        }\n\n        const nodeInput = input.slice(from, to);\n\n        stack.push({\n          nodeInput,\n          args: []\n        });\n      },\n\n      leave(nodeRef) {\n\n        if (nodeRef.type.isSkipped) {\n          return;\n        }\n\n        const {\n          nodeInput,\n          args\n        } = stack.pop();\n\n        const parent = stack[stack.length - 1];\n\n        const expr = evalNode(nodeRef, nodeInput, args);\n\n        parent.args.push(expr);\n      }\n    });\n\n    return root.args[root.args.length - 1];\n  }\n\n  evaluate(expression: string, context: InterpreterContext = {}) {\n\n    const parseTree = parseExpressions(expression, context);\n\n    const root = this._buildExecutionTree(parseTree, expression);\n\n    return {\n      parseTree,\n      root\n    };\n  }\n\n  unaryTest(expression: string, context: InterpreterContext = {}) {\n\n    const parseTree = parseUnaryTests(expression, context);\n\n    const root = this._buildExecutionTree(parseTree, expression);\n\n    return {\n      parseTree,\n      root\n    };\n  }\n\n}\n\nconst interpreter = new Interpreter();\n\nexport function unaryTest(expression: string, context: InterpreterContext = {}) {\n  const value = context['?'] || null;\n\n  const {\n    root\n  } = interpreter.unaryTest(expression, context);\n\n  // root = fn(ctx) => test(val)\n  const test = root(context);\n\n  return test(value);\n}\n\nexport function evaluate(expression: string, context: InterpreterContext = {}) {\n\n  const {\n    root\n  } = interpreter.evaluate(expression, context);\n\n  // root = [ fn(ctx) ]\n\n  const results = root(context);\n\n  if (results.length === 1) {\n    return results[0];\n  } else {\n    return results;\n  }\n}\n\n\nfunction evalNode(node: SyntaxNodeRef, input: string, args: any[]) {\n\n  switch (node.name) {\n  case 'ArithOp': return (context) => {\n\n    const nullable = (op, types = [ 'number' ]) => (a, b) => {\n\n      const left = a(context);\n      const right = b(context);\n\n      if (isArray(left)) {\n        return null;\n      }\n\n      if (isArray(right)) {\n        return null;\n      }\n\n      const leftType = getType(left);\n      const rightType = getType(right);\n\n      if (\n        leftType !== rightType ||\n        !types.includes(leftType)\n      ) {\n        return null;\n      }\n\n      return op(left, right);\n    };\n\n    switch (input) {\n    case '+': return nullable((a, b) => a + b, [ 'string', 'number' ]);\n    case '-': return nullable((a, b) => a - b);\n    case '*': return nullable((a, b) => a * b);\n    case '/': return nullable((a, b) => !b ? null : a / b);\n    case '**':\n    case '^': return nullable((a, b) => a ** b);\n    }\n  };\n\n  case 'CompareOp': return tag(() => {\n\n    switch (input) {\n    case '>': return (b) => createRange(b, null, false, false);\n    case '>=': return (b) => createRange(b, null, true, false);\n    case '<': return (b) => createRange(null, b, false, false);\n    case '<=': return (b) => createRange(null, b, false, true);\n    case '=': return (b) => (a) => equals(a, b);\n    case '!=': return (b) => (a) => !equals(a, b);\n    }\n\n  }, Test('boolean'));\n\n  case 'Wildcard': return (_context) => true;\n\n  case 'null': return (_context) => {\n    return null;\n  };\n\n  case 'Disjunction': return tag((context) => {\n\n    const left = args[0](context);\n    const right = args[2](context);\n\n    const matrix = [\n      [ true, true, true ],\n      [ true, false, true ],\n      [ true, null, true ],\n      [ false, true, true ],\n      [ false, false, false ],\n      [ false, null, null ],\n      [ null, true, true ],\n      [ null, false, null ],\n      [ null, null, null ],\n    ];\n\n    const a = typeof left === 'boolean' ? left : null;\n    const b = typeof right === 'boolean' ? right : null;\n\n    return matrix.find(el => el[0] === a && el[1] === b)[2];\n  }, Test('boolean'));\n\n  case 'Conjunction': return tag((context) => {\n    const left = args[0](context);\n    const right = args[2](context);\n\n    const matrix = [\n      [ true, true, true ],\n      [ true, false, false ],\n      [ true, null, null ],\n      [ false, true, false ],\n      [ false, false, false ],\n      [ false, null, false ],\n      [ null, true, null ],\n      [ null, false, false ],\n      [ null, null, null ],\n    ];\n\n    const a = typeof left === 'boolean' ? left : null;\n    const b = typeof right === 'boolean' ? right : null;\n\n    return matrix.find(el => el[0] === a && el[1] === b)[2];\n  }, Test('boolean'));\n\n  case 'Context': return (context) => {\n\n    return args.slice(1, -1).reduce((obj, arg) => {\n      const [ key, value ] = arg({\n        ...context,\n        ...obj\n      });\n\n      return {\n        ...obj,\n        [key]: value\n      };\n    }, {});\n  };\n\n  case 'FunctionBody': return args[0];\n\n  case 'FormalParameters': return args;\n\n  case 'FormalParameter': return args[0];\n\n  case 'ParameterName': return args.join(' ');\n\n  case 'FunctionDefinition': return (context) => {\n    const parameterNames = args[2];\n\n    const fnBody = args[4];\n\n    return wrapFunction((...args) => {\n\n      const fnContext = parameterNames.reduce((context, name, idx) => {\n\n        // support positional parameters\n        context[name] = args[idx];\n\n        return context;\n      }, { ...context });\n\n      return fnBody(fnContext);\n    }, parameterNames);\n  };\n\n  case 'ContextEntry': return (context) => {\n\n    const key = typeof args[0] === 'function' ? args[0](context) : args[0];\n\n    const value = args[1](context);\n\n    return [ key, value ];\n  };\n\n  case 'Key': return args[0];\n\n  case 'Identifier': return input;\n\n  case 'SpecialFunctionName': return (context) => getBuiltin(input, context);\n\n  // preserve spaces in name, but compact multiple\n  // spaces into one (token)\n  case 'Name': return input.replace(/\\s{2,}/g, ' ');\n\n  case 'VariableName': return (context) => {\n    const name = args.join(' ');\n\n    return getBuiltin(name, context) || getFromContext(name, context);\n  };\n\n  case 'QualifiedName': return (context) => {\n    return args.reduce((context, arg) => arg(context), context);\n  };\n\n  case '?': return (context) => getFromContext('?', context);\n\n  // expression\n  // expression \"..\" expression\n  case 'IterationContext': return (context) => {\n\n    const a = args[0](context);\n\n    const b = args[1] && args[1](context);\n\n    return b ? createRange(a, b) : a;\n  };\n\n  case 'Type': return args[0];\n\n  case 'InExpressions': return (context) => {\n\n    const iterationContexts = args.map(ctx => ctx(context));\n\n    if (iterationContexts.some(ctx => getType(ctx) !== 'list')) {\n      return null;\n    }\n\n    return cartesianProduct(iterationContexts).map(ctx => {\n      if (!isArray(ctx)) {\n        ctx = [ ctx ];\n      }\n\n      return Object.assign({}, context, ...ctx);\n    });\n  };\n\n  // Name kw<\"in\"> Expr\n  case 'InExpression': return (context) => {\n    return extractValue(context, args[0], args[2]);\n  };\n\n  case 'SpecialType': throw notImplemented('SpecialType');\n\n  case 'InstanceOfExpression': return tag((context) => {\n\n    const a = args[0](context);\n    const b = args[3](context);\n\n    return a instanceof b;\n  }, Test('boolean'));\n\n  case 'every': return tag((context) => {\n    return (_contexts, _condition) => {\n      const contexts = _contexts(context);\n\n      if (getType(contexts) !== 'list') {\n        return contexts;\n      }\n\n      return contexts.every(ctx => isTruthy(_condition(ctx)));\n    };\n\n  }, Test('boolean'));\n\n  case 'some': return tag((context) => {\n    return (_contexts, _condition) => {\n      const contexts = _contexts(context);\n\n      if (getType(contexts) !== 'list') {\n        return contexts;\n      }\n\n      return contexts.some(ctx => isTruthy(_condition(ctx)));\n    };\n  }, Test('boolean'));\n\n  case 'NumericLiteral': return tag((_context) => input.includes('.') ? parseFloat(input) : parseInt(input), 'number');\n\n  case 'BooleanLiteral': return tag((_context) => input === 'true' ? true : false, 'boolean');\n\n  case 'StringLiteral': return tag((_context) => parseString(input), 'string');\n\n  case 'PositionalParameters': return (context) => args.map(arg => arg(context));\n\n  case 'NamedParameter': return (context) => {\n\n    const name = args[0];\n    const value = args[1](context);\n\n    return [ name, value ];\n  };\n\n  case 'NamedParameters': return (context) => args.reduce((args, arg) => {\n    const [ name, value ] = arg(context);\n\n    args[name] = value;\n\n    return args;\n  }, {});\n\n  case 'DateTimeConstructor': return (context) => {\n    return getBuiltin(input, context);\n  };\n\n  case 'DateTimeLiteral': return (context) => {\n\n    // AtLiteral\n    if (args.length === 1) {\n      return args[0](context);\n    }\n\n    // FunctionInvocation\n    else {\n      const wrappedFn = wrapFunction(args[0](context));\n\n      if (!wrappedFn) {\n        throw new Error(`Failed to evaluate ${input}: Target is not a function`);\n      }\n\n      const contextOrArgs = args[2](context);\n\n      return wrappedFn.invoke(contextOrArgs);\n    }\n\n  };\n\n  case 'AtLiteral': return (context) => {\n\n    const wrappedFn = wrapFunction(getBuiltin('@', context));\n\n    if (!wrappedFn) {\n      throw new Error(`Failed to evaluate ${input}: Target is not a function`);\n    }\n\n    return wrappedFn.invoke([ args[0](context) ]);\n  };\n\n  case 'FunctionInvocation': return (context) => {\n\n    const wrappedFn = wrapFunction(args[0](context));\n\n    if (!wrappedFn) {\n      throw new Error(`Failed to evaluate ${input}: Target is not a function`);\n    }\n\n    const contextOrArgs = args[2](context);\n\n    return wrappedFn.invoke(contextOrArgs);\n  };\n\n  case 'IfExpression': return (function() {\n\n    const ifCondition = args[1];\n\n    const thenValue = args[3];\n    const elseValue = args[5];\n\n    const type = coalecenseTypes(thenValue, elseValue);\n\n    return tag((context) => {\n\n      if (isTruthy(ifCondition(context))) {\n        return thenValue(context);\n      } else {\n        return elseValue ? elseValue(context) : null;\n      }\n    }, type);\n\n  })();\n\n  case 'Parameters': return args.length === 3 ? args[1] : (_context) => [];\n\n  case 'Comparison': return (context) => {\n\n    const operator = args[1];\n\n    // expression !compare kw<\"in\"> PositiveUnaryTest |\n    // expression !compare kw<\"in\"> !unaryTest \"(\" PositiveUnaryTests \")\"\n    if (operator === 'in') {\n      return compareIn(args[0](context), (args[3] || args[2])(context));\n    }\n\n    // expression !compare kw<\"between\"> expression kw<\"and\"> expression\n    if (operator === 'between') {\n\n      const start = args[2](context);\n      const end = args[4](context);\n\n      if (start === null || end === null) {\n        return null;\n      }\n\n      return createRange(start, end).includes(args[0](context));\n    }\n\n    // expression !compare CompareOp<\"=\" | \"!=\"> expression |\n    // expression !compare CompareOp<Gt | Gte | Lt | Lte> expression |\n    const left = args[0](context);\n    const right = args[2](context);\n\n    const test = operator()(right);\n\n    return compareValue(test, left);\n  };\n\n  case 'QuantifiedExpression': return (context) => {\n\n    const testFn = args[0](context);\n\n    const contexts = args[1];\n\n    const condition = args[3];\n\n    return testFn(contexts, condition);\n  };\n\n  // DMN 1.2 - 10.3.2.14\n  // kw<\"for\"> commaSep1<InExpression<IterationContext>> kw<\"return\"> expression\n  case 'ForExpression': return (context) => {\n    const extractor = args[args.length - 1];\n\n    const iterationContexts = args[1](context);\n\n    if (getType(iterationContexts) !== 'list') {\n      return iterationContexts;\n    }\n\n    const partial = [];\n\n    for (const ctx of iterationContexts) {\n\n      partial.push(extractor({\n        ...ctx,\n        partial\n      }));\n    }\n\n    return partial;\n  };\n\n  case 'ArithmeticExpression': return (function() {\n\n    // binary expression (a + b)\n    if (args.length === 3) {\n      const [ a, op, b ] = args;\n\n      return tag((context) => {\n        return op(context)(a, b);\n      }, coalecenseTypes(a, b));\n    }\n\n    // unary expression (-b)\n    if (args.length === 2) {\n      const [ op, value ] = args;\n\n      return tag((context) => {\n\n        return op(context)(() => 0, value);\n      }, value.type);\n    }\n  })();\n\n  case 'PositiveUnaryTest': return args[0];\n\n  case 'ParenthesizedExpression': return args[1];\n\n  case 'PathExpression': return (context) => {\n\n    const pathTarget = args[0](context);\n    const pathProp = args[1];\n\n    if (isArray(pathTarget)) {\n      return coerceSingleton(pathTarget.map(pathProp));\n    } else {\n      return pathProp(pathTarget);\n    }\n  };\n\n  // expression !filter \"[\" expression \"]\"\n  case 'FilterExpression': return (context) => {\n\n    const target = args[0](context);\n\n    const filterFn = args[2];\n\n    const filterTarget = isArray(target) ? target : [ target ];\n\n    // null[..]\n    if (target === null) {\n      return null;\n    }\n\n    // a[1]\n    if (filterFn.type === 'number') {\n      const idx = filterFn(context);\n\n      const value = filterTarget[idx < 0 ? filterTarget.length + idx : idx - 1];\n\n      if (typeof value === 'undefined') {\n        return null;\n      } else {\n        return value;\n      }\n    }\n\n    // a[true]\n    if (filterFn.type === 'boolean') {\n      if (filterFn(context)) {\n        return filterTarget;\n      } else {\n        return [];\n      }\n    }\n\n    if (filterFn.type === 'string') {\n\n      const value = filterFn(context);\n\n      return filterTarget.filter(el => el === value);\n    }\n\n    // a[test]\n    return filterTarget.map(el => {\n\n      const iterationContext = {\n        ...context,\n        item: el,\n        ...el\n      };\n\n      let result = filterFn(iterationContext);\n\n      // test is fn(val) => boolean SimpleUnaryTest\n      if (typeof result === 'function') {\n        result = result(el);\n      }\n\n      if (result instanceof Range) {\n        result = result.includes(el);\n      }\n\n      if (result === true) {\n        return el;\n      }\n\n      return result;\n    }).filter(isTruthy);\n  };\n\n  case 'SimplePositiveUnaryTest': return tag((context) => {\n\n    // <Interval>\n    if (args.length === 1) {\n      return args[0](context);\n    }\n\n    // <CompareOp> <Expr>\n    return args[0](context)(args[1](context));\n  }, 'test');\n\n  case 'List': return (context) => {\n    return args.slice(1, -1).map(arg => arg(context));\n  };\n\n  case 'Interval': return tag((context) => {\n\n    const left = args[1](context);\n    const right = args[2](context);\n\n    const startIncluded = left !== null && args[0] === '[';\n    const endIncluded = right !== null && args[3] === ']';\n\n    return createRange(left, right, startIncluded, endIncluded);\n  }, Test('boolean'));\n\n  case 'PositiveUnaryTests':\n  case 'Expressions': return (context) => {\n    return args.map(a => a(context));\n  };\n\n  case 'UnaryTests': return (context) => {\n\n    return (value = null) => {\n\n      const negate = args[0] === 'not';\n\n      const tests = negate ? args.slice(2, -1) : args;\n\n      const matches = tests.map(test => test(context)).flat(1).map(test => {\n\n        if (isArray(test)) {\n          return test.includes(value);\n        }\n\n        if (test === null) {\n          return null;\n        }\n\n        if (typeof test === 'boolean') {\n          return test;\n        }\n\n        return compareValue(test, value);\n      }).reduce(combineResult, undefined);\n\n      return matches === null ? null : (negate ? !matches : matches);\n    };\n  };\n\n  default: return node.name;\n  }\n}\n\nfunction getBuiltin(name, _context) {\n  return getFromContext(name, builtins);\n}\n\nfunction extractValue(context, prop, _target) {\n\n  const target = _target(context);\n\n  if ([ 'list', 'range' ].includes(getType(target))) {\n    return target.map(t => (\n      { [prop]: t }\n    ));\n  }\n\n  return null;\n}\n\nfunction compareIn(value, tests) {\n\n  if (!isArray(tests)) {\n\n    if (getType(tests) === 'nil') {\n      return null;\n    }\n\n    tests = [ tests ];\n  }\n\n  return tests.some(\n    test => compareValue(test, value)\n  );\n}\n\nfunction compareValue(test, value) {\n\n  if (typeof test === 'function') {\n    return test(value);\n  }\n\n  if (test instanceof Range) {\n    return test.includes(value);\n  }\n\n  return equals(test, value);\n}\n\n\nconst chars = Array.from(\n  'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n);\n\nfunction isTyped(type, values) {\n  return (\n    values.some(e => getType(e) === type) &&\n    values.every(e => e === null || getType(e) === type)\n  );\n}\n\nfunction createRange(start, end, startIncluded = true, endIncluded = true) : Range {\n\n  if (isTyped('string', [ start, end ])) {\n    return createStringRange(start, end, startIncluded, endIncluded);\n  }\n\n  if (isTyped('number', [ start, end ])) {\n    return createNumberRange(start, end, startIncluded, endIncluded);\n  }\n\n  if (isTyped('duration', [ start, end ])) {\n    throw notImplemented('range<duration>');\n  }\n\n  if (isTyped('time', [ start, end ])) {\n    throw notImplemented('range<time>');\n  }\n\n  if (isTyped('date time', [ start, end ])) {\n    throw notImplemented('range<date and time>');\n  }\n\n  if (isTyped('date', [ start, end ])) {\n    throw notImplemented('range<date>');\n  }\n\n  throw new Error(`unsupported range: ${start}..${end}`);\n}\n\nfunction noopMap() {\n  return () => {\n    throw new Error('unsupported range operation: map');\n  };\n}\n\nfunction valuesMap(values) {\n  return (fn) => values.map(fn);\n}\n\nfunction valuesIncludes(values) {\n  return (value) => values.includes(value);\n}\n\nfunction numberMap(start, end, startIncluded, endIncluded) {\n\n  const direction = start > end ? -1 : 1;\n\n  return (fn) => {\n\n    const result = [];\n\n    for (let i = start;; i += direction) {\n\n      if (i === 0 && !startIncluded) {\n        continue;\n      }\n\n      if (i === end && !endIncluded) {\n        break;\n      }\n\n      result.push(fn(i));\n\n      if (i === end) {\n        break;\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction includesStart(n, inclusive) {\n\n  if (inclusive) {\n    return (value) => n <= value;\n  } else {\n    return (value) => n < value;\n  }\n}\n\nfunction includesEnd(n, inclusive) {\n\n  if (inclusive) {\n    return (value) => n >= value;\n  } else {\n    return (value) => n > value;\n  }\n}\n\nfunction anyIncludes(start, end, startIncluded, endIncluded) {\n\n  let tests = [];\n\n  if (start !== null && end !== null) {\n    if (start > end) {\n      tests = [\n        includesStart(end, endIncluded),\n        includesEnd(start, startIncluded)\n      ];\n    } else {\n      tests = [\n        includesStart(start, startIncluded),\n        includesEnd(end, endIncluded)\n      ];\n    }\n  } else\n\n  if (end !== null) {\n    tests = [\n      includesEnd(end, endIncluded)\n    ];\n  } else\n\n  if (start !== null) {\n    tests = [\n      includesStart(start, startIncluded)\n    ];\n  }\n\n  return (value) => tests.every(t => t(value));\n}\n\nfunction createStringRange(start, end, startIncluded = true, endIncluded = true) {\n\n  if (start !== null && !chars.includes(start)) {\n    throw new Error('illegal range start: ' + start);\n  }\n\n  if (end !== null && !chars.includes(end)) {\n    throw new Error('illegal range end: ' + end);\n  }\n\n  let values;\n\n  if (start !== null && end !== null) {\n\n    let startIdx = chars.indexOf(start);\n    let endIdx = chars.indexOf(end);\n\n    const direction = startIdx > endIdx ? -1 : 1;\n\n    if (startIncluded === false) {\n      startIdx += direction;\n    }\n\n    if (endIncluded === false) {\n      endIdx -= direction;\n    }\n\n    values = chars.slice(startIdx, endIdx + 1);\n  }\n\n  const map = values ? valuesMap(values) : noopMap();\n  const includes = values ? valuesIncludes(values) : anyIncludes(start, end, startIncluded, endIncluded);\n\n  return new Range({\n    start,\n    end,\n    'start included': startIncluded,\n    'end included': endIncluded,\n    map,\n    includes\n  });\n}\n\nfunction createNumberRange(start, end, startIncluded, endIncluded) {\n  const map = start !== null && end !== null ? numberMap(start, end, startIncluded, endIncluded) : noopMap();\n  const includes = anyIncludes(start, end, startIncluded, endIncluded);\n\n  return new Range({\n    start,\n    end,\n    'start included': startIncluded,\n    'end included': endIncluded,\n    map,\n    includes\n  });\n}\n\nfunction cartesianProduct(arrays: any[]) {\n\n  if (arrays.some(arr => getType(arr) === 'nil')) {\n    return null;\n  }\n\n  const f = (a, b) => [].concat(...a.map(d => b.map(e => [].concat(d, e))));\n  const cartesian = (a?, b?, ...c) => (b ? cartesian(f(a, b), ...c) : a || []);\n\n  return cartesian(...arrays);\n}\n\n\nfunction coalecenseTypes(a, b) {\n\n  if (!b) {\n    return a.type;\n  }\n\n  if (a.type === b.type) {\n    return a.type;\n  }\n\n  return 'any';\n}\n\ntype ContextFn<T> = (context: InterpreterContext) => T;\ntype TaggedFn = {\n  type: string\n};\n\nfunction tag<Z, T extends ContextFn<Z>>(fn: T, type: string) : T & TaggedFn {\n\n  return Object.assign(fn, {\n    type,\n    toString() {\n      return `TaggedFunction[${type}] ${Function.prototype.toString.call(fn)}`;\n    }\n  });\n}\n\nfunction combineResult(result, match) {\n\n  if (!result) {\n    return match;\n  }\n\n  return result;\n}\n\nfunction isTruthy(obj) {\n  return obj !== false && obj !== null;\n}\n\nfunction Test(type: string): string {\n  return `Test<${type}>`;\n}\n\n/**\n * @param {Function} fn\n * @param {string[]} [parameterNames]\n *\n * @return {FunctionWrapper}\n */\nfunction wrapFunction(fn, parameterNames = null) {\n\n  if (!fn) {\n    return null;\n  }\n\n  if (fn instanceof FunctionWrapper) {\n    return fn;\n  }\n\n  if (fn instanceof Range) {\n    return new FunctionWrapper((value) => fn.includes(value), [ 'value' ]);\n  }\n\n  return new FunctionWrapper(fn, parameterNames || parseParameterNames(fn));\n}\n\nfunction coerceSingleton(values) {\n  if (Array.isArray(values) && values.length === 1) {\n    return values[0];\n  } else {\n    return values;\n  }\n}\n\nfunction parseString(str: string) {\n\n  if (str.startsWith('\"')) {\n    str = str.slice(1);\n  }\n\n  if (str.endsWith('\"')) {\n    str = str.slice(0, -1);\n  }\n\n  return str.replace(/(\\\\\")|(\\\\\\\\)|(\\\\u[a-fA-F0-9]{5,6})|((?:\\\\u[a-fA-F0-9]{1,4})+)/ig, function(substring: string, ...groups: any[]) {\n\n    const [\n      quotes,\n      escape,\n      codePoint,\n      charCodes\n    ] = groups;\n\n    if (quotes) {\n      return '\"';\n    }\n\n    if (escape) {\n      return '\\\\';\n    }\n\n    const escapePattern = /\\\\u([a-fA-F0-9]+)/ig;\n\n    if (codePoint) {\n      const codePointMatch = escapePattern.exec(codePoint);\n\n      return String.fromCodePoint(parseInt(codePointMatch[1], 16));\n    }\n\n    if (charCodes) {\n      const chars = [];\n\n      let charCodeMatch;\n\n      while ((charCodeMatch = escapePattern.exec(substring)) !== null) {\n        chars.push(parseInt(charCodeMatch[1], 16));\n      }\n\n      return String.fromCharCode(...chars);\n    }\n\n    throw new Error('illegal match');\n  });\n}"],"names":["normalizeContextKey","DateTime","Duration","Info","FixedOffsetZone","parser","trackVariables"],"mappings":"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"}