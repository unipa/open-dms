{"version":3,"file":"index.es.js","sources":["../../../node_modules/diagram-js/lib/core/EventBus.js","../src/core/Debounce.js","../src/core/FieldFactory.js","../src/core/FormFieldRegistry.js","../src/import/Importer.js","../src/import/index.js","../src/render/components/Util.js","../src/render/components/icons/Close.svg","../src/render/components/icons/Search.svg","../src/render/components/editor-form-fields/EditorText.js","../src/render/components/editor-form-fields/index.js","../src/render/EditorFormFields.js","../src/render/context/DragAndDropContext.js","../src/render/context/FormEditorContext.js","../src/render/hooks/useService.js","../src/features/properties-panel/icons/pp-list-delete.svg","../src/features/palette/components/Palette.js","../src/render/util/Cursor.js","../src/render/components/FormEditor.js","../src/render/Renderer.js","../src/render/index.js","../src/core/index.js","../../../node_modules/diagram-js/lib/features/editor-actions/EditorActions.js","../../../node_modules/diagram-js/lib/features/editor-actions/index.js","../src/features/editor-actions/FormEditorActions.js","../src/features/editor-actions/index.js","../../../node_modules/diagram-js/lib/features/keyboard/KeyboardUtil.js","../../../node_modules/diagram-js/lib/features/keyboard/Keyboard.js","../../../node_modules/diagram-js/lib/features/keyboard/KeyboardBindings.js","../../../node_modules/diagram-js/lib/features/keyboard/index.js","../src/features/keyboard/FormEditorKeyboardBindings.js","../src/features/keyboard/index.js","../src/features/modeling/cmd/Util.js","../src/features/modeling/cmd/AddFormFieldHandler.js","../src/features/modeling/cmd/EditFormFieldHandler.js","../src/features/modeling/cmd/MoveFormFieldHandler.js","../src/features/modeling/cmd/RemoveFormFieldHandler.js","../src/features/modeling/cmd/UpdateIdClaimHandler.js","../src/features/modeling/cmd/UpdateKeyClaimHandler.js","../src/features/modeling/Modeling.js","../../../node_modules/diagram-js/lib/command/CommandInterceptor.js","../src/features/modeling/behavior/IdBehavior.js","../src/features/modeling/behavior/KeyBehavior.js","../src/features/modeling/behavior/ValidateBehavior.js","../src/features/modeling/behavior/index.js","../../../node_modules/diagram-js/lib/command/CommandStack.js","../../../node_modules/diagram-js/lib/command/index.js","../src/features/modeling/index.js","../src/features/selection/Selection.js","../src/features/selection/SelectionBehavior.js","../src/features/selection/index.js","../src/features/palette/PaletteRenderer.js","../src/features/palette/index.js","../../../node_modules/@bpmn-io/properties-panel/dist/index.esm.js","../src/features/properties-panel/context/FormPropertiesPanelContext.js","../src/features/properties-panel/Util.js","../src/features/properties-panel/PropertiesPanelHeaderProvider.js","../src/features/properties-panel/PropertiesPanelPlaceholderProvider.js","../src/features/properties-panel/entries/ActionEntry.js","../src/features/properties-panel/hooks/usePropertiesPanelService.js","../src/features/properties-panel/hooks/useVariables.js","../src/features/properties-panel/entries/AltTextEntry.js","../src/features/properties-panel/entries/ColumnsEntry.js","../src/features/properties-panel/entries/DescriptionEntry.js","../src/features/properties-panel/entries/DefaultValueEntry.js","../src/features/properties-panel/entries/DisabledEntry.js","../src/features/properties-panel/entries/IdEntry.js","../src/features/properties-panel/entries/KeyEntry.js","../src/features/properties-panel/entries/factories/simpleStringEntryFactory.js","../src/features/properties-panel/entries/factories/simpleBoolEntryFactory.js","../src/features/properties-panel/entries/LabelEntry.js","../src/features/properties-panel/entries/ImageSourceEntry.js","../src/features/properties-panel/entries/TextEntry.js","../src/features/properties-panel/entries/NumberEntries.js","../src/features/properties-panel/entries/NumberSerializationEntry.js","../src/features/properties-panel/entries/DateTimeEntry.js","../src/features/properties-panel/entries/DateTimeConstraintsEntry.js","../src/features/properties-panel/entries/DateTimeSerializationEntry.js","../src/features/properties-panel/entries/SelectEntries.js","../src/features/properties-panel/entries/ValueEntry.js","../src/features/properties-panel/entries/CustomValueEntry.js","../src/features/properties-panel/entries/ValuesSourceSelectEntry.js","../src/features/properties-panel/entries/InputKeyValuesSourceEntry.js","../src/features/properties-panel/entries/StaticValuesSourceEntry.js","../src/features/properties-panel/entries/AdornerEntry.js","../src/features/properties-panel/entries/ConditionEntry.js","../src/features/properties-panel/groups/GeneralGroup.js","../src/features/properties-panel/groups/SerializationGroup.js","../src/features/properties-panel/groups/ConstraintsGroup.js","../src/features/properties-panel/groups/ValidationGroup.js","../src/features/properties-panel/groups/ValuesGroups.js","../src/features/properties-panel/groups/CustomValuesGroup.js","../src/features/properties-panel/groups/AppearanceGroup.js","../src/features/properties-panel/groups/ConditionGroup.js","../src/features/properties-panel/PropertiesPanel.js","../src/features/properties-panel/PropertiesPanelRenderer.js","../src/features/properties-panel/index.js","../src/FormEditor.js","../src/index.js"],"sourcesContent":["import {\n  isFunction,\n  isArray,\n  isNumber,\n  bind,\n  assign\n} from 'min-dash';\n\nvar FN_REF = '__fn';\n\nvar DEFAULT_PRIORITY = 1000;\n\nvar slice = Array.prototype.slice;\n\n/**\n * A general purpose event bus.\n *\n * This component is used to communicate across a diagram instance.\n * Other parts of a diagram can use it to listen to and broadcast events.\n *\n *\n * ## Registering for Events\n *\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\n * methods to register for events. {@link EventBus#off} can be used to\n * remove event registrations. Listeners receive an instance of {@link Event}\n * as the first argument. It allows them to hook into the event execution.\n *\n * ```javascript\n *\n * // listen for event\n * eventBus.on('foo', function(event) {\n *\n *   // access event type\n *   event.type; // 'foo'\n *\n *   // stop propagation to other listeners\n *   event.stopPropagation();\n *\n *   // prevent event default\n *   event.preventDefault();\n * });\n *\n * // listen for event with custom payload\n * eventBus.on('bar', function(event, payload) {\n *   console.log(payload);\n * });\n *\n * // listen for event returning value\n * eventBus.on('foobar', function(event) {\n *\n *   // stop event propagation + prevent default\n *   return false;\n *\n *   // stop event propagation + return custom result\n *   return {\n *     complex: 'listening result'\n *   };\n * });\n *\n *\n * // listen with custom priority (default=1000, higher is better)\n * eventBus.on('priorityfoo', 1500, function(event) {\n *   console.log('invoked first!');\n * });\n *\n *\n * // listen for event and pass the context (`this`)\n * eventBus.on('foobar', function(event) {\n *   this.foo();\n * }, this);\n * ```\n *\n *\n * ## Emitting Events\n *\n * Events can be emitted via the event bus using {@link EventBus#fire}.\n *\n * ```javascript\n *\n * // false indicates that the default action\n * // was prevented by listeners\n * if (eventBus.fire('foo') === false) {\n *   console.log('default has been prevented!');\n * };\n *\n *\n * // custom args + return value listener\n * eventBus.on('sum', function(event, a, b) {\n *   return a + b;\n * });\n *\n * // you can pass custom arguments + retrieve result values.\n * var sum = eventBus.fire('sum', 1, 2);\n * console.log(sum); // 3\n * ```\n */\nexport default function EventBus() {\n  this._listeners = {};\n\n  // cleanup on destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, this._destroy, this);\n}\n\n\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @param {string|Array<string>} events\n * @param {number} [priority=1000] the priority in which this listener is called, larger is higher\n * @param {Function} callback\n * @param {Object} [that] Pass context (`this`) to the callback\n */\nEventBus.prototype.on = function(events, priority, callback, that) {\n\n  events = isArray(events) ? events : [ events ];\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  var actualCallback = callback;\n\n  if (that) {\n    actualCallback = bind(callback, that);\n\n    // make sure we remember and are able to remove\n    // bound callbacks via {@link #off} using the original\n    // callback\n    actualCallback[FN_REF] = callback[FN_REF] || callback;\n  }\n\n  var self = this;\n\n  events.forEach(function(e) {\n    self._addListener(e, {\n      priority: priority,\n      callback: actualCallback,\n      next: null\n    });\n  });\n};\n\n\n/**\n * Register an event listener that is executed only once.\n *\n * @param {string} event the event name to register for\n * @param {number} [priority=1000] the priority in which this listener is called, larger is higher\n * @param {Function} callback the callback to execute\n * @param {Object} [that] Pass context (`this`) to the callback\n */\nEventBus.prototype.once = function(event, priority, callback, that) {\n  var self = this;\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  function wrappedCallback() {\n    wrappedCallback.__isTomb = true;\n\n    var result = callback.apply(that, arguments);\n\n    self.off(event, wrappedCallback);\n\n    return result;\n  }\n\n  // make sure we remember and are able to remove\n  // bound callbacks via {@link #off} using the original\n  // callback\n  wrappedCallback[FN_REF] = callback;\n\n  this.on(event, priority, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {string|Array<string>} events\n * @param {Function} [callback]\n */\nEventBus.prototype.off = function(events, callback) {\n\n  events = isArray(events) ? events : [ events ];\n\n  var self = this;\n\n  events.forEach(function(event) {\n    self._removeListener(event, callback);\n  });\n\n};\n\n\n/**\n * Create an EventBus event.\n *\n * @param {Object} data\n *\n * @return {Object} event, recognized by the eventBus\n */\nEventBus.prototype.createEvent = function(data) {\n  var event = new InternalEvent();\n\n  event.init(data);\n\n  return event;\n};\n\n\n/**\n * Fires a named event.\n *\n * @example\n *\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n *\n * @param {string} [name] the optional event name\n * @param {Object} [event] the event object\n * @param {...Object} additional arguments to be passed to the callback functions\n *\n * @return {boolean} the events return value, if specified or false if the\n *                   default action was prevented by listeners\n */\nEventBus.prototype.fire = function(type, data) {\n  var event,\n      firstListener,\n      returnValue,\n      args;\n\n  args = slice.call(arguments);\n\n  if (typeof type === 'object') {\n    data = type;\n    type = data.type;\n  }\n\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n\n  firstListener = this._listeners[type];\n\n  if (!firstListener) {\n    return;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof InternalEvent) {\n\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = this.createEvent(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  var originalType = event.type;\n\n  // update event type before delegation\n  if (type !== originalType) {\n    event.type = type;\n  }\n\n  try {\n    returnValue = this._invokeListeners(event, args, firstListener);\n  } finally {\n\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // set the return value to false if the event default\n  // got prevented and no other return value exists\n  if (returnValue === undefined && event.defaultPrevented) {\n    returnValue = false;\n  }\n\n  return returnValue;\n};\n\n\nEventBus.prototype.handleError = function(error) {\n  return this.fire('error', { error: error }) === false;\n};\n\n\nEventBus.prototype._destroy = function() {\n  this._listeners = {};\n};\n\nEventBus.prototype._invokeListeners = function(event, args, listener) {\n\n  var returnValue;\n\n  while (listener) {\n\n    // handle stopped propagation\n    if (event.cancelBubble) {\n      break;\n    }\n\n    returnValue = this._invokeListener(event, args, listener);\n\n    listener = listener.next;\n  }\n\n  return returnValue;\n};\n\nEventBus.prototype._invokeListener = function(event, args, listener) {\n\n  var returnValue;\n\n  if (listener.callback.__isTomb) {\n    return returnValue;\n  }\n\n  try {\n\n    // returning false prevents the default action\n    returnValue = invokeFunction(listener.callback, args);\n\n    // stop propagation on return value\n    if (returnValue !== undefined) {\n      event.returnValue = returnValue;\n      event.stopPropagation();\n    }\n\n    // prevent default on return false\n    if (returnValue === false) {\n      event.preventDefault();\n    }\n  } catch (error) {\n    if (!this.handleError(error)) {\n      console.error('unhandled error in event listener', error);\n\n      throw error;\n    }\n  }\n\n  return returnValue;\n};\n\n/*\n * Add new listener with a certain priority to the list\n * of listeners (for the given event).\n *\n * The semantics of listener registration / listener execution are\n * first register, first serve: New listeners will always be inserted\n * after existing listeners with the same priority.\n *\n * Example: Inserting two listeners with priority 1000 and 1300\n *\n *    * before: [ 1500, 1500, 1000, 1000 ]\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\n *\n * @param {string} event\n * @param {Object} listener { priority, callback }\n */\nEventBus.prototype._addListener = function(event, newListener) {\n\n  var listener = this._getListeners(event),\n      previousListener;\n\n  // no prior listeners\n  if (!listener) {\n    this._setListeners(event, newListener);\n\n    return;\n  }\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  while (listener) {\n\n    if (listener.priority < newListener.priority) {\n\n      newListener.next = listener;\n\n      if (previousListener) {\n        previousListener.next = newListener;\n      } else {\n        this._setListeners(event, newListener);\n      }\n\n      return;\n    }\n\n    previousListener = listener;\n    listener = listener.next;\n  }\n\n  // add new listener to back\n  previousListener.next = newListener;\n};\n\n\nEventBus.prototype._getListeners = function(name) {\n  return this._listeners[name];\n};\n\nEventBus.prototype._setListeners = function(name, listener) {\n  this._listeners[name] = listener;\n};\n\nEventBus.prototype._removeListener = function(event, callback) {\n\n  var listener = this._getListeners(event),\n      nextListener,\n      previousListener,\n      listenerCallback;\n\n  if (!callback) {\n\n    // clear listeners\n    this._setListeners(event, null);\n\n    return;\n  }\n\n  while (listener) {\n\n    nextListener = listener.next;\n\n    listenerCallback = listener.callback;\n\n    if (listenerCallback === callback || listenerCallback[FN_REF] === callback) {\n      if (previousListener) {\n        previousListener.next = nextListener;\n      } else {\n\n        // new first listener\n        this._setListeners(event, nextListener);\n      }\n    }\n\n    previousListener = listener;\n    listener = nextListener;\n  }\n};\n\n/**\n * A event that is emitted via the event bus.\n */\nfunction InternalEvent() { }\n\nInternalEvent.prototype.stopPropagation = function() {\n  this.cancelBubble = true;\n};\n\nInternalEvent.prototype.preventDefault = function() {\n  this.defaultPrevented = true;\n};\n\nInternalEvent.prototype.init = function(data) {\n  assign(this, data || {});\n};\n\n\n/**\n * Invoke function. Be fast...\n *\n * @param {Function} fn\n * @param {Array<Object>} args\n *\n * @return {Any}\n */\nfunction invokeFunction(fn, args) {\n  return fn.apply(null, args);\n}\n","import { debounce } from 'min-dash';\n\n/**\n * A factory to create a configurable debouncer.\n *\n * @param {number|boolean} [config=true]\n */\nexport default function DebounceFactory(config = true) {\n\n  const timeout = typeof config === 'number' ? config : config ? 300 : 0;\n\n  if (timeout) {\n    return fn => debounce(fn, timeout);\n  } else {\n    return fn => fn;\n  }\n}\n\nDebounceFactory.$inject = [ 'config.debounce' ];","export default class FieldFactory {\n\n  /**\n   * @constructor\n   *\n   * @param { import('./FormFieldRegistry').default } formFieldRegistry\n   * @param { import('@bpmn-io/form-js-viewer').FormFields } formFields\n   */\n  constructor(formFieldRegistry, formFields) {\n    this._formFieldRegistry = formFieldRegistry;\n    this._formFields = formFields;\n  }\n\n  create(attrs, applyDefaults = true) {\n\n    const {\n      id,\n      key,\n      type\n    } = attrs;\n\n    const fieldDefinition = this._formFields.get(type);\n\n    if (!fieldDefinition) {\n      throw new Error(`form field of type <${ type }> not supported`);\n    }\n\n    if (id && this._formFieldRegistry._ids.assigned(id)) {\n      throw new Error(`ID <${ id }> already assigned`);\n    }\n\n    if (key && this._formFieldRegistry._keys.assigned(key)) {\n      throw new Error(`key <${ key }> already assigned`);\n    }\n\n    const labelAttrs = applyDefaults && fieldDefinition.label ? {\n      label: fieldDefinition.label\n    } : {};\n\n    const field = fieldDefinition.create({\n      ...labelAttrs,\n      ...attrs\n    });\n\n    this._ensureId(field);\n\n    if (fieldDefinition.keyed) {\n      this._ensureKey(field, applyDefaults);\n    }\n\n    return field;\n  }\n\n  _ensureId(field) {\n\n    if (field.id) {\n      this._formFieldRegistry._ids.claim(field.id, field);\n\n      return;\n    }\n\n    let prefix = 'Field';\n\n    if (field.type === 'default') {\n      prefix = 'Form';\n    }\n\n    field.id = this._formFieldRegistry._ids.nextPrefixed(`${prefix}_`, field);\n  }\n\n  _ensureKey(field, applyDefaults) {\n\n    if (field.key) {\n      this._formFieldRegistry._keys.claim(field.key, field);\n\n      return;\n    }\n\n    if (applyDefaults) {\n      let prefix = 'field';\n\n      field.key = this._formFieldRegistry._keys.nextPrefixed(`${prefix}_`, field);\n    }\n  }\n}\n\n\nFieldFactory.$inject = [\n  'formFieldRegistry',\n  'formFields'\n];","import {\n  FormFieldRegistry as BaseFieldRegistry\n} from '@bpmn-io/form-js-viewer';\n\n\nexport default class FormFieldRegistry extends BaseFieldRegistry {\n\n  /**\n   * Updates a form fields id.\n   *\n   * @param {Object} formField\n   * @param {string} newId\n   */\n  updateId(formField, newId) {\n\n    this._validateId(newId);\n\n    this._eventBus.fire('formField.updateId', {\n      formField,\n      newId: newId\n    });\n\n    this.remove(formField);\n\n    formField.id = newId;\n\n    this.add(formField);\n\n    // TODO(nikku): make this a proper object graph so we\n    // do not have to deal with IDs this way...\n    if ('components' in formField) {\n      for (const component of formField.components) {\n        component._parent = newId;\n      }\n    }\n\n  }\n\n\n  /**\n   * Validate the suitability of the given id and signals a problem\n   * with an exception.\n   *\n   * @param {string} id\n   *\n   * @throws {Error} if id is empty or already assigned\n   */\n  _validateId(id) {\n    if (!id) {\n      throw new Error('formField must have an id');\n    }\n\n    if (this.get(id)) {\n      throw new Error('formField with id ' + id + ' already added');\n    }\n  }\n\n}","import { clone } from '@bpmn-io/form-js-viewer';\n\n\nexport default class Importer {\n\n  /**\n   * @constructor\n   * @param { import('../core/FormFieldRegistry').default } formFieldRegistry\n   * @param { import('../core/FieldFactory').default } fieldFactory\n   */\n  constructor(formFieldRegistry, fieldFactory) {\n    this._formFieldRegistry = formFieldRegistry;\n    this._fieldFactory = fieldFactory;\n  }\n\n  /**\n   * Import schema creating fields, attaching additional\n   * information to each field and adding fields to the\n   * field registry.\n   *\n   * Additional information attached:\n   *\n   *   * `id` (unless present)\n   *   * `_parent`\n   *   * `_path`\n   *\n   * @param {any} schema\n   *\n   * @typedef {{ warnings: Error[], schema: any }} ImportResult\n   * @returns {ImportResult}\n   */\n  importSchema(schema) {\n\n    // TODO: Add warnings\n    const warnings = [];\n\n    try {\n      const importedSchema = this.importFormField(clone(schema));\n\n      return {\n        schema: importedSchema,\n        warnings\n      };\n    } catch (err) {\n      err.warnings = warnings;\n\n      throw err;\n    }\n  }\n\n  /**\n   * @param {{[x: string]: any}} fieldAttrs\n   * @param {String} [parentId]\n   * @param {number} [index]\n   *\n   * @return {any} field\n   */\n  importFormField(fieldAttrs, parentId, index) {\n    const {\n      components,\n      id,\n      key\n    } = fieldAttrs;\n\n    let parent, path;\n\n    if (parentId) {\n      parent = this._formFieldRegistry.get(parentId);\n    }\n\n    // validate <id> uniqueness\n    if (id && this._formFieldRegistry._ids.assigned(id)) {\n      throw new Error(`form field with id <${ id }> already exists`);\n    }\n\n    // validate <key> uniqueness\n    if (key && this._formFieldRegistry._keys.assigned(key)) {\n      throw new Error(`form field with key <${ key }> already exists`);\n    }\n\n    // set form field path\n    path = parent ? [ ...parent._path, 'components', index ] : [];\n\n    const field = this._fieldFactory.create({\n      ...fieldAttrs,\n      _path: path,\n      _parent: parent && parent.id\n    }, false);\n\n    this._formFieldRegistry.add(field);\n\n    if (components) {\n      field.components = this.importFormFields(components, field.id);\n    }\n\n    return field;\n  }\n\n  /**\n   * @param {Array<any>} components\n   * @param {string} parentId\n   *\n   * @return {Array<any>} imported components\n   */\n  importFormFields(components, parentId) {\n    return components.map((component, index) => {\n      return this.importFormField(component, parentId, index);\n    });\n  }\n\n}\n\nImporter.$inject = [ 'formFieldRegistry', 'fieldFactory' ];","import Importer from './Importer';\n\nexport default {\n  importer: [ 'type', Importer ]\n};","import classNames from 'classnames';\n\nexport function editorFormFieldClasses(type, { disabled = false } = {}) {\n  if (!type) {\n    throw new Error('type required');\n  }\n\n  return classNames('fjs-form-field', `fjs-form-field-${type}`, {\n    'fjs-disabled': disabled\n  });\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  width: \"16\",\n  height: \"16\",\n  fill: \"currentColor\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, props), /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7z\"\n})));","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  width: \"15\",\n  height: \"15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, props), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.5 13.793l-3.776-3.776a5.508 5.508 0 10-.707.707l3.776 3.776.707-.707zM2 6.5a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0z\",\n  fill: \"currentColor\"\n})));","import { Text, isExpression } from '@bpmn-io/form-js-viewer';\nimport { editorFormFieldClasses } from '../Util';\n\nimport { iconsByType } from '../icons';\n\nexport default function EditorText(props) {\n\n  const { type, text = '' } = props.field;\n\n  const Icon = iconsByType('text');\n\n  if (!text) {\n    return <div class={ editorFormFieldClasses(type) }>\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Text view is empty</div>\n    </div>;\n  }\n\n  if (isExpression(text)) {\n    return <div class={ editorFormFieldClasses(type) }>\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Text view is populated by an expression</div>\n    </div>;\n  }\n\n  return <Text { ...{ ...props, disableLinks: true } } />;\n}\n\nEditorText.create = Text.create;\nEditorText.type = Text.type;\nEditorText.keyed = Text.keyed;\n","import EditorText from './EditorText';\n\nexport const editorFormFields = [\n  EditorText\n];","import { FormFields } from '@bpmn-io/form-js-viewer';\nimport { editorFormFields } from './components/editor-form-fields/';\n\nexport default class EditorFormFields extends FormFields {\n  constructor() {\n    super();\n    editorFormFields.forEach((formField) => {\n      this.register(formField.type, formField);\n    });\n  }\n}","import { createContext } from 'preact';\n\nconst DragAndDropContext = createContext({\n  drake: null\n});\n\nexport default DragAndDropContext;","import { createContext } from 'preact';\n\n/**\n * @param {string} type\n * @param {boolean} [strict]\n *\n * @returns {any}\n */\nfunction getService(type, strict) {}\n\nconst FormEditorContext = createContext({\n  getService\n});\n\nexport default FormEditorContext;","import {\n  useContext\n} from 'preact/hooks';\n\nimport { FormEditorContext } from '../context';\n\n\nexport default function(type, strict) {\n  const {\n    getService\n  } = useContext(FormEditorContext);\n\n  return getService(type, strict);\n}","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"11\",\n  height: \"14\"\n}, props), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 4v8c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V4h9zM8 6H3v4.8c0 .66.5 1.2 1.111 1.2H6.89C7.5 12 8 11.46 8 10.8V6zm3-5H8.5l-1-1h-4l-1 1H0v1.5h11V1z\"\n})));","import {\n  useCallback,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport {\n  CloseIcon,\n  iconsByType,\n  SearchIcon\n} from '../../../render/components/icons';\n\nimport { formFields } from '@bpmn-io/form-js-viewer';\n\nexport const PALETTE_ENTRIES = formFields.filter(f => f.type !== 'default').map(f => {\n  return {\n    label: f.label,\n    type: f.type,\n    group: f.group\n  };\n});\n\nexport const PALETTE_GROUPS = [\n  {\n    label: 'Basic input',\n    id: 'basic-input'\n  },\n  {\n    label: 'Selection',\n    id: 'selection'\n  },\n  {\n    label: 'Presentation',\n    id: 'presentation'\n  },\n  {\n    label: 'Action',\n    id: 'action'\n  }\n];\n\nexport default function Palette(props) {\n\n  const [ entries, setEntries ] = useState(PALETTE_ENTRIES);\n\n  const [ searchTerm, setSearchTerm ] = useState('');\n\n  const inputRef = useRef();\n\n  const groups = groupEntries(entries);\n\n  // filter entries on search change\n  useEffect(() => {\n\n    const filter = entry => {\n      if (!searchTerm) {\n        return true;\n      }\n\n      const search = entry.label.toLowerCase();\n\n      return searchTerm\n        .toLowerCase()\n        .split(/\\s/g)\n        .every(term => search.includes(term));\n    };\n\n    const entries = PALETTE_ENTRIES.filter(filter);\n\n    setEntries(entries);\n  }, [ searchTerm ]);\n\n  const handleInput = useCallback(event => {\n    setSearchTerm(() => event.target.value);\n  }, [ setSearchTerm ]);\n\n  const handleClear = useCallback(event => {\n    setSearchTerm('');\n    inputRef.current.focus();\n  }, [ inputRef, setSearchTerm ]);\n\n  return <div class=\"fjs-palette\">\n    <div class=\"fjs-palette-header\" title=\"Components\">\n      Components\n    </div>\n    <div class=\"fjs-palette-search-container\">\n      <span class=\"fjs-palette-search-icon\">\n        <SearchIcon></SearchIcon>\n      </span>\n      <input class=\"fjs-palette-search\"\n        ref={ inputRef }\n        type=\"text\"\n        placeholder=\"Search components\"\n        value={ searchTerm }\n        onInput={ handleInput } />\n      {\n        searchTerm && (\n          <button title=\"Clear content\" class=\"fjs-palette-search-clear\" onClick={ handleClear }>\n            <CloseIcon></CloseIcon>\n          </button>\n        )\n      }\n    </div>\n    <div class=\"fjs-palette-entries\">\n      {\n        groups.map(({ label, entries, id }) =>\n          <div class=\"fjs-palette-group\" data-group-id={ id }>\n            <span class=\"fjs-palette-group-title\">{ label }</span>\n            <div class=\"fjs-palette-fields fjs-drag-container fjs-no-drop\">\n              {\n                entries.map(({ label, type }) => {\n                  const Icon = iconsByType(type);\n\n                  return (\n                    <div\n                      class=\"fjs-palette-field fjs-drag-copy fjs-no-drop\"\n                      data-field-type={ type }\n                      title={ `Create ${getIndefiniteArticle(type)} ${label} element` }\n                    >\n                      {\n                        Icon ? <Icon class=\"fjs-palette-field-icon\" width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" /> : null\n                      }\n                      <span class=\"fjs-palette-field-text\">{ label }</span>\n                    </div>\n                  );\n                })\n              }\n            </div>\n          </div>\n        )\n      }\n      {\n        groups.length == 0 && (\n          <div class=\"fjs-palette-no-entries\">No components found.</div>\n        )\n      }\n    </div>\n  </div>;\n}\n\n\n// helpers ///////\n\nfunction groupEntries(entries) {\n  const groups = PALETTE_GROUPS.map(group => {\n    return {\n      ...group,\n      entries: []\n    };\n  });\n\n  const getGroup = id => groups.find(group => id === group.id);\n\n  entries.forEach(entry => {\n    const { group } = entry;\n    getGroup(group).entries.push(entry);\n  });\n\n  return groups.filter(g => g.entries.length);\n}\n\nfunction getIndefiniteArticle(type) {\n  if ([\n    'image'\n  ].includes(type)) {\n    return 'an';\n  }\n\n  return 'a';\n}","import {\n  classes as domClasses\n} from 'min-dom';\n\nconst CURSOR_CLS_PATTERN = /^fjs-cursor-.*$/;\n\n\nexport function set(mode) {\n  const classes = domClasses(document.body);\n\n  classes.removeMatching(CURSOR_CLS_PATTERN);\n\n  if (mode) {\n    classes.add('fjs-cursor-' + mode);\n  }\n}\n\nexport function unset() {\n  set(null);\n}\n\nexport function has(mode) {\n  const classes = domClasses(document.body);\n\n  return classes.has('fjs-cursor-' + mode);\n}\n","import { render } from 'preact';\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'preact/hooks';\n\nimport {\n  FormComponent,\n  FormContext,\n  FormRenderContext\n} from '@bpmn-io/form-js-viewer';\n\nimport useService from '../hooks/useService';\n\nimport { DragAndDropContext } from '../context';\n\nimport dragula from 'dragula';\n\nimport { ListDeleteIcon } from '../../features/properties-panel/icons';\n\nimport { PALETTE_ENTRIES } from '../../features/palette/components/Palette';\n\nimport { set as setCursor, unset as unsetCursor } from '../util/Cursor';\n\nimport { iconsByType } from './icons';\n\nfunction ContextPad(props) {\n  if (!props.children) {\n    return null;\n  }\n\n  return (\n    <div class=\"fjs-context-pad\">\n      {\n        props.children\n      }\n    </div>\n  );\n}\n\nfunction Empty(props) {\n  return null;\n}\n\nfunction Element(props) {\n  const eventBus = useService('eventBus'),\n        formEditor = useService('formEditor'),\n        formFieldRegistry = useService('formFieldRegistry'),\n        modeling = useService('modeling'),\n        selection = useService('selection');\n\n  const { field } = props;\n\n  const {\n    id,\n    type\n  } = field;\n\n  const ref = useRef();\n\n  function scrollIntoView({ selection }) {\n    if (!selection || selection.id !== id || !ref.current) {\n      return;\n    }\n\n    const elementBounds = ref.current.getBoundingClientRect(),\n          containerBounds = formEditor._container.getBoundingClientRect();\n\n    if (elementBounds.top < 0 || elementBounds.top > containerBounds.bottom) {\n      ref.current.scrollIntoView();\n    }\n  }\n\n  useEffect(() => {\n    eventBus.on('selection.changed', scrollIntoView);\n\n    return () => eventBus.off('selection.changed', scrollIntoView);\n  }, [ id ]);\n\n  function onClick(event) {\n    event.stopPropagation();\n\n    selection.toggle(field);\n  }\n\n  const classes = [ 'fjs-element' ];\n\n  if (props.class) {\n    classes.push(...props.class.split(' '));\n  }\n\n  if (selection.isSelected(field)) {\n    classes.push('fjs-editor-selected');\n  }\n\n  const onRemove = (event) => {\n    event.stopPropagation();\n\n    const parentField = formFieldRegistry.get(field._parent);\n\n    const index = getFormFieldIndex(parentField, field);\n\n    modeling.removeFormField(field, parentField, index);\n  };\n\n  return (\n    <div\n      class={ classes.join(' ') }\n      data-id={ id }\n      data-field-type={ type }\n      onClick={ onClick }\n      ref={ ref }>\n      <ContextPad>\n        {\n          selection.isSelected(field) && field.type !== 'default'\n            ? <button class=\"fjs-context-pad-item\" onClick={ onRemove }><ListDeleteIcon /></button>\n            : null\n        }\n      </ContextPad>\n      { props.children }\n    </div>\n  );\n}\n\nfunction Children(props) {\n  const { field } = props;\n\n  const { id } = field;\n\n  const classes = [ 'fjs-children', 'fjs-drag-container' ];\n\n  if (props.class) {\n    classes.push(...props.class.split(' '));\n  }\n\n  return (\n    <div\n      class={ classes.join(' ') }\n      data-id={ id }>\n      { props.children }\n    </div>\n  );\n}\n\nexport default function FormEditor(props) {\n  const eventBus = useService('eventBus'),\n        formEditor = useService('formEditor'),\n        formFieldRegistry = useService('formFieldRegistry'),\n        injector = useService('injector'),\n        modeling = useService('modeling'),\n        selection = useService('selection'),\n        palette = useService('palette'),\n        paletteConfig = useService('config.palette'),\n        propertiesPanel = useService('propertiesPanel'),\n        propertiesPanelConfig = useService('config.propertiesPanel');\n\n  const { schema } = formEditor._getState();\n\n  const paletteRef = useRef(null);\n  const propertiesPanelRef = useRef(null);\n\n  const [ , setSelection ] = useState(schema);\n\n  useEffect(() => {\n    function handleSelectionChanged(event) {\n      setSelection(event.selection || schema);\n    }\n\n    eventBus.on('selection.changed', handleSelectionChanged);\n\n    setSelection(selection.get() || schema);\n\n    return () => {\n      eventBus.off('selection.changed', handleSelectionChanged);\n    };\n  }, [ schema, selection ]);\n\n  const [ drake, setDrake ] = useState(null);\n\n  const dragAndDropContext = {\n    drake\n  };\n\n  useEffect(() => {\n\n    const handleDragEvent = (type, context) => {\n      return eventBus.fire(type, context);\n    };\n\n    const createDragulaInstance = () => {\n      const dragulaInstance = dragula({\n        isContainer(el) {\n          return el.classList.contains('fjs-drag-container');\n        },\n        copy(el) {\n          return el.classList.contains('fjs-drag-copy');\n        },\n        accepts(el, target) {\n          return !target.classList.contains('fjs-no-drop');\n        },\n        slideFactorX: 10,\n        slideFactorY: 5\n      });\n\n      // bind life cycle events\n      dragulaInstance.on('drag', (element, source) => {\n        handleDragEvent('drag.start', { element, source });\n      });\n\n      dragulaInstance.on('dragend', (element) => {\n        handleDragEvent('drag.end', { element });\n      });\n\n      dragulaInstance.on('drop', (element, target, source, sibling) => {\n        handleDragEvent('drag.drop', { element, target, source, sibling });\n      });\n\n      dragulaInstance.on('over', (element, container, source) => {\n        handleDragEvent('drag.hover', { element, container, source });\n      });\n\n      dragulaInstance.on('out', (element, container, source) => {\n        handleDragEvent('drag.out', { element, container, source });\n      });\n\n      dragulaInstance.on('cancel', (element, container, source) => {\n        handleDragEvent('drag.cancel', { element, container, source });\n      });\n\n      // set custom styling\n      dragulaInstance.on('drag', () => {\n        setCursor('grabbing');\n      });\n\n      dragulaInstance.on('dragend', () => {\n        unsetCursor();\n      });\n\n      dragulaInstance.on('drop', (el, target, source, sibling) => {\n        dragulaInstance.remove();\n\n        if (!target) {\n          return;\n        }\n\n        const targetFormField = formFieldRegistry.get(target.dataset.id);\n\n        const siblingFormField = sibling && formFieldRegistry.get(sibling.dataset.id),\n              targetIndex = siblingFormField ? getFormFieldIndex(targetFormField, siblingFormField) : targetFormField.components.length;\n\n        if (source.classList.contains('fjs-palette-fields')) {\n          const type = el.dataset.fieldType;\n\n          modeling.addFormField({ type }, targetFormField, targetIndex);\n        } else {\n          const formField = formFieldRegistry.get(el.dataset.id),\n                sourceFormField = formFieldRegistry.get(source.dataset.id),\n                sourceIndex = getFormFieldIndex(sourceFormField, formField);\n\n          modeling.moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex);\n        }\n      });\n\n      eventBus.fire('dragula.created');\n\n      setDrake(dragulaInstance);\n\n      return dragulaInstance;\n    };\n\n    let dragulaInstance = createDragulaInstance();\n\n    const onDetach = () => {\n      if (dragulaInstance) {\n        dragulaInstance.destroy();\n\n        eventBus.fire('dragula.destroyed');\n      }\n    };\n\n    const onAttach = () => {\n      onDetach();\n\n      dragulaInstance = createDragulaInstance();\n    };\n\n    eventBus.on('attach', onAttach);\n    eventBus.on('detach', onDetach);\n\n    return () => {\n      onDetach();\n\n      eventBus.off('attach', onAttach);\n      eventBus.off('detach', onDetach);\n    };\n  }, []);\n\n  // fire event after render to notify interested parties\n  useEffect(() => {\n    eventBus.fire('formEditor.rendered');\n  }, []);\n\n  const formRenderContext = {\n    Children,\n    Element,\n    Empty\n  };\n\n  const formContext = {\n    getService(type, strict = true) {\n\n      // TODO(philippfromme): clean up\n      if (type === 'form') {\n        return {\n          _getState() {\n            return {\n              data: {},\n              errors: {},\n              properties: {\n                readOnly: true\n              },\n              schema\n            };\n          }\n        };\n      }\n\n      return injector.get(type, strict);\n    },\n    formId: formEditor._id\n  };\n\n  const onSubmit = useCallback(() => {}, []);\n\n  const onReset = useCallback(() => {}, []);\n\n  // attach default palette\n  const hasDefaultPalette = defaultPalette(paletteConfig);\n\n  useEffect(() => {\n    if (hasDefaultPalette) {\n      palette.attachTo(paletteRef.current);\n    }\n  }, [ palette, paletteRef, hasDefaultPalette ]);\n\n  // attach default properties panel\n  const hasDefaultPropertiesPanel = defaultPropertiesPanel(propertiesPanelConfig);\n\n  useEffect(() => {\n    if (hasDefaultPropertiesPanel) {\n      propertiesPanel.attachTo(propertiesPanelRef.current);\n    }\n  }, [ propertiesPanelRef, propertiesPanel, hasDefaultPropertiesPanel ]);\n\n  return (\n    <div class=\"fjs-form-editor\">\n\n      <DragAndDropContext.Provider value={ dragAndDropContext }>\n        { hasDefaultPalette && <div class=\"fjs-editor-palette-container\" ref={ paletteRef } /> }\n        <div class=\"fjs-form-container\">\n\n          <FormContext.Provider value={ formContext }>\n            <FormRenderContext.Provider value={ formRenderContext }>\n              <FormComponent onSubmit={ onSubmit } onReset={ onReset } />\n            </FormRenderContext.Provider>\n          </FormContext.Provider>\n\n        </div>\n        <CreatePreview />\n      </DragAndDropContext.Provider>\n\n      { hasDefaultPropertiesPanel && <div class=\"fjs-editor-properties-container\" ref={ propertiesPanelRef } /> }\n    </div>\n  );\n}\n\nfunction getFormFieldIndex(parent, formField) {\n  let fieldFormIndex = parent.components.length;\n\n  parent.components.forEach(({ id }, index) => {\n    if (id === formField.id) {\n      fieldFormIndex = index;\n    }\n  });\n\n  return fieldFormIndex;\n}\n\nfunction CreatePreview(props) {\n\n  const { drake } = useContext(DragAndDropContext);\n\n  function handleCloned(clone, original, type) {\n\n    const fieldType = clone.dataset.fieldType;\n\n    const Icon = iconsByType(fieldType);\n\n    const { label } = findPaletteEntry(fieldType);\n\n    if (fieldType) {\n      clone.innerHTML = '';\n\n      clone.class = 'gu-mirror';\n\n      if (original.classList.contains('fjs-palette-field')) {\n        render(\n          <div class=\"fjs-palette-field\">\n            <Icon class=\"fjs-palette-field-icon\" width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" />\n            <span class=\"fjs-palette-field-text\">{ label }</span>\n          </div>,\n          clone\n        );\n      } else {\n        render(<Icon />, clone);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (!drake) {\n      return;\n    }\n\n    drake.on('cloned', handleCloned);\n\n    return () => drake.off('cloned', handleCloned);\n  }, [ drake ]);\n\n  return null;\n}\n\n\n// helper //////\n\nfunction defaultPalette(paletteConfig) {\n  return !(paletteConfig && paletteConfig.parent);\n}\n\nfunction defaultPropertiesPanel(propertiesPanelConfig) {\n  return !(propertiesPanelConfig && propertiesPanelConfig.parent);\n}\n\nfunction findPaletteEntry(type) {\n  return PALETTE_ENTRIES.find(entry => entry.type === type);\n}","import { render } from 'preact';\nimport { useState } from 'preact/hooks';\n\nimport FormEditor from './components/FormEditor';\n\nimport { FormEditorContext } from './context';\n\n/**\n * @typedef { { container: Element, compact?: boolean } } RenderConfig\n * @typedef { import('didi').Injector } Injector\n * @typedef { import('../core/EventBus').default } EventBus\n * @typedef { import('../FormEditor').default } FormEditor\n */\n\n/**\n * @param {RenderConfig} renderConfig\n * @param {EventBus} eventBus\n * @param {FormEditor} formEditor\n * @param {Injector} injector\n */\nexport default class Renderer {\n  constructor(renderConfig, eventBus, formEditor, injector) {\n\n    const {\n      container,\n      compact = false\n    } = renderConfig;\n\n    const App = () => {\n      const [ state, setState ] = useState(formEditor._getState());\n\n      const formEditorContext = {\n        getService(type, strict = true) {\n          return injector.get(type, strict);\n        }\n      };\n\n      formEditor.on('changed', (newState) => {\n        setState(newState);\n      });\n\n      const { schema } = state;\n\n      if (!schema) {\n        return null;\n      }\n\n      return (\n        <div class={ `fjs-container fjs-editor-container ${ compact ? 'fjs-editor-compact' : '' }` }>\n          <FormEditorContext.Provider value={ formEditorContext }>\n            <FormEditor />\n          </FormEditorContext.Provider>\n        </div>\n      );\n    };\n\n    eventBus.on('form.init', () => {\n      render(<App />, container);\n    });\n\n    eventBus.on('form.destroy', () => {\n      render(null, container);\n    });\n  }\n}\n\nRenderer.$inject = [ 'config.renderer', 'eventBus', 'formEditor', 'injector' ];","import EditorFormFields from './EditorFormFields';\nimport Renderer from './Renderer';\n\nexport default {\n  __init__: [ 'formFields', 'renderer' ],\n  formFields: [ 'type', EditorFormFields ],\n  renderer: [ 'type', Renderer ]\n};","import EventBus from './EventBus';\nimport DebounceFactory from './Debounce';\nimport FieldFactory from './FieldFactory';\nimport FormFieldRegistry from './FormFieldRegistry';\n\nimport importModule from '../import';\nimport renderModule from '../render';\n\nexport default {\n  __depends__: [\n    importModule,\n    renderModule\n  ],\n  eventBus: [ 'type', EventBus ],\n  formFieldRegistry: [ 'type', FormFieldRegistry ],\n  fieldFactory: [ 'type', FieldFactory ],\n  debounce: [ 'factory', DebounceFactory ]\n};","import {\n  forEach,\n  isArray\n} from 'min-dash';\n\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\n    IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´\n * and likewise unregister existing ones with ´unregisterAction´.\n *\n *\n * ## Life-Cycle and configuration\n *\n * The editor actions will wait for diagram initialization before\n * registering default actions _and_ firing an `editorActions.init` event.\n *\n * Interested parties may listen to the `editorActions.init` event with\n * low priority to check, which actions got registered. Other components\n * may use the event to register their own actions via `registerAction`.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function EditorActions(eventBus, injector) {\n\n  // initialize actions\n  this._actions = {};\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // all diagram modules got loaded; check which ones\n    // are available and register the respective default actions\n    self._registerDefaultActions(injector);\n\n    // ask interested parties to register available editor\n    // actions on diagram initialization\n    eventBus.fire('editorActions.init', {\n      editorActions: self\n    });\n  });\n\n}\n\nEditorActions.$inject = [\n  'eventBus',\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (1) retrieve optional components to integrate with\n\n  var commandStack = injector.get('commandStack', false);\n  var modeling = injector.get('modeling', false);\n  var selection = injector.get('selection', false);\n  var zoomScroll = injector.get('zoomScroll', false);\n  var copyPaste = injector.get('copyPaste', false);\n  var canvas = injector.get('canvas', false);\n  var rules = injector.get('rules', false);\n  var keyboardMove = injector.get('keyboardMove', false);\n  var keyboardMoveSelection = injector.get('keyboardMoveSelection', false);\n\n  // (2) check components and register actions\n\n  if (commandStack) {\n    this.register('undo', function() {\n      commandStack.undo();\n    });\n\n    this.register('redo', function() {\n      commandStack.redo();\n    });\n  }\n\n  if (copyPaste && selection) {\n    this.register('copy', function() {\n      var selectedElements = selection.get();\n\n      if (selectedElements.length) {\n        return copyPaste.copy(selectedElements);\n      }\n    });\n  }\n\n  if (copyPaste) {\n    this.register('paste', function() {\n      copyPaste.paste();\n    });\n  }\n\n  if (zoomScroll) {\n    this.register('stepZoom', function(opts) {\n      zoomScroll.stepZoom(opts.value);\n    });\n  }\n\n  if (canvas) {\n    this.register('zoom', function(opts) {\n      canvas.zoom(opts.value);\n    });\n  }\n\n  if (modeling && selection && rules) {\n    this.register('removeSelection', function() {\n\n      var selectedElements = selection.get();\n\n      if (!selectedElements.length) {\n        return;\n      }\n\n      var allowed = rules.allowed('elements.delete', { elements: selectedElements }),\n          removableElements;\n\n      if (allowed === false) {\n        return;\n      }\n      else if (isArray(allowed)) {\n        removableElements = allowed;\n      }\n      else {\n        removableElements = selectedElements;\n      }\n\n      if (removableElements.length) {\n        modeling.removeElements(removableElements.slice());\n      }\n    });\n  }\n\n  if (keyboardMove) {\n    this.register('moveCanvas', function(opts) {\n      keyboardMove.moveCanvas(opts);\n    });\n  }\n\n  if (keyboardMoveSelection) {\n    this.register('moveSelection', function(opts) {\n      keyboardMoveSelection.moveSelection(opts.direction, opts.accelerated);\n    });\n  }\n\n};\n\n\n/**\n * Triggers a registered action\n *\n * @param  {string} action\n * @param  {Object} opts\n *\n * @return {Unknown} Returns what the registered listener returns\n */\nEditorActions.prototype.trigger = function(action, opts) {\n  if (!this._actions[action]) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  return this._actions[action](opts);\n};\n\n\n/**\n * Registers a collections of actions.\n * The key of the object will be the name of the action.\n *\n * @example\n * ´´´\n * var actions = {\n *   spaceTool: function() {\n *     spaceTool.activateSelection();\n *   },\n *   lassoTool: function() {\n *     lassoTool.activateSelection();\n *   }\n * ];\n *\n * editorActions.register(actions);\n *\n * editorActions.isRegistered('spaceTool'); // true\n * ´´´\n *\n * @param  {Object} actions\n */\nEditorActions.prototype.register = function(actions, listener) {\n  var self = this;\n\n  if (typeof actions === 'string') {\n    return this._registerAction(actions, listener);\n  }\n\n  forEach(actions, function(listener, action) {\n    self._registerAction(action, listener);\n  });\n};\n\n/**\n * Registers a listener to an action key\n *\n * @param  {string} action\n * @param  {Function} listener\n */\nEditorActions.prototype._registerAction = function(action, listener) {\n  if (this.isRegistered(action)) {\n    throw error(action, IS_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = listener;\n};\n\n/**\n * Unregister an existing action\n *\n * @param {string} action\n */\nEditorActions.prototype.unregister = function(action) {\n  if (!this.isRegistered(action)) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = undefined;\n};\n\n/**\n * Returns the number of actions that are currently registered\n *\n * @return {number}\n */\nEditorActions.prototype.getActions = function() {\n  return Object.keys(this._actions);\n};\n\n/**\n * Checks wether the given action is registered\n *\n * @param {string} action\n *\n * @return {boolean}\n */\nEditorActions.prototype.isRegistered = function(action) {\n  return !!this._actions[action];\n};\n\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}\n","import EditorActions from './EditorActions';\n\nexport default {\n  __init__: [ 'editorActions' ],\n  editorActions: [ 'type', EditorActions ]\n};\n","import EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\n\nexport default class FormEditorActions extends EditorActions {\n  constructor(eventBus, injector) {\n    super(eventBus, injector);\n\n    eventBus.on('form.init', () => {\n      this._registerDefaultActions(injector);\n\n      eventBus.fire('editorActions.init', {\n        editorActions: this\n      });\n    });\n  }\n\n  _registerDefaultActions(injector) {\n    const commandStack = injector.get('commandStack', false),\n          formFieldRegistry = injector.get('formFieldRegistry', false),\n          selection = injector.get('selection', false);\n\n    if (commandStack) {\n\n      // @ts-ignore\n      this.register('undo', () => {\n        commandStack.undo();\n      });\n\n      // @ts-ignore\n      this.register('redo', () => {\n        commandStack.redo();\n      });\n    }\n\n    if (formFieldRegistry && selection) {\n\n      // @ts-ignore\n      this.register('selectFormField', (options = {}) => {\n        const { id } = options;\n\n        if (!id) {\n          return;\n        }\n\n        const formField = formFieldRegistry.get(id);\n\n        if (formField) {\n          selection.set(formField);\n        }\n      });\n    }\n  }\n}\n\nFormEditorActions.$inject = [\n  'eventBus',\n  'injector'\n];","import EditorActionsModule from 'diagram-js/lib/features/editor-actions';\n\nimport FormEditorActions from './FormEditorActions';\n\nexport default {\n  __depends__: [\n    EditorActionsModule\n  ],\n  editorActions: [ 'type', FormEditorActions ]\n};\n","import { isArray } from 'min-dash';\r\n\r\nvar KEYS_COPY = [ 'c', 'C', 'KeyC' ];\r\nvar KEYS_PASTE = [ 'v', 'V', 'KeyV' ];\r\nvar KEYS_REDO = [ 'y', 'Y', 'KeyY' ];\r\nvar KEYS_UNDO = [ 'z', 'Z', 'KeyZ' ];\r\n\r\n/**\r\n * Returns true if event was triggered with any modifier\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function hasModifier(event) {\r\n  return (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isCmd(event) {\r\n\r\n  // ensure we don't react to AltGr\r\n  // (mapped to CTRL + ALT)\r\n  if (event.altKey) {\r\n    return false;\r\n  }\r\n\r\n  return event.ctrlKey || event.metaKey;\r\n}\r\n\r\n/**\r\n * Checks if key pressed is one of provided keys.\r\n *\r\n * @param {string|Array<string>} keys\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isKey(keys, event) {\r\n  keys = isArray(keys) ? keys : [ keys ];\r\n\r\n  return keys.indexOf(event.key) !== -1 || keys.indexOf(event.code) !== -1;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isShift(event) {\r\n  return event.shiftKey;\r\n}\r\n\r\nexport function isCopy(event) {\r\n  return isCmd(event) && isKey(KEYS_COPY, event);\r\n}\r\n\r\nexport function isPaste(event) {\r\n  return isCmd(event) && isKey(KEYS_PASTE, event);\r\n}\r\n\r\nexport function isUndo(event) {\r\n  return isCmd(event) && !isShift(event) && isKey(KEYS_UNDO, event);\r\n}\r\n\r\nexport function isRedo(event) {\r\n  return isCmd(event) && (\r\n    isKey(KEYS_REDO, event) || (\r\n      isKey(KEYS_UNDO, event) && isShift(event)\r\n    )\r\n  );\r\n}","import {\n  isFunction\n} from 'min-dash';\n\nimport {\n  closest as domClosest,\n  event as domEvent,\n  matches as domMatches\n} from 'min-dom';\n\nimport {\n  hasModifier,\n  isCmd,\n  isKey,\n  isShift\n} from './KeyboardUtil';\n\nvar KEYDOWN_EVENT = 'keyboard.keydown',\n    KEYUP_EVENT = 'keyboard.keyup';\n\nvar HANDLE_MODIFIER_ATTRIBUTE = 'input-handle-modified-keys';\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A keyboard abstraction that may be activated and\n * deactivated by users at will, consuming global key events\n * and triggering diagram actions.\n *\n * For keys pressed down, keyboard fires `keyboard.keydown` event.\n * The event context contains one field which is `KeyboardEvent` event.\n *\n * The implementation fires the following key events that allow\n * other components to hook into key handling:\n *\n *  - keyboard.bind\n *  - keyboard.unbind\n *  - keyboard.init\n *  - keyboard.destroy\n *\n * All events contain one field which is node.\n *\n * A default binding for the keyboard may be specified via the\n * `keyboard.bindTo` configuration option.\n *\n * @param {Config} config\n * @param {EventBus} eventBus\n */\nexport default function Keyboard(config, eventBus) {\n  var self = this;\n\n  this._config = config || {};\n  this._eventBus = eventBus;\n\n  this._keydownHandler = this._keydownHandler.bind(this);\n  this._keyupHandler = this._keyupHandler.bind(this);\n\n  // properly clean dom registrations\n  eventBus.on('diagram.destroy', function() {\n    self._fire('destroy');\n\n    self.unbind();\n  });\n\n  eventBus.on('diagram.init', function() {\n    self._fire('init');\n  });\n\n  eventBus.on('attach', function() {\n    if (config && config.bindTo) {\n      self.bind(config.bindTo);\n    }\n  });\n\n  eventBus.on('detach', function() {\n    self.unbind();\n  });\n}\n\nKeyboard.$inject = [\n  'config.keyboard',\n  'eventBus'\n];\n\nKeyboard.prototype._keydownHandler = function(event) {\n  this._keyHandler(event, KEYDOWN_EVENT);\n};\n\nKeyboard.prototype._keyupHandler = function(event) {\n  this._keyHandler(event, KEYUP_EVENT);\n};\n\nKeyboard.prototype._keyHandler = function(event, type) {\n  var eventBusResult;\n\n  if (this._isEventIgnored(event)) {\n    return;\n  }\n\n  var context = {\n    keyEvent: event\n  };\n\n  eventBusResult = this._eventBus.fire(type || KEYDOWN_EVENT, context);\n\n  if (eventBusResult) {\n    event.preventDefault();\n  }\n};\n\nKeyboard.prototype._isEventIgnored = function(event) {\n  if (event.defaultPrevented) {\n    return true;\n  }\n\n  return isInput(event.target) && this._isModifiedKeyIgnored(event);\n};\n\nKeyboard.prototype._isModifiedKeyIgnored = function(event) {\n  if (!isCmd(event)) {\n    return true;\n  }\n\n  var allowedModifiers = this._getAllowedModifiers(event.target);\n  return allowedModifiers.indexOf(event.key) === -1;\n};\n\nKeyboard.prototype._getAllowedModifiers = function(element) {\n  var modifierContainer = domClosest(element, '[' + HANDLE_MODIFIER_ATTRIBUTE + ']', true);\n\n  if (!modifierContainer || (this._node && !this._node.contains(modifierContainer))) {\n    return [];\n  }\n\n  return modifierContainer.getAttribute(HANDLE_MODIFIER_ATTRIBUTE).split(',');\n};\n\nKeyboard.prototype.bind = function(node) {\n\n  // make sure that the keyboard is only bound once to the DOM\n  this.unbind();\n\n  this._node = node;\n\n  // bind key events\n  domEvent.bind(node, 'keydown', this._keydownHandler);\n  domEvent.bind(node, 'keyup', this._keyupHandler);\n\n  this._fire('bind');\n};\n\nKeyboard.prototype.getBinding = function() {\n  return this._node;\n};\n\nKeyboard.prototype.unbind = function() {\n  var node = this._node;\n\n  if (node) {\n    this._fire('unbind');\n\n    // unbind key events\n    domEvent.unbind(node, 'keydown', this._keydownHandler);\n    domEvent.unbind(node, 'keyup', this._keyupHandler);\n  }\n\n  this._node = null;\n};\n\nKeyboard.prototype._fire = function(event) {\n  this._eventBus.fire('keyboard.' + event, { node: this._node });\n};\n\n/**\n * Add a listener function that is notified with `KeyboardEvent` whenever\n * the keyboard is bound and the user presses a key. If no priority is\n * provided, the default value of 1000 is used.\n *\n * @param {number} [priority]\n * @param {Function} listener\n * @param {string} type\n */\nKeyboard.prototype.addListener = function(priority, listener, type) {\n  if (isFunction(priority)) {\n    type = listener;\n    listener = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on(type || KEYDOWN_EVENT, priority, listener);\n};\n\nKeyboard.prototype.removeListener = function(listener, type) {\n  this._eventBus.off(type || KEYDOWN_EVENT, listener);\n};\n\nKeyboard.prototype.hasModifier = hasModifier;\nKeyboard.prototype.isCmd = isCmd;\nKeyboard.prototype.isShift = isShift;\nKeyboard.prototype.isKey = isKey;\n\n\n\n// helpers ///////\n\nfunction isInput(target) {\n  return target && (domMatches(target, 'input, textarea') || target.contentEditable === 'true');\n}\n","import {\n  isCmd,\n  isKey,\n  isCopy,\n  isPaste,\n  isUndo,\n  isRedo\n} from './KeyboardUtil';\n\nvar LOW_PRIORITY = 500;\n\nexport var KEYS_COPY = [ 'c', 'C', 'KeyC' ];\nexport var KEYS_PASTE = [ 'v', 'V', 'KeyV' ];\nexport var KEYS_REDO = [ 'y', 'Y', 'KeyY' ];\nexport var KEYS_UNDO = [ 'z', 'Z', 'KeyZ' ];\n\n\n/**\n * Adds default keyboard bindings.\n *\n * This does not pull in any features will bind only actions that\n * have previously been registered against the editorActions component.\n *\n * @param {EventBus} eventBus\n * @param {Keyboard} keyboard\n */\nexport default function KeyboardBindings(eventBus, keyboard) {\n\n  var self = this;\n\n  eventBus.on('editorActions.init', LOW_PRIORITY, function(event) {\n\n    var editorActions = event.editorActions;\n\n    self.registerBindings(keyboard, editorActions);\n  });\n}\n\nKeyboardBindings.$inject = [\n  'eventBus',\n  'keyboard'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {string} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n\n  // undo\n  // (CTRL|CMD) + Z\n  addListener('undo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isUndo(event)) {\n      editorActions.trigger('undo');\n\n      return true;\n    }\n  });\n\n  // redo\n  // CTRL + Y\n  // CMD + SHIFT + Z\n  addListener('redo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isRedo(event)) {\n      editorActions.trigger('redo');\n\n      return true;\n    }\n  });\n\n  // copy\n  // CTRL/CMD + C\n  addListener('copy', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCopy(event)) {\n      editorActions.trigger('copy');\n\n      return true;\n    }\n  });\n\n  // paste\n  // CTRL/CMD + V\n  addListener('paste', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isPaste(event)) {\n      editorActions.trigger('paste');\n\n      return true;\n    }\n  });\n\n  // zoom in one step\n  // CTRL/CMD + +\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    // quirk: it has to be triggered by `=` as well to work on international keyboard layout\n    // cf: https://github.com/bpmn-io/bpmn-js/issues/1362#issuecomment-722989754\n    if (isKey([ '+', 'Add', '=' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // zoom out one step\n  // CTRL + -\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ '-', 'Subtract' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: -1 });\n\n      return true;\n    }\n  });\n\n  // zoom to the default level\n  // CTRL + 0\n  addListener('zoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey('0', event) && isCmd(event)) {\n      editorActions.trigger('zoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // delete selected element\n  // DEL\n  addListener('removeSelection', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ 'Backspace', 'Delete', 'Del' ], event)) {\n      editorActions.trigger('removeSelection');\n\n      return true;\n    }\n  });\n};","import Keyboard from './Keyboard';\nimport KeyboardBindings from './KeyboardBindings';\n\nexport default {\n  __init__: [ 'keyboard', 'keyboardBindings' ],\n  keyboard: [ 'type', Keyboard ],\n  keyboardBindings: [ 'type', KeyboardBindings ]\n};\n","import {\n  isCmd,\n  isKey,\n  isShift\n} from 'diagram-js/lib/features/keyboard/KeyboardUtil';\n\nimport {\n  KEYS_REDO,\n  KEYS_UNDO\n} from 'diagram-js/lib/features/keyboard/KeyboardBindings';\n\nconst LOW_PRIORITY = 500;\n\nexport default class FormEditorKeyboardBindings {\n  constructor(eventBus, keyboard) {\n    eventBus.on('editorActions.init', LOW_PRIORITY, (event) => {\n      const { editorActions } = event;\n\n      this.registerBindings(keyboard, editorActions);\n    });\n  }\n\n  registerBindings(keyboard, editorActions) {\n\n    function addListener(action, fn) {\n      if (editorActions.isRegistered(action)) {\n        keyboard.addListener(fn);\n      }\n    }\n\n    // undo\n    // (CTRL|CMD) + Z\n    addListener('undo', (context) => {\n      const { keyEvent } = context;\n\n      if (isCmd(keyEvent) && !isShift(keyEvent) && isKey(KEYS_UNDO, keyEvent)) {\n        editorActions.trigger('undo');\n\n        return true;\n      }\n    });\n\n    // redo\n    // CTRL + Y\n    // CMD + SHIFT + Z\n    addListener('redo', (context) => {\n      const { keyEvent } = context;\n\n      if (isCmd(keyEvent) && (isKey(KEYS_REDO, keyEvent) || (isKey(KEYS_UNDO, keyEvent) && isShift(keyEvent)))) {\n        editorActions.trigger('redo');\n\n        return true;\n      }\n    });\n\n  }\n}\n\nFormEditorKeyboardBindings.$inject = [ 'eventBus', 'keyboard' ];","import KeyboardModule from 'diagram-js/lib/features/keyboard';\n\nimport FormEditorKeyboardBindings from './FormEditorKeyboardBindings';\n\nexport default {\n  __depends__: [\n    KeyboardModule\n  ],\n  __init__: [ 'keyboardBindings' ],\n  keyboardBindings: [ 'type', FormEditorKeyboardBindings ]\n};","export function arrayAdd(array, index, item) {\n  array.splice(index, 0, item);\n\n  return array;\n}\n\nexport { mutate as arrayMove } from 'array-move';\n\nexport function arrayRemove(array, index) {\n  array.splice(index, 1);\n\n  return array;\n}\n\nexport function updatePath(formFieldRegistry, formField, index) {\n  const parent = formFieldRegistry.get(formField._parent);\n\n  formField._path = [ ...parent._path, 'components', index ];\n\n  return formField;\n}","import { get } from 'min-dash';\n\nimport {\n  arrayAdd,\n  arrayRemove,\n  updatePath\n} from './Util';\n\nexport default class AddFormFieldHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').default } formEditor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    const {\n      formField,\n      targetFormField,\n      targetIndex\n    } = context;\n\n    const { schema } = this._formEditor._getState();\n\n    const targetPath = [ ...targetFormField._path, 'components' ];\n\n    formField._parent = targetFormField.id;\n\n    // (1) Add new form field\n    arrayAdd(get(schema, targetPath), targetIndex, formField);\n\n    // (2) Update paths of new form field and its siblings\n    get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Add new form field to form field registry\n    this._formFieldRegistry.add(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n  }\n\n  revert(context) {\n    const {\n      formField,\n      targetFormField,\n      targetIndex\n    } = context;\n\n    const { schema } = this._formEditor._getState();\n\n    const targetPath = [ ...targetFormField._path, 'components' ];\n\n    // (1) Remove new form field\n    arrayRemove(get(schema, targetPath), targetIndex);\n\n    // (2) Update paths of new form field and its siblings\n    get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Remove new form field from form field registry\n    this._formFieldRegistry.remove(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n  }\n}\n\nAddFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry' ];","export default class EditFormFieldHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').default } formEditor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    const {\n      formField,\n      properties\n    } = context;\n\n    let { schema } = this._formEditor._getState();\n\n    const oldProperties = {};\n\n    for (let key in properties) {\n      oldProperties[ key ] = formField[ key ];\n\n      const property = properties[ key ];\n\n      if (key === 'id') {\n        if (property !== formField.id) {\n          this._formFieldRegistry.updateId(formField, property);\n        }\n      } else {\n        formField[ key ] = property;\n      }\n    }\n\n    context.oldProperties = oldProperties;\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n\n    return formField;\n  }\n\n  revert(context) {\n    const {\n      formField,\n      oldProperties\n    } = context;\n\n    let { schema } = this._formEditor._getState();\n\n    for (let key in oldProperties) {\n\n      const property = oldProperties[ key ];\n\n      if (key === 'id') {\n        if (property !== formField.id) {\n          this._formFieldRegistry.updateId(formField, property);\n        }\n      } else {\n        formField[ key ] = property;\n      }\n    }\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n\n    return formField;\n  }\n\n}\n\nEditFormFieldHandler.$inject = [\n  'formEditor',\n  'formFieldRegistry'\n];","import { get } from 'min-dash';\n\nimport {\n  arrayAdd,\n  arrayMove,\n  arrayRemove,\n  updatePath\n} from './Util';\n\nexport default class MoveFormFieldHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').default } formEditor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    this.moveFormField(context);\n  }\n\n  revert(context) {\n    let {\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex\n    } = context;\n\n    this.moveFormField({\n      sourceFormField: targetFormField,\n      targetFormField: sourceFormField,\n      sourceIndex: targetIndex,\n      targetIndex: sourceIndex\n    }, true);\n  }\n\n  moveFormField(context, revert) {\n    let {\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex\n    } = context;\n\n    let { schema } = this._formEditor._getState();\n\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\n\n    if (sourceFormField.id === targetFormField.id) {\n\n      if (revert) {\n        if (sourceIndex > targetIndex) {\n          sourceIndex--;\n        }\n      } else {\n        if (sourceIndex < targetIndex) {\n          targetIndex--;\n        }\n      }\n\n      // (1) Move form field\n      arrayMove(get(schema, sourcePath), sourceIndex, targetIndex);\n\n      // (2) Update paths of new form field and its siblings\n      get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    } else {\n      const formField = get(schema, [ ...sourcePath, sourceIndex ]);\n\n      formField._parent = targetFormField.id;\n\n      // (1) Remove form field\n      arrayRemove(get(schema, sourcePath), sourceIndex);\n\n      // (2) Update paths of siblings\n      get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n      const targetPath = [ ...targetFormField._path, 'components' ];\n\n      // (3) Add form field\n      arrayAdd(get(schema, targetPath), targetIndex, formField);\n\n      // (4) Update paths of siblings\n      get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n    }\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n  }\n}\n\nMoveFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry' ];","import { get } from 'min-dash';\n\nimport {\n  arrayAdd,\n  arrayRemove,\n  updatePath\n} from './Util';\n\nexport default class RemoveFormFieldHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../FormEditor').default } formEditor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formEditor, formFieldRegistry) {\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    const {\n      sourceFormField,\n      sourceIndex\n    } = context;\n\n    let { schema } = this._formEditor._getState();\n\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\n\n    const formField = context.formField = get(schema, [ ...sourcePath, sourceIndex ]);\n\n    // (1) Remove form field\n    arrayRemove(get(schema, sourcePath), sourceIndex);\n\n    // (2) Update paths of its siblings\n    get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Remove form field from form field registry\n    this._formFieldRegistry.remove(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n  }\n\n  revert(context) {\n    const {\n      formField,\n      sourceFormField,\n      sourceIndex\n    } = context;\n\n    let { schema } = this._formEditor._getState();\n\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\n\n    // (1) Add form field\n    arrayAdd(get(schema, sourcePath), sourceIndex, formField);\n\n    // (2) Update paths of its siblings\n    get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\n\n    // (3) Add form field to form field registry\n    this._formFieldRegistry.add(formField);\n\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\n    this._formEditor._setState({ schema });\n  }\n}\n\nRemoveFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry' ];","export default class UpdateIdClaimHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formFieldRegistry) {\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    const {\n      claiming,\n      formField,\n      id\n    } = context;\n\n    if (claiming) {\n      this._formFieldRegistry._ids.claim(id, formField);\n    } else {\n      this._formFieldRegistry._ids.unclaim(id);\n    }\n  }\n\n  revert(context) {\n    const {\n      claiming,\n      formField,\n      id\n    } = context;\n\n    if (claiming) {\n      this._formFieldRegistry._ids.unclaim(id);\n    } else {\n      this._formFieldRegistry._ids.claim(id, formField);\n    }\n  }\n}\n\nUpdateIdClaimHandler.$inject = [ 'formFieldRegistry' ];","export default class UpdateKeyClaimHandler {\n\n  /**\n   * @constructor\n   * @param { import('../../../core/FormFieldRegistry').default } formFieldRegistry\n   */\n  constructor(formFieldRegistry) {\n    this._formFieldRegistry = formFieldRegistry;\n  }\n\n  execute(context) {\n    const {\n      claiming,\n      formField,\n      key\n    } = context;\n\n    if (claiming) {\n      this._formFieldRegistry._keys.claim(key, formField);\n    } else {\n      this._formFieldRegistry._keys.unclaim(key);\n    }\n  }\n\n  revert(context) {\n    const {\n      claiming,\n      formField,\n      key\n    } = context;\n\n    if (claiming) {\n      this._formFieldRegistry._keys.unclaim(key);\n    } else {\n      this._formFieldRegistry._keys.claim(key, formField);\n    }\n  }\n}\n\nUpdateKeyClaimHandler.$inject = [ 'formFieldRegistry' ];","import AddFormFieldHandler from './cmd/AddFormFieldHandler';\nimport EditFormFieldHandler from './cmd/EditFormFieldHandler';\nimport MoveFormFieldHandler from './cmd/MoveFormFieldHandler';\nimport RemoveFormFieldHandler from './cmd/RemoveFormFieldHandler';\nimport UpdateIdClaimHandler from './cmd/UpdateIdClaimHandler';\nimport UpdateKeyClaimHandler from './cmd/UpdateKeyClaimHandler';\n\nimport { isObject } from 'min-dash';\n\n\nexport default class Modeling {\n  constructor(commandStack, eventBus, formEditor, formFieldRegistry, fieldFactory) {\n    this._commandStack = commandStack;\n    this._formEditor = formEditor;\n    this._formFieldRegistry = formFieldRegistry;\n    this._fieldFactory = fieldFactory;\n\n    eventBus.on('form.init', () => {\n      this.registerHandlers();\n    });\n  }\n\n  registerHandlers() {\n    Object.entries(this.getHandlers()).forEach(([ id, handler ]) => {\n      this._commandStack.registerHandler(id, handler);\n    });\n  }\n\n  getHandlers() {\n    return {\n      'formField.add': AddFormFieldHandler,\n      'formField.edit': EditFormFieldHandler,\n      'formField.move': MoveFormFieldHandler,\n      'formField.remove': RemoveFormFieldHandler,\n      'id.updateClaim': UpdateIdClaimHandler,\n      'key.updateClaim': UpdateKeyClaimHandler\n    };\n  }\n\n  addFormField(attrs, targetFormField, targetIndex) {\n\n    const formField = this._fieldFactory.create(attrs);\n\n    const context = {\n      formField,\n      targetFormField,\n      targetIndex\n    };\n\n    this._commandStack.execute('formField.add', context);\n\n    return formField;\n  }\n\n  editFormField(formField, properties, value) {\n    if (!isObject(properties)) {\n      properties = {\n        [ properties ]: value\n      };\n    }\n\n    const context = {\n      formField,\n      properties\n    };\n\n    this._commandStack.execute('formField.edit', context);\n  }\n\n  moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex) {\n    const context = {\n      formField,\n      sourceFormField,\n      targetFormField,\n      sourceIndex,\n      targetIndex\n    };\n\n    this._commandStack.execute('formField.move', context);\n  }\n\n  removeFormField(formField, sourceFormField, sourceIndex) {\n    const context = {\n      formField,\n      sourceFormField,\n      sourceIndex\n    };\n\n    this._commandStack.execute('formField.remove', context);\n  }\n\n  claimId(formField, id) {\n    const context = {\n      formField,\n      id,\n      claiming: true\n    };\n\n    this._commandStack.execute('id.updateClaim', context);\n  }\n\n  unclaimId(formField, id) {\n    const context = {\n      formField,\n      id,\n      claiming: false\n    };\n\n    this._commandStack.execute('id.updateClaim', context);\n  }\n\n  claimKey(formField, key) {\n    const context = {\n      formField,\n      key,\n      claiming: true\n    };\n\n    this._commandStack.execute('key.updateClaim', context);\n  }\n\n  unclaimKey(formField, key) {\n    const context = {\n      formField,\n      key,\n      claiming: false\n    };\n\n    this._commandStack.execute('key.updateClaim', context);\n  }\n}\n\nModeling.$inject = [\n  'commandStack',\n  'eventBus',\n  'formEditor',\n  'formFieldRegistry',\n  'fieldFactory'\n];","import {\n  forEach,\n  isFunction,\n  isArray,\n  isNumber,\n  isObject\n} from 'min-dash';\n\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A utility that can be used to plug-in into the command execution for\n * extension and/or validation.\n *\n * @param {EventBus} eventBus\n *\n * @example\n *\n * import inherits from 'inherits-browser';\n *\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * function CommandLogger(eventBus) {\n *   CommandInterceptor.call(this, eventBus);\n *\n *   this.preExecute(function(event) {\n *     console.log('command pre-execute', event);\n *   });\n * }\n *\n * inherits(CommandLogger, CommandInterceptor);\n *\n */\nexport default function CommandInterceptor(eventBus) {\n  this._eventBus = eventBus;\n}\n\nCommandInterceptor.$inject = [ 'eventBus' ];\n\nfunction unwrapEvent(fn, that) {\n  return function(event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n/**\n * Register an interceptor for a command execution\n *\n * @param {string|Array<string>} [events] list of commands to register on\n * @param {string} [hook] command hook, i.e. preExecute, executed to listen on\n * @param {number} [priority] the priority on which to hook into the execution\n * @param {Function} handlerFn interceptor to be invoked with (event)\n * @param {boolean} unwrap if true, unwrap the event and pass (context, command, event) to the\n *                          listener instead\n * @param {Object} [that] Pass context (`this`) to the handler function\n */\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\n\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [ events ];\n  }\n\n  var eventBus = this._eventBus;\n\n  forEach(events, function(event) {\n\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\n\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n\nvar hooks = [\n  'canExecute',\n  'preExecute',\n  'preExecuted',\n  'execute',\n  'executed',\n  'postExecute',\n  'postExecuted',\n  'revert',\n  'reverted'\n];\n\n/*\n * Install hook shortcuts\n *\n * This will generate the CommandInterceptor#(preExecute|...|reverted) methods\n * which will in term forward to CommandInterceptor#on.\n */\nforEach(hooks, function(hook) {\n\n  /**\n   * {canExecute|preExecute|preExecuted|execute|executed|postExecute|postExecuted|revert|reverted}\n   *\n   * A named hook for plugging into the command execution\n   *\n   * @param {string|Array<string>} [events] list of commands to register on\n   * @param {number} [priority] the priority on which to hook into the execution\n   * @param {Function} handlerFn interceptor to be invoked with (event)\n   * @param {boolean} [unwrap=false] if true, unwrap the event and pass (context, command, event) to the\n   *                          listener instead\n   * @param {Object} [that] Pass context (`this`) to the handler function\n   */\n  CommandInterceptor.prototype[hook] = function(events, priority, handlerFn, unwrap, that) {\n\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n});\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nexport default class IdBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    // @ts-ignore-next-line\n    this.preExecute('formField.remove', function(context) {\n      const { formField } = context;\n\n      const { id } = formField;\n\n      modeling.unclaimId(formField, id);\n    }, true);\n\n    // @ts-ignore-next-line\n    this.preExecute('formField.edit', function(context) {\n      const {\n        formField,\n        properties\n      } = context;\n\n      if ('id' in properties) {\n        modeling.unclaimId(formField, formField.id);\n\n        modeling.claimId(formField, properties.id);\n      }\n    }, true);\n  }\n}\n\nIdBehavior.$inject = [ 'eventBus', 'modeling' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nexport default class KeyBehavior extends CommandInterceptor {\n  constructor(eventBus, modeling) {\n    super(eventBus);\n\n    // @ts-ignore-next-line\n    this.preExecute('formField.remove', function(context) {\n      const { formField } = context;\n\n      const { key } = formField;\n\n      if (key) {\n        modeling.unclaimKey(formField, key);\n      }\n    }, true);\n\n    // @ts-ignore-next-line\n    this.preExecute('formField.edit', function(context) {\n      const {\n        formField,\n        properties\n      } = context;\n\n      if ('key' in properties) {\n        modeling.unclaimKey(formField, formField.key);\n\n        modeling.claimKey(formField, properties.key);\n      }\n    }, true);\n  }\n}\n\nKeyBehavior.$inject = [ 'eventBus', 'modeling' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nexport default class ValidateBehavior extends CommandInterceptor {\n  constructor(eventBus) {\n    super(eventBus);\n\n    /**\n     * Remove custom validation if <validationType> is about to be added.\n     */\n    // @ts-ignore-next-line\n    this.preExecute('formField.edit', function(context) {\n      const { properties } = context;\n\n      const { validate = {} } = properties;\n\n      if (validate.validationType) {\n        const newValidate = {\n          ...validate\n        };\n\n        delete newValidate.minLength;\n        delete newValidate.maxLength;\n        delete newValidate.pattern;\n\n        properties['validate'] = newValidate;\n      }\n    }, true);\n  }\n}\n\nValidateBehavior.$inject = [ 'eventBus' ];","import IdBehavior from './IdBehavior';\nimport KeyBehavior from './KeyBehavior';\nimport ValidateBehavior from './ValidateBehavior';\n\nexport default {\n  __init__: [\n    'idBehavior',\n    'keyBehavior',\n    'validateBehavior'\n  ],\n  idBehavior: [ 'type', IdBehavior ],\n  keyBehavior: [ 'type', KeyBehavior ],\n  validateBehavior: [ 'type', ValidateBehavior ]\n};\n","import {\n  uniqueBy,\n  isArray\n} from 'min-dash';\n\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute` and `postExecute` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function CommandStack(eventBus, injector) {\n\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {Object}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {Array<Object>}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {Object}\n   * @property {Object[]} actions\n   * @property {Object[]} dirty\n   * @property { 'undo' | 'redo' | 'clear' | 'execute' | null } trigger the cause of the current excecution\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: [],\n    trigger: null\n  };\n\n\n  this._injector = injector;\n  this._eventBus = eventBus;\n\n  this._uid = 1;\n\n  eventBus.on([\n    'diagram.destroy',\n    'diagram.clear'\n  ], function() {\n    this.clear(false);\n  }, this);\n}\n\nCommandStack.$inject = [ 'eventBus', 'injector' ];\n\n\n/**\n * Execute a command\n *\n * @param {string} command the command to execute\n * @param {Object} context the environment to execute the command in\n */\nCommandStack.prototype.execute = function(command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n\n  this._currentExecution.trigger = 'execute';\n\n  const action = { command: command, context: context };\n\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction(action);\n};\n\n\n/**\n * Ask whether a given command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param  {string} command the command to execute\n * @param  {Object} context the environment to execute the command in\n *\n * @return {boolean} true if the command can be executed\n */\nCommandStack.prototype.canExecute = function(command, context) {\n\n  const action = { command: command, context: context };\n\n  const handler = this._getHandler(command);\n\n  let result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Clear the command stack, erasing all undo / redo history\n */\nCommandStack.prototype.clear = function(emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n\n  if (emit !== false) {\n    this._fire('changed', { trigger: 'clear' });\n  }\n};\n\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function() {\n  let action = this._getUndoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'undo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function() {\n  let action = this._getRedoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'redo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Register a handler instance with the command stack\n *\n * @param {string} command\n * @param {CommandHandler} handler\n */\nCommandStack.prototype.register = function(command, handler) {\n  this._setHandler(command, handler);\n};\n\n\n/**\n * Register a handler type with the command stack\n * by instantiating it and injecting its dependencies.\n *\n * @param {string} command\n * @param {Function} a constructor for a {@link CommandHandler}\n */\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\n\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n\n  const handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\nCommandStack.prototype.canUndo = function() {\n  return !!this._getUndoAction();\n};\n\nCommandStack.prototype.canRedo = function() {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function() {\n  return this._stack[this._stackIdx + 1];\n};\n\n\nCommandStack.prototype._getUndoAction = function() {\n  return this._stack[this._stackIdx];\n};\n\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function(action) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'revert', action);\n\n    if (handler.revert) {\n      this._markDirty(handler.revert(context));\n    }\n\n    this._revertedAction(action);\n\n    this._fire(command, 'reverted', action);\n  });\n};\n\n\nCommandStack.prototype._fire = function(command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n\n  const names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ];\n  let result;\n\n  event = this._eventBus.createEvent(event);\n\n  for (const name of names) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n\n  return result;\n};\n\nCommandStack.prototype._createId = function() {\n  return this._uid++;\n};\n\nCommandStack.prototype._atomicDo = function(fn) {\n\n  const execution = this._currentExecution;\n\n  execution.atomic = true;\n\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\n\nCommandStack.prototype._internalExecute = function(action, redo) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n\n  this._pushAction(action);\n\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n\n    this._fire(command, 'execute', action);\n\n    if (handler.execute) {\n\n      // actual execute + mark return results as dirty\n      this._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    this._executedAction(action, redo);\n\n    this._fire(command, 'executed', action);\n  });\n\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n\n    this._fire(command, 'postExecuted', action);\n  }\n\n  this._popAction(action);\n};\n\n\nCommandStack.prototype._pushAction = function(action) {\n\n  const execution = this._currentExecution,\n        actions = execution.actions;\n\n  const baseAction = actions[0];\n\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n\n  if (!action.id) {\n    action.id = (baseAction && baseAction.id) || this._createId();\n  }\n\n  actions.push(action);\n};\n\n\nCommandStack.prototype._popAction = function() {\n  const execution = this._currentExecution,\n        trigger = execution.trigger,\n        actions = execution.actions,\n        dirty = execution.dirty;\n\n  actions.pop();\n\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', { elements: uniqueBy('id', dirty.reverse()) });\n\n    dirty.length = 0;\n\n    this._fire('changed', { trigger: trigger });\n\n    execution.trigger = null;\n  }\n};\n\n\nCommandStack.prototype._markDirty = function(elements) {\n  const execution = this._currentExecution;\n\n  if (!elements) {\n    return;\n  }\n\n  elements = isArray(elements) ? elements : [ elements ];\n\n  execution.dirty = execution.dirty.concat(elements);\n};\n\n\nCommandStack.prototype._executedAction = function(action, redo) {\n  const stackIdx = ++this._stackIdx;\n\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\n\n\nCommandStack.prototype._revertedAction = function(action) {\n  this._stackIdx--;\n};\n\n\nCommandStack.prototype._getHandler = function(command) {\n  return this._handlerMap[command];\n};\n\nCommandStack.prototype._setHandler = function(command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n\n  this._handlerMap[command] = handler;\n};\n","import CommandStack from './CommandStack';\n\nexport default {\n  commandStack: [ 'type', CommandStack ]\n};\n","import Modeling from './Modeling';\n\nimport behaviorModule from './behavior';\nimport commandModule from 'diagram-js/lib/command';\n\nexport default {\n  __depends__: [\n    behaviorModule,\n    commandModule\n  ],\n  __init__: [ 'modeling' ],\n  modeling: [ 'type', Modeling ]\n};\n","export default class Selection {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n    this._selection = null;\n  }\n\n  get() {\n    return this._selection;\n  }\n\n  set(selection) {\n    if (this._selection === selection) {\n      return;\n    }\n\n    this._selection = selection;\n\n    this._eventBus.fire('selection.changed', {\n      selection: this._selection\n    });\n  }\n\n  toggle(selection) {\n    const newSelection = this._selection === selection ? null : selection;\n\n    this.set(newSelection);\n  }\n\n  clear() {\n    this.set(null);\n  }\n\n  isSelected(formField) {\n    return this._selection === formField;\n  }\n}\n\nSelection.$inject = [ 'eventBus' ];","export default class SelectionBehavior {\n  constructor(eventBus, selection) {\n    eventBus.on([\n      'commandStack.formField.add.postExecuted',\n      'commandStack.formField.move.postExecuted'\n    ], ({ context }) => {\n      const { formField } = context;\n\n      selection.set(formField);\n    });\n\n    eventBus.on('commandStack.formField.remove.postExecuted', ({ context }) => {\n      const {\n        sourceFormField,\n        sourceIndex\n      } = context;\n\n      const formField = sourceFormField.components[ sourceIndex ] || sourceFormField.components[ sourceIndex - 1 ];\n\n      if (formField) {\n        selection.set(formField);\n      } else {\n        selection.clear();\n      }\n    });\n\n    eventBus.on('formField.remove', ({ formField }) => {\n      if (selection.isSelected(formField)) {\n        selection.clear();\n      }\n    });\n  }\n}\n\nSelectionBehavior.$inject = [ 'eventBus', 'selection' ];","import Selection from './Selection';\nimport SelectionBehavior from './SelectionBehavior';\n\nexport default {\n  __init__: [ 'selection', 'selectionBehavior' ],\n  selection: [ 'type', Selection ],\n  selectionBehavior: [ 'type', SelectionBehavior ]\n};","import Palette from './components/Palette';\n\nimport {\n  render\n} from 'preact';\n\nimport {\n  domify,\n  query as domQuery\n} from 'min-dom';\n\n\n/**\n * @typedef { { parent: Element } } PaletteConfig\n * @typedef { import('../../core/EventBus').default } EventBus\n */\n\n/**\n * @param {PaletteConfig} paletteConfig\n * @param {EventBus} eventBus\n */\nexport default class PaletteRenderer {\n\n  constructor(paletteConfig, eventBus) {\n    const {\n      parent\n    } = paletteConfig || {};\n\n    this._eventBus = eventBus;\n\n    this._container = domify('<div class=\"fjs-palette-container\"></div>');\n\n    if (parent) {\n      this.attachTo(parent);\n    }\n\n    this._eventBus.once('formEditor.rendered', 500, () => {\n      this._render();\n    });\n  }\n\n\n  /**\n   * Attach the palette to a parent node.\n   *\n   * @param {HTMLElement} container\n   */\n  attachTo(container) {\n    if (!container) {\n      throw new Error('container required');\n    }\n\n    if (typeof container === 'string') {\n      container = domQuery(container);\n    }\n\n    // (1) detach from old parent\n    this.detach();\n\n    // (2) append to parent container\n    container.appendChild(this._container);\n\n    // (3) notify interested parties\n    this._eventBus.fire('palette.attach');\n  }\n\n  /**\n   * Detach the palette from its parent node.\n   */\n  detach() {\n    const parentNode = this._container.parentNode;\n\n    if (parentNode) {\n      parentNode.removeChild(this._container);\n\n      this._eventBus.fire('palette.detach');\n    }\n  }\n\n  _render() {\n    render(\n      <Palette />,\n      this._container\n    );\n\n    this._eventBus.fire('palette.rendered');\n  }\n\n  _destroy() {\n    if (this._container) {\n      render(null, this._container);\n\n      this._eventBus.fire('palette.destroyed');\n    }\n  }\n}\n\nPaletteRenderer.$inject = [ 'config.palette', 'eventBus' ];","import PaletteRenderer from './PaletteRenderer';\n\nexport default {\n  palette: [ 'type', PaletteRenderer ]\n};\n","import { useContext, useRef, useEffect, useMemo, useState, useCallback } from '../preact/hooks';\nimport { isFunction, isArray, get, assign, set, sortBy, find, isNumber, debounce } from 'min-dash';\nimport classnames from 'classnames';\nimport { forwardRef } from '../preact/compat';\nimport { jsx, jsxs } from '../preact/jsx-runtime';\nimport { query } from 'min-dom';\nimport { createContext, createElement } from '../preact';\nimport FeelEditor from '@bpmn-io/feel-editor';\n\nvar ArrowIcon = function ArrowIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z\"\n    })\n  });\n};\nArrowIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar CreateIcon = function CreateIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z\"\n    })\n  });\n};\nCreateIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar DeleteIcon = function DeleteIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z\"\n    })\n  });\n};\nDeleteIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar ExternalLinkIcon = function ExternalLinkIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z\",\n      fill: \"#818798\"\n    })\n  });\n};\nExternalLinkIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar FeelRequiredIcon = function FeelRequiredIcon(props) {\n  return jsxs(\"svg\", {\n    ...props,\n    children: [jsx(\"path\", {\n      d: \"M5.8 7.06V5.95h4.307v1.11H5.8Zm0 3.071v-1.11h4.307v1.11H5.8Z\",\n      fill: \"currentColor\"\n    }), jsx(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"M8 3.268A4.732 4.732 0 1 0 12.732 8H14a6 6 0 1 1-6-6v1.268Z\",\n      fill: \"currentColor\"\n    }), jsx(\"path\", {\n      d: \"m11.28 6.072-.832-.56 1.016-1.224L10 3.848l.312-.912 1.392.584L11.632 2h1.032l-.072 1.52 1.392-.584.312.912-1.464.44 1.008 1.224-.832.552-.864-1.296-.864 1.304Z\",\n      fill: \"currentColor\"\n    })]\n  });\n};\nFeelRequiredIcon.defaultProps = {\n  viewBox: \"0 0 16 16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar FeelOptionalIcon = function FeelOptionalIcon(props) {\n  return jsxs(\"svg\", {\n    ...props,\n    children: [jsx(\"path\", {\n      d: \"M5.845 7.04V5.93h4.307v1.11H5.845Zm0 3.07V9h4.307v1.11H5.845Z\",\n      fill: \"currentColor\"\n    }), jsx(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"M3.286 8a4.714 4.714 0 1 0 9.428 0 4.714 4.714 0 0 0-9.428 0ZM8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2Z\",\n      fill: \"currentColor\"\n    })]\n  });\n};\nFeelOptionalIcon.defaultProps = {\n  viewBox: \"0 0 16 16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nfunction Header(props) {\n  const {\n    element,\n    headerProvider\n  } = props;\n  const {\n    getElementIcon,\n    getDocumentationRef,\n    getElementLabel,\n    getTypeLabel\n  } = headerProvider;\n  const label = getElementLabel(element);\n  const type = getTypeLabel(element);\n  const documentationRef = getDocumentationRef && getDocumentationRef(element);\n  const ElementIcon = getElementIcon(element);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-header\",\n    children: [jsx(\"div\", {\n      class: \"bio-properties-panel-header-icon\",\n      children: ElementIcon && jsx(ElementIcon, {\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      })\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-header-labels\",\n      children: [jsx(\"div\", {\n        title: type,\n        class: \"bio-properties-panel-header-type\",\n        children: type\n      }), label ? jsx(\"div\", {\n        title: label,\n        class: \"bio-properties-panel-header-label\",\n        children: label\n      }) : null]\n    }), jsx(\"div\", {\n      class: \"bio-properties-panel-header-actions\",\n      children: documentationRef ? jsx(\"a\", {\n        rel: \"noopener\",\n        class: \"bio-properties-panel-header-link\",\n        href: documentationRef,\n        title: \"Open documentation\",\n        target: \"_blank\",\n        children: jsx(ExternalLinkIcon, {})\n      }) : null\n    })]\n  });\n}\n\nconst DescriptionContext = createContext({\n  description: {},\n  getDescriptionForId: () => {}\n});\n\nconst ErrorsContext = createContext({\n  errors: {}\n});\n\n/**\r\n * @typedef {Function} <propertiesPanel.showEntry> callback\r\n *\r\n * @example\r\n *\r\n * useEvent('propertiesPanel.showEntry', ({ focus = false, ...rest }) => {\r\n *   // ...\r\n * });\r\n *\r\n * @param {Object} context\r\n * @param {boolean} [context.focus]\r\n *\r\n * @returns void\r\n */\nconst EventContext = createContext({\n  eventBus: null\n});\n\nconst LayoutContext = createContext({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\n\n/**\r\n * Accesses the global DescriptionContext and returns a description for a given id and element.\r\n *\r\n * @example\r\n * ```jsx\r\n * function TextField(props) {\r\n *   const description = useDescriptionContext('input1', element);\r\n * }\r\n * ```\r\n *\r\n * @param {string} id\r\n * @param {object} element\r\n *\r\n * @returns {string}\r\n */\nfunction useDescriptionContext(id, element) {\n  const {\n    getDescriptionForId\n  } = useContext(DescriptionContext);\n  return getDescriptionForId(id, element);\n}\n\nfunction useError(id) {\n  const {\n    errors\n  } = useContext(ErrorsContext);\n  return errors[id];\n}\n\n/**\r\n * Subscribe to an event immediately. Update subscription after inputs changed.\r\n *\r\n * @param {string} event\r\n * @param {Function} callback\r\n */\nfunction useEvent(event, callback, eventBus) {\n  const eventContext = useContext(EventContext);\n  if (!eventBus) {\n    ({\n      eventBus\n    } = eventContext);\n  }\n  const didMount = useRef(false);\n\n  // (1) subscribe immediately\n  if (eventBus && !didMount.current) {\n    eventBus.on(event, callback);\n  }\n\n  // (2) update subscription after inputs changed\n  useEffect(() => {\n    if (eventBus && didMount.current) {\n      eventBus.on(event, callback);\n    }\n    didMount.current = true;\n    return () => {\n      if (eventBus) {\n        eventBus.off(event, callback);\n      }\n    };\n  }, [callback, event, eventBus]);\n}\n\nconst KEY_LENGTH = 6;\n\n/**\r\n * Create a persistent key factory for plain objects without id.\r\n *\r\n * @example\r\n * ```jsx\r\n * function List({ objects }) {\r\n *   const getKey = useKeyFactory();\r\n *   return (<ol>{\r\n *     objects.map(obj => {\r\n *       const key = getKey(obj);\r\n *       return <li key={key}>obj.name</li>\r\n *     })\r\n *   }</ol>);\r\n * }\r\n * ```\r\n *\r\n * @param {any[]} dependencies\r\n * @returns {(element: object) => string}\r\n */\nfunction useKeyFactory(dependencies = []) {\n  const map = useMemo(() => new Map(), dependencies);\n  const getKey = el => {\n    let key = map.get(el);\n    if (!key) {\n      key = Math.random().toString().slice(-KEY_LENGTH);\n      map.set(el, key);\n    }\n    return key;\n  };\n  return getKey;\n}\n\n/**\r\n * Creates a state that persists in the global LayoutContext.\r\n *\r\n * @example\r\n * ```jsx\r\n * function Group(props) {\r\n *   const [ open, setOpen ] = useLayoutState([ 'groups', 'foo', 'open' ], false);\r\n * }\r\n * ```\r\n *\r\n * @param {(string|number)[]} path\r\n * @param {any} [defaultValue]\r\n *\r\n * @returns {[ any, Function ]}\r\n */\nfunction useLayoutState(path, defaultValue) {\n  const {\n    getLayoutForKey,\n    setLayoutForKey\n  } = useContext(LayoutContext);\n  const layoutForKey = getLayoutForKey(path, defaultValue);\n  const [value, set] = useState(layoutForKey);\n  const setState = newValue => {\n    // (1) set component state\n    set(newValue);\n\n    // (2) set context\n    setLayoutForKey(path, newValue);\n  };\n  return [value, setState];\n}\n\n/**\r\n * @pinussilvestrus: we need to introduce our own hook to persist the previous\r\n * state on updates.\r\n *\r\n * cf. https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\r\n */\n\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\n/**\r\n * Subscribe to `propertiesPanel.showEntry`.\r\n *\r\n * @param {string} id\r\n *\r\n * @returns {import('preact').Ref}\r\n */\nfunction useShowEntryEvent(id) {\n  const {\n    onShow\n  } = useContext(LayoutContext);\n  const ref = useRef();\n  const focus = useRef(false);\n  const onShowEntry = useCallback(event => {\n    if (event.id === id) {\n      onShow();\n      if (!focus.current) {\n        focus.current = true;\n      }\n    }\n  }, [id]);\n  useEffect(() => {\n    if (focus.current && ref.current) {\n      if (isFunction(ref.current.focus)) {\n        ref.current.focus();\n      }\n      if (isFunction(ref.current.select)) {\n        ref.current.select();\n      }\n      focus.current = false;\n    }\n  });\n  useEvent('propertiesPanel.showEntry', onShowEntry);\n  return ref;\n}\n\n/**\r\n * @callback setSticky\r\n * @param {boolean} value\r\n */\n\n/**\r\n * Use IntersectionObserver to identify when DOM element is in sticky mode.\r\n * If sticky is observered setSticky(true) will be called.\r\n * If sticky mode is left, setSticky(false) will be called.\r\n *\r\n *\r\n * @param {Object} ref\r\n * @param {string} scrollContainerSelector\r\n * @param {setSticky} setSticky\r\n */\nfunction useStickyIntersectionObserver(ref, scrollContainerSelector, setSticky) {\n  useEffect(() => {\n    const Observer = IntersectionObserver;\n\n    // return early if IntersectionObserver is not available\n    if (!Observer) {\n      return;\n    }\n    let observer;\n    if (ref.current) {\n      const scrollContainer = query(scrollContainerSelector);\n      observer = new Observer(entries => {\n        entries.forEach(entry => {\n          if (entry.intersectionRatio < 1) {\n            setSticky(true);\n          } else if (entry.intersectionRatio === 1) {\n            setSticky(false);\n          }\n        });\n      }, {\n        root: scrollContainer,\n        rootMargin: '0px 0px 999999% 0px',\n        // Use bottom margin to avoid stickyness when scrolling out to bottom\n        threshold: [1]\n      });\n      observer.observe(ref.current);\n    }\n\n    // Unobserve if unmounted\n    return () => {\n      if (ref.current && observer) {\n        observer.unobserve(ref.current);\n      }\n    };\n  }, [ref, scrollContainerSelector, setSticky]);\n}\n\n/**\r\n * Creates a static function reference with changing body.\r\n * This is necessary when external libraries require a callback function\r\n * that has references to state variables.\r\n *\r\n * Usage:\r\n * const callback = useStaticCallback((val) => {val === currentState});\r\n *\r\n * The `callback` reference is static and can be safely used in external\r\n * libraries or as a prop that does not cause rerendering of children.\r\n *\r\n * @param {Function} callback function with changing reference\r\n * @returns {Function} static function reference\r\n */\nfunction useStaticCallback(callback) {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n  return useCallback((...args) => callbackRef.current(...args), []);\n}\n\nfunction Group(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    shouldOpen = false\n  } = props;\n  const groupRef = useRef(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], shouldOpen);\n  const onShow = useCallback(() => setOpen(true), [setOpen]);\n  const toggleOpen = () => setOpen(!open);\n  const [edited, setEdited] = useState(false);\n  const [sticky, setSticky] = useState(false);\n\n  // set edited state depending on all entries\n  useEffect(() => {\n    const hasOneEditedEntry = entries.find(entry => {\n      const {\n        id,\n        isEdited\n      } = entry;\n      const entryNode = query(`[data-entry-id=\"${id}\"]`);\n      if (!isFunction(isEdited) || !entryNode) {\n        return false;\n      }\n      const inputNode = query('.bio-properties-panel-input', entryNode);\n      return isEdited(inputNode);\n    });\n    setEdited(hasOneEditedEntry);\n  }, [entries]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow\n  };\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [jsxs(\"div\", {\n      class: classnames('bio-properties-panel-group-header', edited ? '' : 'empty', open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: label\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [edited && jsx(DataMarker, {}), jsx(\"button\", {\n          title: \"Toggle section\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        })]\n      })]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-group-entries', open ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return createElement(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\nfunction DataMarker() {\n  return jsx(\"div\", {\n    title: \"Section contains data\",\n    class: \"bio-properties-panel-dot\"\n  });\n}\n\n/**\r\n * @typedef { {\r\n *  text: (element: object) => string,\r\n *  icon?: (element: Object) => import('preact').Component\r\n * } } PlaceholderDefinition\r\n *\r\n * @param { PlaceholderDefinition } props\r\n */\nfunction Placeholder(props) {\n  const {\n    text,\n    icon: Icon\n  } = props;\n  return jsx(\"div\", {\n    class: \"bio-properties-panel open\",\n    children: jsxs(\"section\", {\n      class: \"bio-properties-panel-placeholder\",\n      children: [Icon && jsx(Icon, {\n        class: \"bio-properties-panel-placeholder-icon\"\n      }), jsx(\"p\", {\n        class: \"bio-properties-panel-placeholder-text\",\n        children: text\n      })]\n    })\n  });\n}\n\nconst DEFAULT_LAYOUT = {\n  open: true\n};\nconst DEFAULT_DESCRIPTION = {};\n\n/**\r\n * @typedef { {\r\n *    component: import('preact').Component,\r\n *    id: String,\r\n *    isEdited?: Function\r\n * } } EntryDefinition\r\n *\r\n * @typedef { {\r\n *    autoFocusEntry: String,\r\n *    autoOpen?: Boolean,\r\n *    entries: Array<EntryDefinition>,\r\n *    id: String,\r\n *    label: String,\r\n *    remove: (event: MouseEvent) => void\r\n * } } ListItemDefinition\r\n *\r\n * @typedef { {\r\n *    add: (event: MouseEvent) => void,\r\n *    component: import('preact').Component,\r\n *    element: Object,\r\n *    id: String,\r\n *    items: Array<ListItemDefinition>,\r\n *    label: String,\r\n *    shouldSort?: Boolean,\r\n *    shouldOpen?: Boolean\r\n * } } ListGroupDefinition\r\n *\r\n * @typedef { {\r\n *    component?: import('preact').Component,\r\n *    entries: Array<EntryDefinition>,\r\n *    id: String,\r\n *    label: String,\r\n *    shouldOpen?: Boolean\r\n * } } GroupDefinition\r\n *\r\n *  @typedef { {\r\n *    [id: String]: GetDescriptionFunction\r\n * } } DescriptionConfig\r\n *\r\n * @callback { {\r\n * @param {string} id\r\n * @param {Object} element\r\n * @returns {string}\r\n * } } GetDescriptionFunction\r\n *\r\n * @typedef { {\r\n *  getEmpty: (element: object) => import('./components/Placeholder').PlaceholderDefinition,\r\n *  getMultiple: (element: Object) => import('./components/Placeholder').PlaceholderDefinition\r\n * } } PlaceholderProvider\r\n *\r\n */\n\n/**\r\n * A basic properties panel component. Describes *how* content will be rendered, accepts\r\n * data from implementor to describe *what* will be rendered.\r\n *\r\n * @param {Object} props\r\n * @param {Object|Array} props.element\r\n * @param {import('./components/Header').HeaderProvider} props.headerProvider\r\n * @param {PlaceholderProvider} [props.placeholderProvider]\r\n * @param {Array<GroupDefinition|ListGroupDefinition>} props.groups\r\n * @param {Object} [props.layoutConfig]\r\n * @param {Function} [props.layoutChanged]\r\n * @param {DescriptionConfig} [props.descriptionConfig]\r\n * @param {Function} [props.descriptionLoaded]\r\n * @param {Object} [props.eventBus]\r\n */\nfunction PropertiesPanel(props) {\n  const {\n    element,\n    headerProvider,\n    placeholderProvider,\n    groups,\n    layoutConfig = {},\n    layoutChanged,\n    descriptionConfig = {},\n    descriptionLoaded,\n    eventBus\n  } = props;\n\n  // set-up layout context\n  const [layout, setLayout] = useState(createLayout(layoutConfig));\n  useEffect(() => {\n    if (typeof layoutChanged === 'function') {\n      layoutChanged(layout);\n    }\n  }, [layout, layoutChanged]);\n  const getLayoutForKey = (key, defaultValue) => {\n    return get(layout, key, defaultValue);\n  };\n  const setLayoutForKey = (key, config) => {\n    const newLayout = assign({}, layout);\n    set(newLayout, key, config);\n    setLayout(newLayout);\n  };\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  // set-up description context\n  const description = createDescriptionContext(descriptionConfig);\n  if (typeof descriptionLoaded === 'function') {\n    descriptionLoaded(description);\n  }\n  const getDescriptionForId = (id, element) => {\n    return description[id] && description[id](element);\n  };\n  const descriptionContext = {\n    description,\n    getDescriptionForId\n  };\n  const [errors, setErrors] = useState({});\n  const onSetErrors = ({\n    errors\n  }) => setErrors(errors);\n  useEvent('propertiesPanel.setErrors', onSetErrors, eventBus);\n  const errorsContext = {\n    errors\n  };\n  const eventContext = {\n    eventBus\n  };\n  const propertiesPanelContext = {\n    element\n  };\n\n  // empty state\n  if (placeholderProvider && !element) {\n    return jsx(Placeholder, {\n      ...placeholderProvider.getEmpty()\n    });\n  }\n\n  // multiple state\n  if (placeholderProvider && isArray(element)) {\n    return jsx(Placeholder, {\n      ...placeholderProvider.getMultiple()\n    });\n  }\n  return jsx(LayoutContext.Provider, {\n    value: propertiesPanelContext,\n    children: jsx(ErrorsContext.Provider, {\n      value: errorsContext,\n      children: jsx(DescriptionContext.Provider, {\n        value: descriptionContext,\n        children: jsx(LayoutContext.Provider, {\n          value: layoutContext,\n          children: jsx(EventContext.Provider, {\n            value: eventContext,\n            children: jsxs(\"div\", {\n              class: classnames('bio-properties-panel', layout.open ? 'open' : ''),\n              children: [jsx(Header, {\n                element: element,\n                headerProvider: headerProvider\n              }), jsx(\"div\", {\n                class: \"bio-properties-panel-scroll-container\",\n                children: groups.map(group => {\n                  const {\n                    component: Component = Group,\n                    id\n                  } = group;\n                  return createElement(Component, {\n                    ...group,\n                    key: id,\n                    element: element\n                  });\n                })\n              })]\n            })\n          })\n        })\n      })\n    })\n  });\n}\n\n// helpers //////////////////\n\nfunction createLayout(overrides) {\n  return {\n    ...DEFAULT_LAYOUT,\n    ...overrides\n  };\n}\nfunction createDescriptionContext(overrides) {\n  return {\n    ...DEFAULT_DESCRIPTION,\n    ...overrides\n  };\n}\n\nfunction DropdownButton(props) {\n  const {\n    class: className,\n    children,\n    menuItems = []\n  } = props;\n  const dropdownRef = useRef(null);\n  const menuRef = useRef(null);\n  const [open, setOpen] = useState(false);\n  const close = () => setOpen(false);\n  function onDropdownToggle(event) {\n    if (menuRef.current && menuRef.current.contains(event.target)) {\n      return;\n    }\n    event.stopPropagation();\n    setOpen(open => !open);\n  }\n  function onActionClick(event, action) {\n    event.stopPropagation();\n    close();\n    action();\n  }\n  useGlobalClick([dropdownRef.current], () => close());\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-dropdown-button', {\n      open\n    }, className),\n    onClick: onDropdownToggle,\n    ref: dropdownRef,\n    children: [children, jsx(\"div\", {\n      class: \"bio-properties-panel-dropdown-button__menu\",\n      ref: menuRef,\n      children: menuItems.map((item, index) => jsx(MenuItem, {\n        onClick: onActionClick,\n        item: item\n      }, index))\n    })]\n  });\n}\nfunction MenuItem({\n  item,\n  onClick\n}) {\n  if (item.separator) {\n    return jsx(\"div\", {\n      class: \"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--separator\"\n    });\n  }\n  if (item.action) {\n    return jsx(\"button\", {\n      class: \"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--actionable\",\n      onClick: event => onClick(event, item.action),\n      children: item.entry\n    });\n  }\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-dropdown-button__menu-item\",\n    children: item.entry\n  });\n}\n\n/**\r\n *\r\n * @param {Array<null | Element>} ignoredElements\r\n * @param {Function} callback\r\n */\nfunction useGlobalClick(ignoredElements, callback) {\n  useEffect(() => {\n    /**\r\n     * @param {MouseEvent} event\r\n     */\n    function listener(event) {\n      if (ignoredElements.some(element => element && element.contains(event.target))) {\n        return;\n      }\n      callback();\n    }\n    document.addEventListener('click', listener, {\n      capture: true\n    });\n    return () => document.removeEventListener('click', listener, {\n      capture: true\n    });\n  }, [...ignoredElements, callback]);\n}\n\nfunction HeaderButton(props) {\n  const {\n    children = null,\n    class: classname,\n    onClick = () => {},\n    ...otherProps\n  } = props;\n  return jsx(\"button\", {\n    ...otherProps,\n    onClick: onClick,\n    class: classnames('bio-properties-panel-group-header-button', classname),\n    children: children\n  });\n}\n\nfunction CollapsibleEntry(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    open: shouldOpen,\n    remove\n  } = props;\n  const [open, setOpen] = useState(shouldOpen);\n  const toggleOpen = () => setOpen(!open);\n  const {\n    onShow\n  } = useContext(LayoutContext);\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow: useCallback(() => {\n      setOpen(true);\n      if (isFunction(onShow)) {\n        onShow();\n      }\n    }, [onShow, setOpen])\n  };\n\n  // todo(pinussilvestrus): translate once we have a translate mechanism for the core\n  const placeholderLabel = '<empty>';\n  return jsxs(\"div\", {\n    \"data-entry-id\": id,\n    class: classnames('bio-properties-panel-collapsible-entry', open ? 'open' : ''),\n    children: [jsxs(\"div\", {\n      class: \"bio-properties-panel-collapsible-entry-header\",\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: label || placeholderLabel,\n        class: classnames('bio-properties-panel-collapsible-entry-header-title', !label && 'empty'),\n        children: label || placeholderLabel\n      }), jsx(\"button\", {\n        title: \"Toggle list item\",\n        class: \"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow\",\n        children: jsx(ArrowIcon, {\n          class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n        })\n      }), remove ? jsx(\"button\", {\n        title: \"Delete item\",\n        class: \"bio-properties-panel-remove-entry\",\n        onClick: remove,\n        children: jsx(DeleteIcon, {})\n      }) : null]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-collapsible-entry-entries', open ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return createElement(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\n\nfunction ListItem(props) {\n  const {\n    autoFocusEntry,\n    autoOpen\n  } = props;\n\n  // focus specified entry on auto open\n  useEffect(() => {\n    if (autoOpen && autoFocusEntry) {\n      const entry = query(`[data-entry-id=\"${autoFocusEntry}\"]`);\n      const focusableInput = query('.bio-properties-panel-input', entry);\n      if (focusableInput) {\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n      }\n    }\n  }, [autoOpen, autoFocusEntry]);\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-list-item\",\n    children: jsx(CollapsibleEntry, {\n      ...props,\n      open: autoOpen\n    })\n  });\n}\n\nconst noop$2 = () => {};\n\n/**\r\n * @param {import('../PropertiesPanel').ListGroupDefinition} props\r\n */\nfunction ListGroup(props) {\n  const {\n    add,\n    element,\n    id,\n    items,\n    label,\n    shouldOpen = true,\n    shouldSort = true\n  } = props;\n  const groupRef = useRef(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], false);\n  const [sticky, setSticky] = useState(false);\n  const onShow = useCallback(() => setOpen(true), [setOpen]);\n  const [ordering, setOrdering] = useState([]);\n  const [newItemAdded, setNewItemAdded] = useState(false);\n  const prevItems = usePrevious(items);\n  const prevElement = usePrevious(element);\n  const elementChanged = element !== prevElement;\n  const shouldHandleEffects = !elementChanged && (shouldSort || shouldOpen);\n\n  // reset initial ordering when element changes (before first render)\n  if (elementChanged) {\n    setOrdering(createOrdering(shouldSort ? sortItems(items) : items));\n  }\n\n  // keep ordering in sync to items - and open changes\n\n  // (0) set initial ordering from given items\n  useEffect(() => {\n    if (!prevItems || !shouldSort) {\n      setOrdering(createOrdering(items));\n    }\n  }, [items, element]);\n\n  // (1) items were added\n  useEffect(() => {\n    if (shouldHandleEffects && prevItems && items.length > prevItems.length) {\n      let add = [];\n      items.forEach(item => {\n        if (!ordering.includes(item.id)) {\n          add.push(item.id);\n        }\n      });\n      let newOrdering = ordering;\n\n      // open if not open and configured\n      if (!open && shouldOpen) {\n        toggleOpen();\n\n        // if I opened and I should sort, then sort items\n        if (shouldSort) {\n          newOrdering = createOrdering(sortItems(items));\n        }\n      }\n\n      // add new items on top or bottom depending on sorting behavior\n      newOrdering = newOrdering.filter(item => !add.includes(item));\n      if (shouldSort) {\n        newOrdering.unshift(...add);\n      } else {\n        newOrdering.push(...add);\n      }\n      setOrdering(newOrdering);\n      setNewItemAdded(true);\n    } else {\n      setNewItemAdded(false);\n    }\n  }, [items, open, shouldHandleEffects]);\n\n  // (2) sort items on open if shouldSort is set\n  useEffect(() => {\n    if (shouldSort && open && !newItemAdded) {\n      setOrdering(createOrdering(sortItems(items)));\n    }\n  }, [open, shouldSort]);\n\n  // (3) items were deleted\n  useEffect(() => {\n    if (shouldHandleEffects && prevItems && items.length < prevItems.length) {\n      let keep = [];\n      ordering.forEach(o => {\n        if (getItem(items, o)) {\n          keep.push(o);\n        }\n      });\n      setOrdering(keep);\n    }\n  }, [items, shouldHandleEffects]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const toggleOpen = () => setOpen(!open);\n  const hasItems = !!items.length;\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow\n  };\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [jsxs(\"div\", {\n      class: classnames('bio-properties-panel-group-header', hasItems ? '' : 'empty', hasItems && open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: hasItems ? toggleOpen : noop$2,\n      children: [jsx(\"div\", {\n        title: label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: label\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [add ? jsxs(\"button\", {\n          title: \"Create new list item\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-add-entry\",\n          onClick: add,\n          children: [jsx(CreateIcon, {}), !hasItems ? jsx(\"span\", {\n            class: \"bio-properties-panel-add-entry-label\",\n            children: \"Create\"\n          }) : null]\n        }) : null, hasItems ? jsx(\"div\", {\n          title: `List contains ${items.length} item${items.length != 1 ? 's' : ''}`,\n          class: \"bio-properties-panel-list-badge\",\n          children: items.length\n        }) : null, hasItems ? jsx(\"button\", {\n          title: \"Toggle section\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        }) : null]\n      })]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-list', open && hasItems ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: ordering.map((o, index) => {\n          const item = getItem(items, o);\n          if (!item) {\n            return;\n          }\n          const {\n            id\n          } = item;\n\n          // if item was added, open first or last item based on ordering\n          const autoOpen = newItemAdded && (shouldSort ? index === 0 : index === ordering.length - 1);\n          return createElement(ListItem, {\n            ...item,\n            autoOpen: autoOpen,\n            element: element,\n            index: index,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\n\n// helpers ////////////////////\n\n/**\r\n * Sorts given items alphanumeric by label\r\n */\nfunction sortItems(items) {\n  return sortBy(items, i => i.label.toLowerCase());\n}\nfunction getItem(items, id) {\n  return find(items, i => i.id === id);\n}\nfunction createOrdering(items) {\n  return items.map(i => i.id);\n}\n\nfunction Description(props) {\n  const {\n    element,\n    forId,\n    value\n  } = props;\n  const contextDescription = useDescriptionContext(forId, element);\n  const description = value || contextDescription;\n  if (description) {\n    return jsx(\"div\", {\n      class: \"bio-properties-panel-description\",\n      children: description\n    });\n  }\n}\n\nfunction Checkbox(props) {\n  const {\n    id,\n    label,\n    onChange,\n    disabled,\n    value = false,\n    onFocus,\n    onBlur\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.checked);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  const ref = useShowEntryEvent(id);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-checkbox\",\n    children: [jsx(\"input\", {\n      ref: ref,\n      id: prefixId$7(id),\n      name: id,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      type: \"checkbox\",\n      class: \"bio-properties-panel-input\",\n      onChange: handleChange,\n      checked: localValue,\n      disabled: disabled\n    }), jsx(\"label\", {\n      for: prefixId$7(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    })]\n  });\n}\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.element\r\n * @param {String} props.id\r\n * @param {String} props.description\r\n * @param {String} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {boolean} [props.disabled]\r\n */\nfunction CheckboxEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur\n  } = props;\n  const value = getValue(element);\n  const error = useError(id);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-checkbox-entry\",\n    \"data-entry-id\": id,\n    children: [jsx(Checkbox, {\n      disabled: disabled,\n      id: id,\n      label: label,\n      onChange: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: value\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$7(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId$7(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nconst useBufferedFocus = function (editor, ref) {\n  const [buffer, setBuffer] = useState(undefined);\n  ref.current = useMemo(() => ({\n    focus: offset => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [editor]);\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [editor, buffer]);\n};\nconst CodeEditor = forwardRef((props, ref) => {\n  const {\n    value,\n    onInput,\n    onFeelToggle,\n    onLint = () => {},\n    disabled,\n    tooltipContainer,\n    variables\n  } = props;\n  const inputRef = useRef();\n  const [editor, setEditor] = useState();\n  const [localValue, setLocalValue] = useState(value || '');\n  useBufferedFocus(editor, ref);\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n  useEffect(() => {\n    let editor;\n\n    /* Trigger FEEL toggle when\r\n     *\r\n     * - `backspace` is pressed\r\n     * - AND the cursor is at the beginning of the input\r\n     */\n    const onKeyDown = e => {\n      if (e.key !== 'Backspace' || !editor) {\n        return;\n      }\n      const selection = editor.getSelection();\n      const range = selection.ranges[selection.mainIndex];\n      if (range.from === 0 && range.to === 0) {\n        onFeelToggle();\n      }\n    };\n    editor = new FeelEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      onKeyDown: onKeyDown,\n      onLint: onLint,\n      tooltipContainer: tooltipContainer,\n      value: localValue,\n      variables: variables\n    });\n    setEditor(editor);\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === localValue) {\n      return;\n    }\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [value]);\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    editor.setVariables(variables);\n  }, [variables]);\n  const handleClick = () => {\n    ref.current.focus();\n  };\n  return jsx(\"div\", {\n    class: classnames('bio-properties-panel-feel-editor-container', disabled ? 'disabled' : null),\n    children: jsx(\"div\", {\n      name: props.name,\n      class: classnames('bio-properties-panel-input', localValue ? 'edited' : null),\n      ref: inputRef,\n      onClick: handleClick\n    })\n  });\n});\n\nfunction FeelIndicator(props) {\n  const {\n    active\n  } = props;\n  if (!active) {\n    return null;\n  }\n  return jsx(\"span\", {\n    class: \"bio-properties-panel-feel-indicator\",\n    children: \"=\"\n  });\n}\n\nconst noop$1 = () => {};\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.label\r\n * @param {String} props.feel\r\n */\nfunction FeelIcon(props) {\n  const {\n    label,\n    feel = false,\n    active,\n    disabled = false,\n    onClick = noop$1\n  } = props;\n  const feelRequiredLabel = ' must be a FEEL expression';\n  const feelOptionalLabel = ' can optionally be a FEEL expression';\n  const handleClick = e => {\n    onClick(e);\n\n    // when pointer event was created from keyboard, keep focus on button\n    if (!e.pointerType) {\n      e.stopPropagation();\n    }\n  };\n  return jsx(\"button\", {\n    class: classnames('bio-properties-panel-feel-icon', active ? 'active' : null, feel === 'required' ? 'required' : 'optional'),\n    onClick: handleClick,\n    disabled: feel === 'required' || disabled,\n    title: label + (feel === 'required' ? feelRequiredLabel : feelOptionalLabel),\n    children: feel === 'required' ? jsx(FeelRequiredIcon, {}) : jsx(FeelOptionalIcon, {})\n  });\n}\n\nconst noop = () => {};\nfunction FeelTextfield(props) {\n  const {\n    debounce,\n    id,\n    label,\n    onInput,\n    onError,\n    feel,\n    value = '',\n    disabled = false,\n    variables,\n    tooltipContainer,\n    OptionalComponent = OptionalFeelInput\n  } = props;\n  const [localValue, _setLocalValue] = useState(value);\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n  const feelActive = localValue.startsWith('=') || feel === 'required';\n  const feelOnlyValue = localValue.startsWith('=') ? localValue.substring(1) : localValue;\n  const [focus, _setFocus] = useState(undefined);\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n    _setFocus(position + offset);\n  };\n  const handleInputCallback = useMemo(() => {\n    return debounce(newValue => {\n      onInput(newValue);\n    });\n  }, [onInput, debounce]);\n  const setLocalValue = newValue => {\n    _setLocalValue(newValue);\n    if (!newValue || newValue === '=') {\n      handleInputCallback(undefined);\n    } else {\n      handleInputCallback(newValue);\n    }\n  };\n  const handleFeelToggle = useStaticCallback(() => {\n    if (feel === 'required') {\n      return;\n    }\n    if (!feelActive) {\n      setLocalValue('=' + localValue);\n    } else {\n      setLocalValue(feelOnlyValue);\n    }\n  });\n  const handleLocalInput = newValue => {\n    if (feelActive) {\n      newValue = '=' + newValue;\n    }\n    if (newValue === localValue) {\n      return;\n    }\n    setLocalValue(newValue);\n    if (!feelActive && newValue.startsWith('=')) {\n      // focus is behind `=` sign that will be removed\n      setFocus(-1);\n    }\n  };\n  const handleLint = useStaticCallback(lint => {\n    if (!(lint && lint.length)) {\n      onError(undefined);\n      return;\n    }\n    const error = lint[0];\n    const message = `${error.source}: ${error.message}`;\n    onError(message);\n  });\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [focus]);\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    // External value change removed content => keep FEEL configuration\n    if (!value) {\n      setLocalValue(feelActive ? '=' : '');\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n\n  // copy-paste integration\n  useEffect(() => {\n    const copyHandler = event => {\n      if (!feelActive) {\n        return;\n      }\n      event.clipboardData.setData('application/FEEL', event.clipboardData.getData('text'));\n    };\n    const pasteHandler = event => {\n      if (feelActive) {\n        return;\n      }\n      const data = event.clipboardData.getData('application/FEEL');\n      if (data) {\n        setTimeout(() => {\n          handleFeelToggle();\n          setFocus();\n        });\n      }\n    };\n    containerRef.current.addEventListener('copy', copyHandler);\n    containerRef.current.addEventListener('cut', copyHandler);\n    containerRef.current.addEventListener('paste', pasteHandler);\n    return () => {\n      containerRef.current.removeEventListener('copy', copyHandler);\n      containerRef.current.removeEventListener('cut', copyHandler);\n      containerRef.current.removeEventListener('paste', pasteHandler);\n    };\n  }, [containerRef, feelActive, handleFeelToggle, setFocus]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-feel-entry\",\n    children: [jsxs(\"label\", {\n      for: prefixId$6(id),\n      class: \"bio-properties-panel-label\",\n      onClick: () => setFocus(),\n      children: [label, jsx(FeelIcon, {\n        label: label,\n        feel: feel,\n        onClick: handleFeelToggle,\n        active: feelActive\n      })]\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-feel-container\",\n      ref: containerRef,\n      children: [jsx(FeelIndicator, {\n        active: feelActive,\n        disabled: feel !== 'optional' || disabled,\n        onClick: handleFeelToggle\n      }), feelActive ? jsx(CodeEditor, {\n        id: prefixId$6(id),\n        name: id,\n        onInput: handleLocalInput,\n        disabled: disabled,\n        onFeelToggle: () => {\n          handleFeelToggle();\n          setFocus(true);\n        },\n        onLint: handleLint,\n        value: feelOnlyValue,\n        variables: variables,\n        ref: editorRef,\n        tooltipContainer: tooltipContainer\n      }) : jsx(OptionalComponent, {\n        ...props,\n        onInput: handleLocalInput,\n        value: localValue,\n        ref: editorRef\n      })]\n    })]\n  });\n}\nconst OptionalFeelInput = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: position => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      if (typeof position === 'number') {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n    }\n  };\n  return jsx(\"input\", {\n    id: prefixId$6(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: value || ''\n  });\n});\nconst OptionalFeelTextArea = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      input.setSelectionRange(0, 0);\n    }\n  };\n  return jsx(\"textarea\", {\n    id: prefixId$6(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: value || '',\n    \"data-gramm\": \"false\"\n  });\n});\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.element\r\n * @param {String} props.id\r\n * @param {String} props.description\r\n * @param {Boolean} props.debounce\r\n * @param {Boolean} props.disabled\r\n * @param {String} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.validate\r\n */\nfunction FeelEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    feel,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    validate,\n    show = noop,\n    example,\n    variables,\n    onFocus,\n    onBlur\n  } = props;\n  const [cachedInvalidValue, setCachedInvalidValue] = useState(null);\n  const [validationError, setValidationError] = useState(null);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  const previousValue = usePrevious(value);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setValidationError(newValidationError);\n    }\n  }, [value]);\n  const onInput = useStaticCallback(newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    if (newValidationError) {\n      setCachedInvalidValue(newValue);\n    } else {\n      // don't create multiple commandStack entries for the same value\n      if (newValue !== value) {\n        setValue(newValue);\n      }\n    }\n    setValidationError(newValidationError);\n  });\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n  if (previousValue === value && validationError) {\n    value = cachedInvalidValue;\n  }\n  const temporaryError = useError(id);\n  const error = localError || temporaryError || validationError;\n  return jsxs(\"div\", {\n    class: classnames(props.class, 'bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(FeelTextfield, {\n      debounce: debounce,\n      disabled: disabled,\n      feel: feel,\n      id: id,\n      label: label,\n      onInput: onInput,\n      onError: onError,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      example: example,\n      show: show,\n      value: value,\n      variables: variables,\n      tooltipContainer: tooltipContainer,\n      OptionalComponent: props.OptionalComponent\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.element\r\n * @param {String} props.id\r\n * @param {String} props.description\r\n * @param {Boolean} props.debounce\r\n * @param {Boolean} props.disabled\r\n * @param {String} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {Function} props.validate\r\n */\nfunction FeelTextArea(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-textarea\",\n    OptionalComponent: OptionalFeelTextArea,\n    ...props\n  });\n}\nfunction isEdited$6(node) {\n  return node && (!!node.value || node.classList.contains('edited'));\n}\n\n// helpers /////////////////\n\nfunction prefixId$6(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction List(props) {\n  const {\n    id,\n    element,\n    items = [],\n    component,\n    label = '<empty>',\n    open: shouldOpen,\n    onAdd,\n    onRemove,\n    autoFocusEntry,\n    compareFn,\n    ...restProps\n  } = props;\n  const [open, setOpen] = useState(!!shouldOpen);\n  const hasItems = !!items.length;\n  const toggleOpen = () => hasItems && setOpen(!open);\n  const opening = !usePrevious(open) && open;\n  const elementChanged = usePrevious(element) !== element;\n  const shouldReset = opening || elementChanged;\n  const sortedItems = useSortedItems(items, compareFn, shouldReset);\n  const newItems = useNewItems(items, elementChanged);\n  useEffect(() => {\n    if (open && !hasItems) {\n      setOpen(false);\n    }\n  }, [open, hasItems]);\n\n  /**\r\n   * @param {MouseEvent} event\r\n   */\n  function addItem(event) {\n    event.stopPropagation();\n    onAdd();\n    if (!open) {\n      setOpen(true);\n    }\n  }\n  return jsxs(\"div\", {\n    \"data-entry-id\": id,\n    class: classnames('bio-properties-panel-entry', 'bio-properties-panel-list-entry', hasItems ? '' : 'empty', open ? 'open' : ''),\n    children: [jsxs(\"div\", {\n      class: \"bio-properties-panel-list-entry-header\",\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: label,\n        class: classnames('bio-properties-panel-list-entry-header-title', open && 'open'),\n        children: label\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-list-entry-header-buttons\",\n        children: [jsxs(\"button\", {\n          title: \"Create new list item\",\n          onClick: addItem,\n          class: \"bio-properties-panel-add-entry\",\n          children: [jsx(CreateIcon, {}), !hasItems ? jsx(\"span\", {\n            class: \"bio-properties-panel-add-entry-label\",\n            children: \"Create\"\n          }) : null]\n        }), hasItems && jsx(\"div\", {\n          title: `List contains ${items.length} item${items.length != 1 ? 's' : ''}`,\n          class: \"bio-properties-panel-list-badge\",\n          children: items.length\n        }), hasItems && jsx(\"button\", {\n          title: \"Toggle list item\",\n          class: \"bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        })]\n      })]\n    }), hasItems && jsx(ItemsList, {\n      ...restProps,\n      autoFocusEntry: autoFocusEntry,\n      component: component,\n      element: element,\n      id: id,\n      items: sortedItems,\n      newItems: newItems,\n      onRemove: onRemove,\n      open: open\n    })]\n  });\n}\nfunction ItemsList(props) {\n  const {\n    autoFocusEntry,\n    component: Component,\n    element,\n    id,\n    items,\n    newItems,\n    onRemove,\n    open,\n    ...restProps\n  } = props;\n  const getKey = useKeyFactory();\n  const newItem = newItems[0];\n  useEffect(() => {\n    if (newItem && autoFocusEntry) {\n      // (0) select the parent entry (containing all list items)\n      const entry = query(`[data-entry-id=\"${id}\"]`);\n\n      // (1) select the first input or a custom element to be focussed\n      const selector = typeof autoFocusEntry === 'boolean' ? '.bio-properties-panel-input' : autoFocusEntry;\n      const focusableInput = query(selector, entry);\n\n      // (2) set focus\n      if (focusableInput) {\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n      }\n    }\n  }, [newItem, autoFocusEntry, id]);\n  return jsx(\"ol\", {\n    class: classnames('bio-properties-panel-list-entry-items', open ? 'open' : ''),\n    children: items.map((item, index) => {\n      const key = getKey(item);\n      return jsxs(\"li\", {\n        class: \"bio-properties-panel-list-entry-item\",\n        children: [jsx(Component, {\n          ...restProps,\n          element: element,\n          id: id,\n          index: index,\n          item: item,\n          open: item === newItem\n        }), onRemove && jsx(\"button\", {\n          type: \"button\",\n          title: \"Delete item\",\n          class: \"bio-properties-panel-remove-entry bio-properties-panel-remove-list-entry\",\n          onClick: () => onRemove && onRemove(item),\n          children: jsx(DeleteIcon, {})\n        })]\n      }, key);\n    })\n  });\n}\n\n/**\r\n * Place new items in the beginning of the list and sort the rest with provided function.\r\n *\r\n * @template Item\r\n * @param {Item[]} currentItems\r\n * @param {(a: Item, b: Item) => 0 | 1 | -1} [compareFn] function used to sort items\r\n * @param {boolean} [shouldReset=false] set to `true` to reset state of the hook\r\n * @returns {Item[]}\r\n */\nfunction useSortedItems(currentItems, compareFn, shouldReset = false) {\n  const itemsRef = useRef(currentItems.slice());\n\n  // (1) Reset and optionally sort.\n  if (shouldReset) {\n    itemsRef.current = currentItems.slice();\n    if (compareFn) {\n      itemsRef.current.sort(compareFn);\n    }\n  } else {\n    const items = itemsRef.current;\n\n    // (2) Add new item to the list.\n    for (const item of currentItems) {\n      if (!items.includes(item)) {\n        // Unshift or push depending on whether we have a compareFn\n        compareFn ? items.unshift(item) : items.push(item);\n      }\n    }\n\n    // (3) Filter out removed items.\n    itemsRef.current = items.filter(item => currentItems.includes(item));\n  }\n  return itemsRef.current;\n}\nfunction useNewItems(items = [], shouldReset) {\n  const previousItems = usePrevious(items.slice()) || [];\n  if (shouldReset) {\n    return [];\n  }\n  return previousItems ? items.filter(item => !previousItems.includes(item)) : [];\n}\n\nfunction NumberField(props) {\n  const {\n    debounce,\n    disabled,\n    id,\n    label,\n    max,\n    min,\n    onInput,\n    step,\n    value = '',\n    onFocus,\n    onBlur\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = useMemo(() => {\n    return debounce(event => {\n      const {\n        validity,\n        value\n      } = event.target;\n      if (validity.valid) {\n        onInput(value ? parseFloat(value) : undefined);\n      }\n    });\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-numberfield\",\n    children: [jsx(\"label\", {\n      for: prefixId$5(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    }), jsx(\"input\", {\n      id: prefixId$5(id),\n      type: \"number\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      max: max,\n      min: min,\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      step: step,\n      value: localValue\n    })]\n  });\n}\n\n/**\r\n * @param {Object} props\r\n * @param {Boolean} props.debounce\r\n * @param {String} props.description\r\n * @param {Boolean} props.disabled\r\n * @param {Object} props.element\r\n * @param {Function} props.getValue\r\n * @param {String} props.id\r\n * @param {String} props.label\r\n * @param {String} props.max\r\n * @param {String} props.min\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {String} props.step\r\n * @param {Function} props.validate\r\n */\nfunction NumberFieldEntry(props) {\n  const {\n    debounce,\n    description,\n    disabled,\n    element,\n    getValue,\n    id,\n    label,\n    max,\n    min,\n    setValue,\n    step,\n    onFocus,\n    onBlur,\n    validate\n  } = props;\n  const [cachedInvalidValue, setCachedInvalidValue] = useState(null);\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  const previousValue = usePrevious(value);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    if (newValidationError) {\n      setCachedInvalidValue(newValue);\n    } else {\n      setValue(newValue);\n    }\n    setLocalError(newValidationError);\n  };\n  if (previousValue === value && localError) {\n    value = cachedInvalidValue;\n  }\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(NumberField, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onInput: onInput,\n      max: max,\n      min: min,\n      step: step,\n      value: value\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$5(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$5(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction Select(props) {\n  const {\n    id,\n    label,\n    onChange,\n    options = [],\n    value = '',\n    disabled,\n    onFocus,\n    onBlur\n  } = props;\n  const ref = useShowEntryEvent(id);\n  const [localValue, setLocalValue] = useState(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.value);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-select\",\n    children: [jsx(\"label\", {\n      for: prefixId$4(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    }), jsx(\"select\", {\n      ref: ref,\n      id: prefixId$4(id),\n      name: id,\n      class: \"bio-properties-panel-input\",\n      onInput: handleChange,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue,\n      disabled: disabled,\n      children: options.map((option, idx) => {\n        return jsx(\"option\", {\n          value: option.value,\n          disabled: option.disabled,\n          children: option.label\n        }, idx);\n      })\n    })]\n  });\n}\n\n/**\r\n * @param {object} props\r\n * @param {object} props.element\r\n * @param {string} props.id\r\n * @param {string} [props.description]\r\n * @param {string} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {Function} props.getOptions\r\n * @param {boolean} [props.disabled]\r\n */\nfunction SelectEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    getOptions,\n    disabled,\n    onFocus,\n    onBlur\n  } = props;\n  const value = getValue(element);\n  const options = getOptions(element);\n  const error = useError(id);\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(Select, {\n      id: id,\n      label: label,\n      value: value,\n      onChange: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      options: options,\n      disabled: disabled\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$4(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$4(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction Simple(props) {\n  const {\n    debounce,\n    disabled,\n    element,\n    getValue,\n    id,\n    onBlur,\n    onFocus,\n    setValue\n  } = props;\n  const value = getValue(element);\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = useMemo(() => {\n    return debounce(({\n      target\n    }) => setValue(target.value.length ? target.value : undefined));\n  }, [setValue, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-simple\",\n    children: jsx(\"input\", {\n      id: prefixId$3(id),\n      type: \"text\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      onInput: handleInput,\n      \"aria-label\": localValue || '<empty>',\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue\n    }, element)\n  });\n}\nfunction isEdited$3(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$3(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction TextArea(props) {\n  const {\n    id,\n    label,\n    rows = 2,\n    debounce,\n    onInput,\n    value = '',\n    disabled,\n    monospace,\n    onFocus,\n    onBlur\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const ref = useShowEntryEvent(id);\n  const handleInputCallback = useMemo(() => {\n    return debounce(({\n      target\n    }) => onInput(target.value.length ? target.value : undefined));\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-textarea\",\n    children: [jsx(\"label\", {\n      for: prefixId$2(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    }), jsx(\"textarea\", {\n      ref: ref,\n      id: prefixId$2(id),\n      name: id,\n      spellCheck: \"false\",\n      class: classnames('bio-properties-panel-input', monospace ? 'bio-properties-panel-input-monospace' : ''),\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      rows: rows,\n      value: localValue,\n      disabled: disabled,\n      \"data-gramm\": \"false\"\n    })]\n  });\n}\n\n/**\r\n * @param {object} props\r\n * @param {object} props.element\r\n * @param {string} props.id\r\n * @param {string} props.description\r\n * @param {boolean} props.debounce\r\n * @param {string} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {number} props.rows\r\n * @param {boolean} props.monospace\r\n * @param {boolean} [props.disabled]\r\n */\nfunction TextAreaEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    label,\n    getValue,\n    setValue,\n    rows,\n    monospace,\n    disabled,\n    onFocus,\n    onBlur\n  } = props;\n  const value = getValue(element);\n  const error = useError(id);\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(TextArea, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      rows: rows,\n      debounce: debounce,\n      monospace: monospace,\n      disabled: disabled\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$2(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$2(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction Textfield(props) {\n  const {\n    debounce,\n    disabled = false,\n    id,\n    label,\n    onInput,\n    onFocus,\n    onBlur,\n    value = ''\n  } = props;\n  const [localValue, setLocalValue] = useState(value || '');\n  const ref = useShowEntryEvent(id);\n  const handleInputCallback = useMemo(() => {\n    return debounce(({\n      target\n    }) => onInput(target.value.length ? target.value : undefined));\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-textfield\",\n    children: [jsx(\"label\", {\n      for: prefixId$1(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    }), jsx(\"input\", {\n      ref: ref,\n      id: prefixId$1(id),\n      type: \"text\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue\n    })]\n  });\n}\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.element\r\n * @param {String} props.id\r\n * @param {String} props.description\r\n * @param {Boolean} props.debounce\r\n * @param {Boolean} props.disabled\r\n * @param {String} props.label\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n * @param {Function} props.validate\r\n */\nfunction TextfieldEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    validate,\n    onFocus,\n    onBlur\n  } = props;\n  const [cachedInvalidValue, setCachedInvalidValue] = useState(null);\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  const previousValue = usePrevious(value);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    if (newValidationError) {\n      setCachedInvalidValue(newValue);\n    } else {\n      setValue(newValue);\n    }\n    setLocalError(newValidationError);\n  };\n  if (previousValue === value && localError) {\n    value = cachedInvalidValue;\n  }\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(Textfield, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onInput: onInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: value\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$1(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$1(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction ToggleSwitch(props) {\n  const {\n    id,\n    label,\n    onInput,\n    value,\n    switcherLabel,\n    onFocus,\n    onBlur\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = async () => {\n    onInput(!value);\n  };\n  const handleInput = e => {\n    handleInputCallback();\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-toggle-switch\",\n    children: [jsx(\"label\", {\n      class: \"bio-properties-panel-label\",\n      for: prefixId(id),\n      children: label\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-field-wrapper\",\n      children: [jsxs(\"label\", {\n        class: \"bio-properties-panel-toggle-switch__switcher\",\n        children: [jsx(\"input\", {\n          id: prefixId(id),\n          class: \"bio-properties-panel-input\",\n          type: \"checkbox\",\n          onFocus: onFocus,\n          onBlur: onBlur,\n          name: id,\n          onInput: handleInput,\n          checked: !!localValue\n        }), jsx(\"span\", {\n          class: \"bio-properties-panel-toggle-switch__slider\"\n        })]\n      }), jsx(\"p\", {\n        class: \"bio-properties-panel-toggle-switch__label\",\n        children: switcherLabel\n      })]\n    })]\n  });\n}\n\n/**\r\n * @param {Object} props\r\n * @param {Object} props.element\r\n * @param {String} props.id\r\n * @param {String} props.description\r\n * @param {String} props.label\r\n * @param {String} props.switcherLabel\r\n * @param {Function} props.getValue\r\n * @param {Function} props.setValue\r\n * @param {Function} props.onFocus\r\n * @param {Function} props.onBlur\r\n */\nfunction ToggleSwitchEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    switcherLabel,\n    getValue,\n    setValue,\n    onFocus,\n    onBlur\n  } = props;\n  const value = getValue(element);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry\",\n    \"data-entry-id\": id,\n    children: [jsx(ToggleSwitch, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      switcherLabel: switcherLabel\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nconst DEFAULT_DEBOUNCE_TIME = 300;\nfunction debounceInput(debounceDelay) {\n  return function _debounceInput(fn) {\n    if (debounceDelay !== false) {\n      var debounceTime = isNumber(debounceDelay) ? debounceDelay : DEFAULT_DEBOUNCE_TIME;\n      return debounce(fn, debounceTime);\n    } else {\n      return fn;\n    }\n  };\n}\ndebounceInput.$inject = ['config.debounceInput'];\n\nvar index = {\n  debounceInput: ['factory', debounceInput]\n};\n\nexport { ArrowIcon, CheckboxEntry, CollapsibleEntry, CreateIcon, index as DebounceInputModule, DeleteIcon, DescriptionContext, Description as DescriptionEntry, DropdownButton, ErrorsContext, EventContext, ExternalLinkIcon, FeelEntry, FeelOptionalIcon, FeelRequiredIcon, FeelTextArea as FeelTextAreaEntry, Group, Header, HeaderButton, LayoutContext, List as ListEntry, ListGroup, ListItem, NumberFieldEntry, Placeholder, PropertiesPanel, LayoutContext as PropertiesPanelContext, SelectEntry, Simple as SimpleEntry, TextAreaEntry, TextfieldEntry as TextFieldEntry, ToggleSwitchEntry, isEdited$7 as isCheckboxEntryEdited, isEdited$6 as isFeelEntryEdited, isEdited$5 as isNumberFieldEntryEdited, isEdited$4 as isSelectEntryEdited, isEdited$3 as isSimpleEntryEdited, isEdited$2 as isTextAreaEntryEdited, isEdited$1 as isTextFieldEntryEdited, isEdited as isToggleSwitchEntryEdited, useDescriptionContext, useError, useEvent, useKeyFactory, useLayoutState, usePrevious, useShowEntryEvent, useStaticCallback, useStickyIntersectionObserver };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext } from 'preact';\n\n/**\n * @param {string} type\n * @param {boolean} [strict]\n *\n * @returns {any}\n */\nfunction getService(type, strict) {}\n\nconst PropertiesPanelContext = createContext({\n  getService\n});\n\nexport default PropertiesPanelContext;","import Big from 'big.js';\n\nexport function arrayAdd(array, index, item) {\n  const copy = [ ...array ];\n\n  copy.splice(index, 0, item);\n\n  return copy;\n}\n\nexport function arrayRemove(array, index) {\n  const copy = [ ...array ];\n\n  copy.splice(index, 1);\n\n  return copy;\n}\n\nexport function prefixId(id) {\n  return `fjs-properties-panel-${ id }`;\n}\n\n\nexport function countDecimals(number) {\n  const num = Big(number);\n  if (num.toString() === num.toFixed(0)) return 0;\n  return num.toFixed().split('.')[1].length || 0;\n}\n\nexport function isValidNumber(value) {\n  return (typeof value === 'number' || typeof value === 'string') && value !== '' && !isNaN(Number(value));\n}\n\nexport function stopPropagation(listener) {\n  return (event) => {\n    event.stopPropagation();\n\n    listener(event);\n  };\n}\n\nexport function textToLabel(text) {\n\n  if (typeof text != 'string') return null;\n\n  for (const line of text.split('\\n')) {\n\n    const displayLine = line.trim();\n\n    // we use the first non-whitespace line in the text as label\n    if (displayLine !== '') {\n      return displayLine;\n    }\n  }\n\n  return null;\n}\n\nexport const INPUTS = [\n  'checkbox',\n  'checklist',\n  'datetime',\n  'number',\n  'radio',\n  'select',\n  'taglist',\n  'textfield',\n  'textarea'\n];\n\nexport const VALUES_INPUTS = [\n  'checklist',\n  'radio',\n  'select',\n  'taglist'\n];","import {\n  textToLabel\n} from './Util';\n\nimport { iconsByType } from '../../render/components/icons';\n\nconst labelsByType = {\n  button: 'BUTTON',\n  checkbox: 'CHECKBOX',\n  checklist: 'CHECKLIST',\n  columns: 'COLUMNS',\n  default: 'FORM',\n  datetime: 'DATETIME',\n  image: 'IMAGE VIEW',\n  number: 'NUMBER',\n  radio: 'RADIO',\n  select: 'SELECT',\n  taglist: 'TAGLIST',\n  text: 'TEXT VIEW',\n  textfield: 'TEXT FIELD',\n  textarea: 'TEXT AREA',\n};\n\nexport const PropertiesPanelHeaderProvider = {\n\n  getElementLabel: (field) => {\n    const {\n      type\n    } = field;\n\n    if (type === 'text') {\n      return textToLabel(field.text);\n    }\n\n    if (type === 'image') {\n      return field.alt;\n    }\n\n    if (type === 'default') {\n      return field.id;\n    }\n\n    return field.label;\n  },\n\n  getElementIcon: (field) => {\n    const {\n      type\n    } = field;\n\n    const Icon = iconsByType(type);\n\n    if (Icon) {\n      return () => <Icon width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" />;\n    }\n  },\n\n  getTypeLabel: (field) => {\n    const {\n      type\n    } = field;\n\n    return labelsByType[type];\n  }\n};","/**\n * Provide placeholders for empty and multiple state.\n */\nexport const PropertiesPanelPlaceholderProvider = {\n\n  getEmpty: () => {\n    return {\n      text: 'Select a form field to edit its properties.'\n    };\n  },\n\n  getMultiple: () => {\n    return {\n      text: 'Multiple form fields are selected. Select a single form field to edit its properties.'\n    };\n  }\n};","import { get } from 'min-dash';\n\nimport { SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function ActionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (type === 'button') {\n    entries.push({\n      id: 'action',\n      component: Action,\n      editField: editField,\n      field: field,\n      isEdited: isSelectEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Action(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const path = [ 'action' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  const getOptions = () => [\n    {\n      label: 'Submit',\n      value: 'submit'\n    },\n    {\n      label: 'Reset',\n      value: 'reset'\n    }\n  ];\n\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label: 'Action',\n    setValue\n  });\n}","import {\n  useContext\n} from 'preact/hooks';\n\nimport { FormPropertiesPanelContext } from '../context';\n\n\nexport default function(type, strict) {\n  const {\n    getService\n  } = useContext(FormPropertiesPanelContext);\n\n  return getService(type, strict);\n}","import { getSchemaVariables } from '@bpmn-io/form-js-viewer';\nimport useService from './usePropertiesPanelService';\n\n/**\n * Retrieve list of variables from the form schema.\n *\n * @returns { string[] } list of variables used in form schema\n */\nexport function useVariables() {\n  const form = useService('formEditor');\n  const schema = form.getSchema();\n\n  return getSchemaVariables(schema);\n}\n","import { get } from 'min-dash';\n\nimport { useService, useVariables } from '../hooks';\n\nimport { FeelEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\n\nexport default function AltTextEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (type === 'image') {\n    entries.push({\n      id: 'alt',\n      component: AltText,\n      editField: editField,\n      field: field,\n      isEdited: isFeelEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction AltText(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const variables = useVariables().map(name => ({ name }));\n\n  const path = [ 'alt' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return FeelEntry({\n    debounce,\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Alternative text',\n    setValue,\n    variables\n  });\n}\n","import { Default } from '@bpmn-io/form-js-viewer';\n\nimport { useService } from '../hooks';\n\nimport { NumberFieldEntry, isNumberFieldEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function ColumnsEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (type === 'columns') {\n    entries.push({\n      id: 'columns',\n      component: Columns,\n      editField: editField,\n      field: field,\n      isEdited: isNumberFieldEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Columns(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const getValue = () => {\n    return field.components.length;\n  };\n\n  const setValue = (value) => {\n    let components = field.components.slice();\n\n    if (value > components.length) {\n      while (value > components.length) {\n        components.push(Default.create({ _parent: field.id }));\n      }\n    } else {\n      components = components.slice(0, value);\n    }\n\n    editField(field, 'components', components);\n  };\n\n  return NumberFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Columns',\n    setValue\n  });\n}","import { get } from 'min-dash';\n\nimport { useService } from '../hooks';\n\nimport { INPUTS } from '../Util';\n\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function DescriptionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (INPUTS.includes(type)) {\n    entries.push({\n      id: 'description',\n      component: Description,\n      editField: editField,\n      field: field,\n      isEdited: isTextFieldEntryEdited\n    });\n  }\n\n  return entries;\n}\n\n\nfunction Description(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const path = [ 'description' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Field description',\n    setValue\n  });\n}","import {\n  isSelectEntryEdited,\n  isTextFieldEntryEdited,\n  isTextAreaEntryEdited,\n  SelectEntry,\n  TextFieldEntry,\n  TextAreaEntry\n} from '@bpmn-io/properties-panel';\n\nimport { get } from 'min-dash';\n\nimport Big from 'big.js';\n\nimport { useService } from '../hooks';\n\nimport { countDecimals, INPUTS, isValidNumber, VALUES_INPUTS } from '../Util';\n\nexport const EMPTY_OPTION = null;\n\nexport default function DefaultOptionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  // Only make default values available when they are statically defined\n  if (!INPUTS.includes(type) || VALUES_INPUTS.includes(type) && !field.values) {\n    return entries;\n  }\n\n  const defaultOptions = {\n    editField,\n    field,\n    id: 'defaultValue',\n    label: 'Default value'\n  };\n\n  if (type === 'checkbox') {\n    entries.push({\n      ...defaultOptions,\n      component: DefaultValueCheckbox,\n      isEdited: isSelectEntryEdited\n    });\n  }\n\n  if (type === 'number') {\n    entries.push({\n      ...defaultOptions,\n      component: DefaultValueNumber,\n      isEdited: isTextFieldEntryEdited\n    });\n  }\n\n  if (type === 'radio' || type === 'select') {\n    entries.push({\n      ...defaultOptions,\n      component: DefaultValueSingleSelect,\n      isEdited: isSelectEntryEdited\n    });\n  }\n\n  // todo(Skaiir): implement a multiselect equivalent (cf. https://github.com/bpmn-io/form-js/issues/265)\n\n  if (type === 'textfield') {\n    entries.push({\n      ...defaultOptions,\n      component: DefaultValueTextfield,\n      isEdited: isTextFieldEntryEdited\n    });\n  }\n\n  if (type === 'textarea') {\n    entries.push({\n      ...defaultOptions,\n      component: DefaultValueTextarea,\n      isEdited: isTextAreaEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction DefaultValueCheckbox(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n\n  const {\n    defaultValue\n  } = field;\n\n  const path = [ 'defaultValue' ];\n\n  const getOptions = () => {\n    return [\n      {\n        label: 'Checked',\n        value: 'true'\n      },\n      {\n        label: 'Not checked',\n        value: 'false'\n      }\n    ];\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, parseStringToBoolean(value));\n  };\n\n  const getValue = () => {\n    return parseBooleanToString(defaultValue);\n  };\n\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\n\nfunction DefaultValueNumber(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n\n  const {\n    decimalDigits,\n    serializeToString = false\n  } = field;\n\n  const debounce = useService('debounce');\n\n  const path = [ 'defaultValue' ];\n\n  const getValue = (e) => {\n\n    let value = get(field, path);\n\n    if (!isValidNumber(value)) return;\n\n    // Enforces decimal notation so that we do not submit defaults in exponent form\n    return serializeToString ? Big(value).toFixed() : value;\n  };\n\n  const setValue = (value) => {\n\n    let newValue;\n\n    if (isValidNumber(value)) {\n      newValue = serializeToString ? value : Number(value);\n    }\n\n    return editField(field, path, newValue);\n  };\n\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\n\n  return TextFieldEntry({\n    debounce,\n    label,\n    element: field,\n    getValue,\n    id,\n    setValue,\n    validate: (value) => {\n      if (value === undefined || value === null) return;\n      if (!isValidNumber(value)) return 'Should be a valid number';\n      if (decimalDigitsSet && countDecimals(value) > decimalDigits) return `Should not contain more than ${decimalDigits} decimal digits`;\n    }\n  });\n}\n\nfunction DefaultValueSingleSelect(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n\n  const {\n    defaultValue = EMPTY_OPTION,\n    values = []\n  } = field;\n\n  const path = [ 'defaultValue' ];\n\n  const getOptions = () => {\n    return [\n      {\n        label: '<none>',\n        value: EMPTY_OPTION\n      },\n      ...values\n    ];\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value.length ? value : undefined);\n  };\n\n  const getValue = () => {\n    return defaultValue;\n  };\n\n  return SelectEntry({\n    element: field,\n    getOptions,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\n\nfunction DefaultValueTextfield(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const path = [ 'defaultValue' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\n\nfunction DefaultValueTextarea(props) {\n  const {\n    editField,\n    field,\n    id,\n    label\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const path = [ 'defaultValue' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return TextAreaEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n}\n\n// helpers /////////////////\n\nfunction parseStringToBoolean(value) {\n  if (value === 'true') {\n    return true;\n  }\n\n  return false;\n}\n\nfunction parseBooleanToString(value) {\n  if (value === true) {\n    return 'true';\n  }\n\n  return 'false';\n}","import { get } from 'min-dash';\n\nimport { INPUTS } from '../Util';\n\nimport { CheckboxEntry, isCheckboxEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function DisabledEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (INPUTS.includes(type)) {\n    entries.push({\n      id: 'disabled',\n      component: Disabled,\n      editField: editField,\n      field: field,\n      isEdited: isCheckboxEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Disabled(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const path = [ 'disabled' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Disabled',\n    setValue\n  });\n}","import { get, isUndefined } from 'min-dash';\n\nimport { useService } from '../hooks';\n\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function IdEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const entries = [];\n\n  if (field.type === 'default') {\n    entries.push({\n      id: 'id',\n      component: Id,\n      editField: editField,\n      field: field,\n      isEdited: isTextFieldEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Id(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const formFieldRegistry = useService('formFieldRegistry');\n  const debounce = useService('debounce');\n\n  const path = [ 'id' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  const validate = (value) => {\n    if (isUndefined(value) || !value.length) {\n      return 'Must not be empty.';\n    }\n\n    const assigned = formFieldRegistry._ids.assigned(value);\n\n    if (assigned && assigned !== field) {\n      return 'Must be unique.';\n    }\n\n    return validateId(value) || null;\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'ID',\n    setValue,\n    validate,\n  });\n}\n\n// id structural validation /////////////\n\nconst SPACE_REGEX = /\\s/;\n\n// for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\nconst QNAME_REGEX = /^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i;\n\n// for ID validation as per BPMN Schema (QName - Namespace)\nconst ID_REGEX = /^[a-z_][\\w-.]*$/i;\n\nfunction validateId(idValue) {\n\n  if (containsSpace(idValue)) {\n    return 'Must not contain spaces.';\n  }\n\n  if (!ID_REGEX.test(idValue)) {\n\n    if (QNAME_REGEX.test(idValue)) {\n      return 'Must not contain prefix.';\n    }\n\n    return 'Must be a valid QName.';\n  }\n}\n\nfunction containsSpace(value) {\n  return SPACE_REGEX.test(value);\n}","import { isUndefined } from 'min-dash';\n\nimport { get } from 'min-dash';\n\nimport { INPUTS } from '../Util';\n\nimport { useService } from '../hooks';\n\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function KeyEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (INPUTS.includes(type)) {\n    entries.push({\n      id: 'key',\n      component: Key,\n      editField: editField,\n      field: field,\n      isEdited: isTextFieldEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Key(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const formFieldRegistry = useService('formFieldRegistry');\n\n  const debounce = useService('debounce');\n\n  const path = [ 'key' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  const validate = (value) => {\n    if (isUndefined(value) || !value.length) {\n      return 'Must not be empty.';\n    }\n\n    if (/\\s/.test(value)) {\n      return 'Must not contain spaces.';\n    }\n\n    const assigned = formFieldRegistry._keys.assigned(value);\n\n    if (assigned && assigned !== field) {\n      return 'Must be unique.';\n    }\n\n    return null;\n  };\n\n  return TextFieldEntry({\n    debounce,\n    description: 'Binds to a form variable',\n    element: field,\n    getValue,\n    id,\n    label: 'Key',\n    setValue,\n    validate\n  });\n}","import { get } from 'min-dash';\nimport { useService } from '../../hooks';\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\nexport default function simpleStringEntryFactory(options) {\n  const {\n    id,\n    label,\n    path,\n    props\n  } = options;\n\n  const {\n    editField,\n    field\n  } = props;\n\n  return {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    component: SimpleStringComponent,\n    isEdited: isTextFieldEntryEdited\n  };\n}\n\nconst SimpleStringComponent = (props) => {\n  const {\n    id,\n    label,\n    path,\n    field,\n    editField\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const getValue = () => get(field, path, '');\n\n  const setValue = (value) => editField(field, path, value);\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n};\n","import { get } from 'min-dash';\nimport { CheckboxEntry, isCheckboxEntryEdited } from '@bpmn-io/properties-panel';\n\nexport default function simpleBoolEntryFactory(options) {\n  const {\n    id,\n    label,\n    path,\n    props\n  } = options;\n\n  const {\n    editField,\n    field\n  } = props;\n\n  return {\n    id,\n    label,\n    path,\n    field,\n    editField,\n    component: SimpleBoolComponent,\n    isEdited: isCheckboxEntryEdited\n  };\n}\n\nconst SimpleBoolComponent = (props) => {\n  const {\n    id,\n    label,\n    path,\n    field,\n    editField\n  } = props;\n\n  const getValue = () => get(field, path, '');\n\n  const setValue = (value) => editField(field, path, value);\n\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue\n  });\n};\n","import { INPUTS } from '../Util';\nimport { DATETIME_SUBTYPES, DATE_LABEL_PATH, TIME_LABEL_PATH } from '@bpmn-io/form-js-viewer';\nimport { simpleStringEntryFactory } from './factories';\n\nexport default function LabelEntry(props) {\n  const {\n    field\n  } = props;\n\n  const {\n    type,\n    subtype\n  } = field;\n\n  const entries = [];\n\n  if (type === 'datetime') {\n    if (subtype === DATETIME_SUBTYPES.DATE || subtype === DATETIME_SUBTYPES.DATETIME) {\n      entries.push(\n        simpleStringEntryFactory({\n          id: 'date-label',\n          path: DATE_LABEL_PATH,\n          label: 'Date label',\n          props\n        })\n      );\n    }\n    if (subtype === DATETIME_SUBTYPES.TIME || subtype === DATETIME_SUBTYPES.DATETIME) {\n      entries.push(\n        simpleStringEntryFactory({\n          id: 'time-label',\n          path: TIME_LABEL_PATH,\n          label: 'Time label',\n          props\n        })\n      );\n    }\n  }\n  else if (INPUTS.includes(type) || type === 'button') {\n    entries.push(\n      simpleStringEntryFactory({\n        id: 'label',\n        path: [ 'label' ],\n        label: 'Field label',\n        props\n      })\n    );\n  }\n\n  return entries;\n}\n","import { get } from 'min-dash';\n\nimport { useService, useVariables } from '../hooks';\n\nimport { FeelEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\n\nexport default function SourceEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  if (type === 'image') {\n    entries.push({\n      id: 'source',\n      component: Source,\n      editField: editField,\n      field: field,\n      isEdited: isFeelEntryEdited\n    });\n  }\n\n  return entries;\n}\n\nfunction Source(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const variables = useVariables().map(name => ({ name }));\n\n  const path = [ 'source' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return FeelEntry({\n    debounce,\n    description: 'Expression or static value (link/data URI)',\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Image source',\n    setValue,\n    variables\n  });\n}\n","import { get } from 'min-dash';\n\nimport { useService, useVariables } from '../hooks';\n\nimport { FeelTextAreaEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\n\n\nexport default function TextEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  if (type !== 'text') {\n    return [];\n  }\n\n  return [\n    {\n      id: 'text',\n      component: Text,\n      editField: editField,\n      field: field,\n      isEdited: isFeelEntryEdited\n    }\n  ];\n}\n\nfunction Text(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const variables = useVariables().map(name => ({ name }));\n\n  const path = [ 'text' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return FeelTextAreaEntry({\n    debounce,\n    description: 'Use an Expression, Markdown or basic HTML to format.',\n    element: field,\n    feel: 'optional',\n    getValue,\n    id,\n    label: 'Text',\n    rows: 10,\n    setValue,\n    variables\n  });\n}","import { NumberFieldEntry, isNumberFieldEntryEdited, TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\nimport Big from 'big.js';\nimport { get } from 'min-dash';\nimport { useService } from '../hooks';\nimport { countDecimals, isValidNumber } from '../Util';\n\nexport default function NumberEntries(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  if (type !== 'number') {\n    return [];\n  }\n\n  const entries = [];\n\n  entries.push({\n    id: id + '-decimalDigits',\n    component: NumberDecimalDigits,\n    isEdited: isNumberFieldEntryEdited,\n    editField,\n    field\n  });\n\n  entries.push({\n    id: id + '-step',\n    component: NumberArrowStep,\n    isEdited: isTextFieldEntryEdited,\n    editField,\n    field\n  });\n\n  return entries;\n}\n\nfunction NumberDecimalDigits(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const getValue = (e) => get(field, [ 'decimalDigits' ]);\n\n  const setValue = (value) => editField(field, [ 'decimalDigits' ], value);\n\n  return NumberFieldEntry({\n    debounce,\n    label: 'Decimal digits',\n    element: field,\n    step: 'any',\n    getValue,\n    id,\n    setValue,\n    validate: (value) => {\n      if (value === undefined || value === null) return;\n      if (value < 0) return 'Should be greater than or equal to zero.';\n      if (!Number.isInteger(value)) return 'Should be an integer.';\n    }\n  });\n\n}\n\nfunction NumberArrowStep(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const {\n    decimalDigits\n  } = field;\n\n  const debounce = useService('debounce');\n\n  const getValue = (e) => {\n\n    let value = get(field, [ 'increment' ]);\n\n    if (!isValidNumber(value)) return null;\n\n    return value;\n  };\n\n  const clearLeadingZeroes = (value) => {\n    if (!value) return value;\n    const trimmed = value.replace(/^0+/g, '');\n    return (trimmed.startsWith('.') ? '0' : '') + trimmed;\n  };\n\n  const setValue = (value) => editField(field, [ 'increment' ], clearLeadingZeroes(value));\n\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\n\n  return TextFieldEntry({\n    debounce,\n    label: 'Increment',\n    element: field,\n    getValue,\n    id,\n    setValue,\n    validate: (value) => {\n\n      if (value === undefined || value === null) return;\n\n      if (!isValidNumber(value)) return 'Should be a valid number.';\n\n      if (Big(value).cmp(0) <= 0) return 'Should be greater than zero.';\n\n      if (decimalDigitsSet) {\n        const minimumValue = Big(`1e-${decimalDigits}`);\n\n        if (Big(value).cmp(minimumValue) < 0) return `Should be at least ${minimumValue.toString()}.`;\n        if (countDecimals(value) > decimalDigits) return `Should not contain more than ${decimalDigits} decimal digits.`;\n\n      }\n    }\n  });\n\n}","import { CheckboxEntry, isCheckboxEntryEdited } from '@bpmn-io/properties-panel';\n\nimport { get } from 'min-dash';\n\nimport Big from 'big.js';\n\nexport default function NumberSerializationEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  if (type !== 'number') {\n    return [];\n  }\n\n  const entries = [];\n\n  entries.push({\n    id: 'serialize-to-string',\n    component: SerializeToString,\n    isEdited: isCheckboxEntryEdited,\n    editField,\n    field\n  });\n\n  return entries;\n}\n\nfunction SerializeToString(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const {\n    defaultValue\n  } = field;\n\n  const path = [ 'serializeToString' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n\n    // Whenever changing the formatting, make sure to change the default value type along with it\n    if (defaultValue || defaultValue === 0) {\n      editField(field, [ 'defaultValue' ], value ? Big(defaultValue).toFixed() : Number(defaultValue));\n    }\n\n    return editField(field, path, value);\n  };\n\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Output as string',\n    description: 'Allows arbitrary precision values',\n    setValue\n  });\n}","import { CheckboxEntry, isCheckboxEntryEdited, SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\n\nimport {\n  DATETIME_SUBTYPES,\n  DATETIME_SUBTYPES_LABELS,\n  DATETIME_SUBTYPE_PATH,\n  DATE_LABEL_PATH,\n  DATE_DISALLOW_PAST_PATH,\n  TIME_USE24H_PATH,\n  TIME_LABEL_PATH,\n  TIME_INTERVAL_PATH,\n  TIME_SERIALISING_FORMAT_PATH,\n  TIME_SERIALISING_FORMATS\n} from '@bpmn-io/form-js-viewer';\n\nimport { get } from 'min-dash';\n\nexport default function DateTimeEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type,\n    subtype\n  } = field;\n\n  if (type !== 'datetime') {\n    return [];\n  }\n\n  const entries = [\n    {\n      id: 'subtype',\n      component: DateTimeSubtypeSelect,\n      isEdited: isSelectEntryEdited,\n      editField,\n      field\n    }\n  ];\n\n  if (subtype === DATETIME_SUBTYPES.TIME || subtype === DATETIME_SUBTYPES.DATETIME) {\n\n    entries.push({\n      id: 'use24h',\n      component: Use24h,\n      isEdited: isCheckboxEntryEdited,\n      editField,\n      field\n    });\n\n  }\n\n  return entries;\n}\n\nfunction DateTimeSubtypeSelect(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const getValue = (e) => get(field, DATETIME_SUBTYPE_PATH);\n\n  const clearTimeConfig = () => {\n    const timeConfigPaths = [ TIME_LABEL_PATH, TIME_USE24H_PATH, TIME_INTERVAL_PATH, TIME_SERIALISING_FORMAT_PATH ];\n    for (const path of timeConfigPaths) {\n      editField(field, path, undefined);\n    }\n  };\n\n  const initTimeConfig = () => {\n    editField(field, TIME_LABEL_PATH, 'Time');\n    editField(field, TIME_SERIALISING_FORMAT_PATH, TIME_SERIALISING_FORMATS.UTC_OFFSET);\n    editField(field, TIME_INTERVAL_PATH, 15);\n  };\n\n  const clearDateConfig = () => {\n    const dateConfigPaths = [ DATE_LABEL_PATH, DATE_DISALLOW_PAST_PATH ];\n    for (const path of dateConfigPaths) {\n      editField(field, path, undefined);\n    }\n  };\n\n  const initDateConfig = () => {\n    editField(field, DATE_LABEL_PATH, 'Date');\n  };\n\n  const setValue = (value) => {\n\n    const oldValue = getValue();\n\n    if (oldValue === value) return;\n\n    if (value === DATETIME_SUBTYPES.DATE) {\n      clearTimeConfig();\n      oldValue === DATETIME_SUBTYPES.TIME && initDateConfig();\n    }\n    else if (value === DATETIME_SUBTYPES.TIME) {\n      clearDateConfig();\n      oldValue === DATETIME_SUBTYPES.DATE && initTimeConfig();\n    }\n    else if (value === DATETIME_SUBTYPES.DATETIME) {\n      oldValue === DATETIME_SUBTYPES.DATE && initTimeConfig();\n      oldValue === DATETIME_SUBTYPES.TIME && initDateConfig();\n    }\n\n    return editField(field, DATETIME_SUBTYPE_PATH, value);\n  };\n\n  const getDatetimeSubtypes = () => {\n\n    return Object.values(DATETIME_SUBTYPES).map((subtype) => ({\n      label: DATETIME_SUBTYPES_LABELS[subtype],\n      value: subtype\n    }));\n  };\n\n  return SelectEntry({\n    label: 'Subtype',\n    element: field,\n    getOptions: getDatetimeSubtypes,\n    getValue,\n    id,\n    setValue\n  });\n}\n\nfunction Use24h(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const path = TIME_USE24H_PATH;\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Use 24h',\n    setValue\n  });\n}\n","import { CheckboxEntry, isCheckboxEntryEdited, SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\n\nimport { DATETIME_SUBTYPES, DATE_DISALLOW_PAST_PATH, TIME_INTERVAL_PATH } from '@bpmn-io/form-js-viewer';\n\nimport { get } from 'min-dash';\n\nexport default function DateTimeConstraintsEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const {\n    type,\n    subtype\n  } = field;\n\n  if (type !== 'datetime') {\n    return [];\n  }\n\n  const entries = [];\n\n  if (subtype === DATETIME_SUBTYPES.TIME || subtype === DATETIME_SUBTYPES.DATETIME) {\n    entries.push({\n      id: id + '-timeInterval',\n      component: TimeIntervalSelect,\n      isEdited: isSelectEntryEdited,\n      editField,\n      field\n    });\n  }\n\n  if (subtype === DATETIME_SUBTYPES.DATE || subtype === DATETIME_SUBTYPES.DATETIME) {\n    entries.push({\n      id: id + '-disallowPassedDates',\n      component: DisallowPassedDates,\n      isEdited: isCheckboxEntryEdited,\n      editField,\n      field\n    });\n  }\n\n  return entries;\n}\n\nfunction DisallowPassedDates(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const path = DATE_DISALLOW_PAST_PATH;\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    return editField(field, path, value);\n  };\n\n  return CheckboxEntry({\n    element: field,\n    getValue,\n    id,\n    label: 'Disallow past dates',\n    setValue\n  });\n}\n\nfunction TimeIntervalSelect(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const timeIntervals = [ 1, 5, 10, 15, 30, 60 ];\n\n  const getValue = (e) => get(field, TIME_INTERVAL_PATH);\n\n  const setValue = (value) => editField(field, TIME_INTERVAL_PATH, parseInt(value));\n\n  const getTimeIntervals = () => {\n\n    return timeIntervals.map((timeInterval) => ({\n      label: timeInterval === 60 ? '1h' : (timeInterval + 'm'),\n      value: timeInterval\n    }));\n  };\n\n  return SelectEntry({\n    label: 'Time interval',\n    element: field,\n    getOptions: getTimeIntervals,\n    getValue,\n    id,\n    setValue\n  });\n}","import { SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\n\nimport { DATETIME_SUBTYPES, TIME_SERIALISING_FORMATS, TIME_SERIALISINGFORMAT_LABELS, TIME_SERIALISING_FORMAT_PATH } from '@bpmn-io/form-js-viewer';\n\nimport { get } from 'min-dash';\n\nexport default function DateTimeFormatEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type,\n    subtype\n  } = field;\n\n  if (type !== 'datetime') {\n    return [];\n  }\n\n  const entries = [];\n\n  if (subtype === DATETIME_SUBTYPES.TIME || subtype === DATETIME_SUBTYPES.DATETIME) {\n    entries.push({\n      id: 'time-format',\n      component: TimeFormatSelect,\n      isEdited: isSelectEntryEdited,\n      editField,\n      field\n    });\n  }\n\n  return entries;\n}\n\nfunction TimeFormatSelect(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const getValue = (e) => get(field, TIME_SERIALISING_FORMAT_PATH);\n\n  const setValue = (value) => editField(field, TIME_SERIALISING_FORMAT_PATH, value);\n\n  const getTimeSerialisingFormats = () => {\n\n    return Object.values(TIME_SERIALISING_FORMATS).map((format) => ({\n      label: TIME_SERIALISINGFORMAT_LABELS[format],\n      value: format\n    }));\n  };\n\n  return SelectEntry({\n    label: 'Time format',\n    element: field,\n    getOptions: getTimeSerialisingFormats,\n    getValue,\n    id,\n    setValue\n  });\n}","\nimport { simpleBoolEntryFactory } from './factories';\n\nexport default function SelectEntries(props) {\n  const {\n    field,\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  if (type !== 'select') {\n    return [];\n  }\n\n  const entries = [\n    simpleBoolEntryFactory({\n      id: 'searchable',\n      path: [ 'searchable' ],\n      label: 'Searchable',\n      props\n    })\n  ];\n\n  return entries;\n}","import {\n  get,\n  set\n} from 'min-dash';\n\nimport { useService } from '../hooks';\n\nimport { TextFieldEntry } from '@bpmn-io/properties-panel';\n\n\nexport default function ValueEntry(props) {\n  const {\n    editField,\n    field,\n    idPrefix,\n    index,\n    validateFactory\n  } = props;\n\n  const entries = [\n    {\n      component: Label,\n      editField,\n      field,\n      id: idPrefix + '-label',\n      idPrefix,\n      index,\n      validateFactory\n    },\n    {\n      component: Value,\n      editField,\n      field,\n      id: idPrefix + '-value',\n      idPrefix,\n      index,\n      validateFactory\n    }\n  ];\n\n  return entries;\n}\n\nfunction Label(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const setValue = (value) => {\n    const values = get(field, [ 'values' ]);\n    return editField(field, 'values', set(values, [ index, 'label' ], value));\n  };\n\n  const getValue = () => {\n    return get(field, [ 'values', index, 'label' ]);\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Label',\n    setValue,\n    validate: validateFactory(getValue())\n  });\n}\n\nfunction Value(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const setValue = (value) => {\n    const values = get(field, [ 'values' ]);\n    return editField(field, 'values', set(values, [ index, 'value' ], value));\n  };\n\n  const getValue = () => {\n    return get(field, [ 'values', index, 'value' ]);\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Value',\n    setValue,\n    validate: validateFactory(getValue())\n  });\n}","import { get } from 'min-dash';\n\nimport { useService } from '../hooks';\n\nimport { TextFieldEntry } from '@bpmn-io/properties-panel';\n\n\nexport default function CustomValueEntry(props) {\n  const {\n    editField,\n    field,\n    idPrefix,\n    index,\n    validateFactory\n  } = props;\n\n  const entries = [\n    {\n      component: Key,\n      editField,\n      field,\n      id: idPrefix + '-key',\n      idPrefix,\n      index,\n      validateFactory\n    },\n    {\n      component: Value,\n      editField,\n      field,\n      id: idPrefix + '-value',\n      idPrefix,\n      index,\n      validateFactory\n    }\n  ];\n\n  return entries;\n}\n\nfunction Key(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const setValue = (value) => {\n    const properties = get(field, [ 'properties' ]);\n    const key = Object.keys(properties)[ index ];\n    return editField(field, 'properties', updateKey(properties, key, value));\n  };\n\n  const getValue = () => {\n    return Object.keys(get(field, [ 'properties' ]))[ index ];\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Key',\n    setValue,\n    validate: validateFactory(getValue())\n  });\n}\n\nfunction Value(props) {\n  const {\n    editField,\n    field,\n    id,\n    index,\n    validateFactory\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const setValue = (value) => {\n    const properties = get(field, [ 'properties' ]);\n    const key = Object.keys(properties)[ index ];\n    editField(field, 'properties', updateValue(properties, key, value));\n  };\n\n  const getValue = () => {\n    const properties = get(field, [ 'properties' ]);\n    const key = Object.keys(properties)[ index ];\n    return get(field, [ 'properties', key ]);\n  };\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue,\n    id,\n    label: 'Value',\n    setValue,\n    validate: validateFactory(getValue())\n  });\n}\n\n\n// helpers //////////\n\n/**\n * Returns copy of object with updated value.\n *\n * @param {Object} properties\n * @param {string} key\n * @param {string} value\n *\n * @returns {Object}\n */\nfunction updateValue(properties, key, value) {\n  return {\n    ...properties,\n    [ key ]: value\n  };\n}\n\n/**\n * Returns copy of object with updated key.\n *\n * @param {Object} properties\n * @param {string} oldKey\n * @param {string} newKey\n *\n * @returns {Object}\n */\nfunction updateKey(properties, oldKey, newKey) {\n  return Object.entries(properties).reduce((newProperties, entry) => {\n    const [ key, value ] = entry;\n\n    return {\n      ...newProperties,\n      [ key === oldKey ? newKey : key ]: value\n    };\n  }, {});\n}","import { SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\nimport { getValuesSource, VALUES_SOURCES, VALUES_SOURCES_DEFAULTS, VALUES_SOURCES_LABELS, VALUES_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\n\nexport default function ValuesSourceSelectEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  return [\n    {\n      id: id + '-select',\n      component: ValuesSourceSelect,\n      isEdited: isSelectEntryEdited,\n      editField,\n      field\n    }\n  ];\n}\n\nfunction ValuesSourceSelect(props) {\n\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const getValue = getValuesSource;\n\n  const setValue = (value) => {\n\n    let newField = field;\n\n    const newProperties = {};\n\n    Object.values(VALUES_SOURCES).forEach(source => {\n\n      // Clear all values source definitions and default the newly selected one\n      const newValue = value === source ? VALUES_SOURCES_DEFAULTS[source] : undefined;\n      newProperties[VALUES_SOURCES_PATHS[source]] = newValue;\n    });\n\n    newField = editField(field, newProperties);\n    return newField;\n  };\n\n  const getValuesSourceOptions = () => {\n\n    return Object.values(VALUES_SOURCES).map((valueSource) => ({\n      label: VALUES_SOURCES_LABELS[valueSource],\n      value: valueSource\n    }));\n  };\n\n  return SelectEntry({\n    label: 'Type',\n    element: field,\n    getOptions: getValuesSourceOptions,\n    getValue,\n    id,\n    setValue\n  });\n}\n","import { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\nimport { get, isUndefined } from 'min-dash';\nimport { useService } from '../hooks';\nimport { VALUES_SOURCES, VALUES_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\n\n\nexport default function InputKeyValuesSourceEntry(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  return [\n    {\n      id: id + '-key',\n      component: InputValuesKey,\n      label: 'Input values key',\n      description: 'Define which input property to populate the values from',\n      isEdited: isTextFieldEntryEdited,\n      editField,\n      field,\n    }\n  ];\n}\n\nfunction InputValuesKey(props) {\n  const {\n    editField,\n    field,\n    id,\n    label,\n    description\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const path = VALUES_SOURCES_PATHS[VALUES_SOURCES.INPUT];\n\n  const getValue = () => get(field, path, '');\n\n  const setValue = (value) => editField(field, path, value || '');\n\n  const validate = (value) => {\n    if (isUndefined(value) || !value.length) {\n      return 'Must not be empty.';\n    }\n\n    if (/\\s/.test(value)) {\n      return 'Must not contain spaces.';\n    }\n\n    return null;\n  };\n\n  return TextFieldEntry({\n    debounce,\n    description,\n    element: field,\n    getValue,\n    id,\n    label,\n    setValue,\n    validate\n  });\n}\n","import { isUndefined, without } from 'min-dash';\nimport { arrayAdd } from '../Util';\nimport ValueEntry from './ValueEntry';\nimport { VALUES_SOURCES, VALUES_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\n\nexport default function StaticValuesSourceEntry(props) {\n  const {\n    editField,\n    field,\n    id: idPrefix\n  } = props;\n\n  const {\n    values\n  } = field;\n\n  const addEntry = (e) => {\n\n    e.stopPropagation();\n\n    const index = values.length + 1;\n\n    const entry = getIndexedEntry(index);\n\n    editField(field, VALUES_SOURCES_PATHS[VALUES_SOURCES.STATIC], arrayAdd(values, values.length, entry));\n  };\n\n  const removeEntry = (entry) => {\n    editField(field, VALUES_SOURCES_PATHS[VALUES_SOURCES.STATIC], without(values, entry));\n  };\n\n  const validateFactory = (key) => {\n    return (value) => {\n      if (value === key) {\n        return;\n      }\n\n      if (isUndefined(value) || !value.length) {\n        return 'Must not be empty.';\n      }\n\n      const isValueAssigned = values.find(entry => entry.value === value);\n\n      if (isValueAssigned) {\n        return 'Must be unique.';\n      }\n    };\n  };\n\n  const items = values.map((entry, index) => {\n    const id = idPrefix + '-' + index;\n\n    return {\n      id,\n      label: entry.label,\n      entries: ValueEntry({\n        editField,\n        field,\n        idPrefix: id,\n        index,\n        validateFactory\n      }),\n      autoFocusEntry: id + '-label',\n      remove: () => removeEntry(entry)\n    };\n  });\n\n  return {\n    items,\n    add: addEntry,\n    shouldSort: false\n  };\n}\n\n\n// helper\n\nfunction getIndexedEntry(index) {\n  const entry = {\n    label: 'Value',\n    value: 'value'\n  };\n\n  if (index > 1) {\n    entry.label += ` ${index}`;\n    entry.value += `${index}`;\n  }\n\n  return entry;\n}","import { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\n\nimport { get, set } from 'min-dash';\nimport { useService } from '../hooks';\n\nexport default function AdornerEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  const {\n    type\n  } = field;\n\n  const entries = [];\n\n  const onChange = (key) => {\n    return (value) => {\n      const appearance = get(field, [ 'appearance' ], {});\n\n      editField(field, [ 'appearance' ], set(appearance, [ key ], value));\n    };\n  };\n\n  const getValue = (key) => {\n    return () => {\n      return get(field, [ 'appearance', key ]);\n    };\n  };\n\n  if ([ 'number', 'textfield' ].includes(type)) {\n    entries.push({\n      id: 'prefix-adorner',\n      component: PrefixAdorner,\n      isEdited: isTextFieldEntryEdited,\n      editField,\n      field,\n      onChange,\n      getValue\n    });\n\n    entries.push({\n      id: 'suffix-adorner',\n      component: SuffixAdorner,\n      isEdited: isTextFieldEntryEdited,\n      editField,\n      field,\n      onChange,\n      getValue\n    });\n  }\n\n  return entries;\n}\n\nfunction PrefixAdorner(props) {\n  const {\n    field,\n    id,\n    onChange,\n    getValue\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('prefixAdorner'),\n    id,\n    label: 'Prefix',\n    setValue: onChange('prefixAdorner')\n  });\n}\n\nfunction SuffixAdorner(props) {\n  const {\n    field,\n    id,\n    onChange,\n    getValue\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('suffixAdorner'),\n    id,\n    label: 'Suffix',\n    setValue: onChange('suffixAdorner')\n  });\n}","import { FeelEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\nimport { get } from 'min-dash';\n\nimport { useService, useVariables } from '../hooks';\n\n\nexport function ConditionEntry(props) {\n  const {\n    editField,\n    field\n  } = props;\n\n  return [\n    {\n      id: 'conditional-hide',\n      component: Condition,\n      editField: editField,\n      field: field,\n      isEdited: isFeelEntryEdited\n    }\n  ];\n}\n\n\nfunction Condition(props) {\n  const {\n    editField,\n    field,\n    id\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const variables = useVariables().map(name => ({ name }));\n\n  const path = [ 'conditional', 'hide' ];\n\n  const getValue = () => {\n    return get(field, path, '');\n  };\n\n  const setValue = (value) => {\n    if (!value) {\n      return editField(field, 'conditional', undefined);\n    }\n\n    return editField(field, 'conditional', { hide: value });\n  };\n\n  return FeelEntry({\n    debounce,\n    description: 'Condition under which the field is hidden',\n    element: field,\n    feel: 'required',\n    getValue,\n    id,\n    label: 'Hide if',\n    setValue,\n    variables\n  });\n}\n","import {\n  ActionEntry,\n  AltTextEntry,\n  ColumnsEntry,\n  DescriptionEntry,\n  DefaultValueEntry,\n  DisabledEntry,\n  IdEntry,\n  ImageSourceEntry,\n  KeyEntry,\n  LabelEntry,\n  SelectEntries,\n  TextEntry,\n  NumberEntries,\n  DateTimeEntry\n} from '../entries';\n\n\nexport default function GeneralGroup(field, editField) {\n\n  const entries = [\n    ...IdEntry({ field, editField }),\n    ...LabelEntry({ field, editField }),\n    ...DescriptionEntry({ field, editField }),\n    ...KeyEntry({ field, editField }),\n    ...DefaultValueEntry({ field, editField }),\n    ...ActionEntry({ field, editField }),\n    ...ColumnsEntry({ field, editField }),\n    ...DateTimeEntry({ field, editField }),\n    ...TextEntry({ field, editField }),\n    ...NumberEntries({ field, editField }),\n    ...ImageSourceEntry({ field, editField }),\n    ...AltTextEntry({ field, editField }),\n    ...SelectEntries({ field, editField }),\n    ...DisabledEntry({ field, editField })\n  ];\n\n  return {\n    id: 'general',\n    label: 'General',\n    entries\n  };\n}","import {\n  NumberSerializationEntry,\n  DateTimeSerializationEntry\n} from '../entries';\n\n\nexport default function SerializationGroup(field, editField) {\n\n  const entries = [\n    ...NumberSerializationEntry({ field, editField }),\n    ...DateTimeSerializationEntry({ field, editField })\n  ];\n\n  if (!entries.length) {\n    return null;\n  }\n\n  return {\n    id: 'serialization',\n    label: 'Serialization',\n    entries\n  };\n}","import {\n  DateTimeConstraintsEntry\n} from '../entries';\n\n\nexport default function ConstraintsGroup(field, editField) {\n\n  const entries = [\n    ...DateTimeConstraintsEntry({ field, editField })\n  ];\n\n  if (!entries.length) {\n    return null;\n  }\n\n  return {\n    id: 'constraints',\n    label: 'Constraints',\n    entries\n  };\n}","import {\n  get,\n  set\n} from 'min-dash';\n\nimport {\n  CheckboxEntry,\n  isCheckboxEntryEdited,\n  isNumberFieldEntryEdited,\n  isTextFieldEntryEdited,\n  NumberFieldEntry,\n  TextFieldEntry,\n  SelectEntry\n} from '@bpmn-io/properties-panel';\n\nimport { useService } from '../hooks';\n\nimport { INPUTS } from '../Util';\n\nconst VALIDATION_TYPE_OPTIONS = {\n  custom: {\n    value: '',\n    label: 'Custom',\n  },\n  email: {\n    value: 'email',\n    label: 'Email',\n  },\n  phone: {\n    value: 'phone',\n    label: 'Phone',\n  },\n};\n\nexport default function ValidationGroup(field, editField) {\n  const { type } = field;\n  const validate = get(field, [ 'validate' ], {});\n  const isCustomValidation = [ undefined, VALIDATION_TYPE_OPTIONS.custom.value ].includes(validate.validationType);\n\n  if (!(INPUTS.includes(type) && type !== 'checkbox' && type !== 'checklist' && type !== 'taglist')) {\n    return null;\n  }\n\n  const onChange = (key) => {\n    return (value) => {\n      const validate = get(field, [ 'validate' ], {});\n\n      editField(field, [ 'validate' ], set(validate, [ key ], value));\n    };\n  };\n\n  const getValue = (key) => {\n    return () => {\n      return get(field, [ 'validate', key ]);\n    };\n  };\n\n  let entries = [\n    {\n      id: 'required',\n      component: Required,\n      getValue,\n      field,\n      isEdited: isCheckboxEntryEdited,\n      onChange\n    }\n  ];\n\n  if (type === 'textfield') {\n    entries.push(\n      {\n        id: 'validationType',\n        component: ValidationType,\n        getValue,\n        field,\n        editField,\n        isEdited: isTextFieldEntryEdited,\n        onChange\n      }\n    );\n  }\n\n  if (type === 'textarea' || (type === 'textfield' && isCustomValidation)) {\n    entries.push(\n      {\n        id: 'minLength',\n        component: MinLength,\n        getValue,\n        field,\n        isEdited: isNumberFieldEntryEdited,\n        onChange\n      },\n      {\n        id: 'maxLength',\n        component: MaxLength,\n        getValue,\n        field,\n        isEdited: isNumberFieldEntryEdited,\n        onChange\n      }\n    );\n  }\n\n  if (type === 'textfield' && isCustomValidation) {\n    entries.push(\n      {\n        id: 'pattern',\n        component: Pattern,\n        getValue,\n        field,\n        isEdited: isTextFieldEntryEdited,\n        onChange\n      }\n    );\n  }\n\n  if (type === 'number') {\n    entries.push(\n      {\n        id: 'min',\n        component: Min,\n        getValue,\n        field,\n        isEdited: isNumberFieldEntryEdited,\n        onChange\n      },\n      {\n        id: 'max',\n        component: Max,\n        getValue,\n        field,\n        isEdited: isNumberFieldEntryEdited,\n        onChange\n      }\n    );\n  }\n\n  return {\n    id: 'validation',\n    label: 'Validation',\n    entries\n  };\n}\n\nfunction Required(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  return CheckboxEntry({\n    element: field,\n    getValue: getValue('required'),\n    id,\n    label: 'Required',\n    setValue: onChange('required')\n  });\n}\n\nfunction MinLength(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return NumberFieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('minLength'),\n    id,\n    label: 'Minimum length',\n    min: 0,\n    setValue: onChange('minLength')\n  });\n}\n\nfunction MaxLength(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return NumberFieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('maxLength'),\n    id,\n    label: 'Maximum length',\n    min: 0,\n    setValue: onChange('maxLength')\n  });\n}\n\nfunction Pattern(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return TextFieldEntry({\n    debounce,\n    element: field,\n    getValue: getValue('pattern'),\n    id,\n    label: 'Custom regular expression',\n    setValue: onChange('pattern')\n  });\n}\n\nfunction Min(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return NumberFieldEntry({\n    debounce,\n    element: field,\n    id,\n    label: 'Minimum',\n    step: 'any',\n    getValue: getValue('min'),\n    setValue: onChange('min')\n  });\n}\n\nfunction Max(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  return NumberFieldEntry({\n    debounce,\n    element: field,\n    id,\n    label: 'Maximum',\n    step: 'any',\n    getValue: getValue('max'),\n    setValue: onChange('max')\n  });\n}\n\nfunction ValidationType(props) {\n  const {\n    field,\n    getValue,\n    id,\n    onChange\n  } = props;\n\n  const debounce = useService('debounce');\n\n  const setValue = (validationType) => {\n    onChange('validationType')(validationType || undefined);\n  };\n\n  return SelectEntry({\n    debounce,\n    element: field,\n    getValue: getValue('validationType'),\n    id,\n    label: 'Validation pattern',\n    setValue,\n    getOptions: () => Object.values(VALIDATION_TYPE_OPTIONS)\n  });\n}\n","import { ValuesSourceSelectEntry, StaticValuesSourceEntry, InputKeyValuesSourceEntry } from '../entries';\nimport { getValuesSource, VALUES_SOURCES } from '@bpmn-io/form-js-viewer';\n\nimport { Group, ListGroup } from '@bpmn-io/properties-panel';\n\nimport {\n  VALUES_INPUTS\n} from '../Util';\n\nexport default function ValuesGroups(field, editField) {\n  const {\n    type,\n    id: fieldId\n  } = field;\n\n  if (!VALUES_INPUTS.includes(type)) {\n    return [];\n  }\n\n  const context = { editField, field };\n  const valuesSourceId = `${fieldId}-valuesSource`;\n\n  /**\n   * @type {Array<Group|ListGroup>}\n   */\n  const groups = [\n    {\n      id: valuesSourceId,\n      label: 'Options source',\n      component: Group,\n      entries: ValuesSourceSelectEntry({ ...context, id: valuesSourceId })\n    }\n  ];\n\n  const valuesSource = getValuesSource(field);\n\n  if (valuesSource === VALUES_SOURCES.INPUT) {\n    const dynamicValuesId = `${fieldId}-dynamicValues`;\n    groups.push({\n      id: dynamicValuesId,\n      label: 'Dynamic options',\n      component: Group,\n      entries: InputKeyValuesSourceEntry({ ...context, id: dynamicValuesId })\n    });\n  }\n  else if (valuesSource === VALUES_SOURCES.STATIC) {\n    const staticValuesId = `${fieldId}-staticValues`;\n    groups.push({\n      id: staticValuesId,\n      label: 'Static options',\n      component: ListGroup,\n      ...StaticValuesSourceEntry({ ...context, id: staticValuesId })\n    });\n  }\n\n  return groups;\n}","import { ListGroup } from '@bpmn-io/properties-panel';\n\nimport {\n  has,\n  isUndefined\n} from 'min-dash';\n\nimport { CustomValueEntry } from '../entries';\n\nexport default function CustomValuesGroup(field, editField) {\n  const {\n    properties = {},\n    type\n  } = field;\n\n  if (type === 'default') {\n    return null;\n  }\n\n  const addEntry = (event) => {\n    event.stopPropagation();\n\n    const index = Object.keys(properties).length + 1;\n\n    const key = `key${ index }`,\n          value = 'value';\n\n    editField(field, [ 'properties' ], { ...properties, [ key ]: value });\n  };\n\n  const validateFactory = (key) => {\n    return (value) => {\n      if (value === key) {\n        return;\n      }\n\n      if (isUndefined(value) || !value.length) {\n        return 'Must not be empty.';\n      }\n\n      if (has(properties, value)) {\n        return 'Must be unique.';\n      }\n    };\n  };\n\n  const items = Object.keys(properties).map((key, index) => {\n    const removeEntry = (event) => {\n      event.stopPropagation();\n\n      return editField(field, [ 'properties' ], removeKey(properties, key));\n    };\n\n    const id = `${ field.id }-property-${ index }`;\n\n    return {\n      autoFocusEntry: id + '-key',\n      entries: CustomValueEntry({\n        editField,\n        field,\n        idPrefix: id,\n        index,\n        validateFactory\n      }),\n      id,\n      label: key || '',\n      remove: removeEntry\n    };\n  });\n\n  return {\n    add: addEntry,\n    component: ListGroup,\n    id: 'custom-values',\n    items,\n    label: 'Custom properties',\n    shouldSort: false\n  };\n}\n\n\n// helpers //////////\n\n/**\n * Returns copy of object without key.\n *\n * @param {Object} properties\n * @param {string} oldKey\n *\n * @returns {Object}\n */\nexport function removeKey(properties, oldKey) {\n  return Object.entries(properties).reduce((newProperties, entry) => {\n    const [ key, value ] = entry;\n\n    if (key === oldKey) {\n      return newProperties;\n    }\n\n    return {\n      ...newProperties,\n      [ key ]: value\n    };\n  }, {});\n}","import {\n  AdornerEntry\n} from '../entries';\n\n\nexport default function AppearanceGroup(field, editField) {\n\n  const entries = [\n    ...AdornerEntry({ field, editField })\n  ];\n\n  if (!entries.length) {\n    return null;\n  }\n\n  return {\n    id: 'appearance',\n    label: 'Appearance',\n    entries\n  };\n}","import {\n  ConditionEntry\n} from '../entries';\n\n\nexport function ConditionGroup(field, editField) {\n\n  const { type } = field;\n\n  if (type === 'default') {\n    return null;\n  }\n\n  const entries = [\n    ...ConditionEntry({ field, editField })\n  ];\n\n  return {\n    id: 'condition',\n    label: 'Condition',\n    entries\n  };\n}","import { PropertiesPanel } from '@bpmn-io/properties-panel';\n\nimport {\n  useCallback,\n  useState,\n  useLayoutEffect\n} from 'preact/hooks';\n\nimport { FormPropertiesPanelContext } from './context';\n\nimport { PropertiesPanelHeaderProvider } from './PropertiesPanelHeaderProvider';\nimport { PropertiesPanelPlaceholderProvider } from './PropertiesPanelPlaceholderProvider';\n\nimport {\n  ConditionGroup,\n  AppearanceGroup,\n  CustomValuesGroup,\n  GeneralGroup,\n  SerializationGroup,\n  ConstraintsGroup,\n  ValidationGroup,\n  ValuesGroups\n} from './groups';\n\nfunction getGroups(field, editField) {\n\n  if (!field) {\n    return [];\n  }\n\n  const groups = [\n    GeneralGroup(field, editField),\n    ConditionGroup(field, editField),\n    AppearanceGroup(field, editField),\n    SerializationGroup(field, editField),\n    ...ValuesGroups(field, editField),\n    ConstraintsGroup(field, editField),\n    ValidationGroup(field, editField),\n    CustomValuesGroup(field, editField)\n  ];\n\n  // contract: if a group returns null, it should not be displayed at all\n  return groups.filter(group => group !== null);\n}\n\nexport default function FormPropertiesPanel(props) {\n  const {\n    eventBus,\n    injector\n  } = props;\n\n  const formEditor = injector.get('formEditor');\n  const modeling = injector.get('modeling');\n  const selection = injector.get('selection');\n\n  const { schema } = formEditor._getState();\n\n  const [ state, setState ] = useState({\n    selectedFormField: selection.get() || schema\n  });\n\n  const _update = (field) => {\n\n    setState({\n      ...state,\n      selectedFormField: field\n    });\n\n    // notify interested parties on property panel updates\n    eventBus.fire('propertiesPanel.updated', {\n      formField: field\n    });\n  };\n\n  useLayoutEffect(() => {\n    function onSelectionChange(event) {\n      _update(event.selection || schema);\n    }\n\n    eventBus.on('selection.changed', onSelectionChange);\n\n    return () => {\n      eventBus.off('selection.changed', onSelectionChange);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    const onFieldChanged = () => {\n\n      /**\n       * TODO(pinussilvestrus): update with actual updated element,\n       * once we have a proper updater/change support\n       */\n      _update(selection.get() || schema);\n    };\n\n    eventBus.on('changed', onFieldChanged);\n\n    return () => {\n      eventBus.off('changed', onFieldChanged);\n    };\n  }, []);\n\n  const selectedFormField = state.selectedFormField;\n\n  const propertiesPanelContext = {\n    getService(type, strict = true) {\n      return injector.get(type, strict);\n    }\n  };\n\n  const onFocus = () => eventBus.fire('propertiesPanel.focusin');\n\n  const onBlur = () => eventBus.fire('propertiesPanel.focusout');\n\n  const editField = useCallback((formField, key, value) => modeling.editFormField(formField, key, value), [ modeling ]);\n\n  return (\n    <div\n      class=\"fjs-properties-panel\"\n      data-field={ selectedFormField && selectedFormField.id }\n      onFocusCapture={ onFocus }\n      onBlurCapture={ onBlur }\n    >\n      <FormPropertiesPanelContext.Provider value={ propertiesPanelContext }>\n        <PropertiesPanel\n          element={ selectedFormField }\n          eventBus={ eventBus }\n          groups={ getGroups(selectedFormField, editField) }\n          headerProvider={ PropertiesPanelHeaderProvider }\n          placeholderProvider={ PropertiesPanelPlaceholderProvider }\n        />\n      </FormPropertiesPanelContext.Provider>\n    </div>\n  );\n}","import PropertiesPanel from './PropertiesPanel';\n\nimport {\n  render\n} from 'preact';\n\nimport {\n  domify,\n  query as domQuery\n} from 'min-dom';\n\n/**\n * @typedef { { parent: Element } } PropertiesPanelConfig\n * @typedef { import('../../core/EventBus').default } EventBus\n * @typedef { import('../../types').Injector } Injector\n */\n\n/**\n * @param {PropertiesPanelConfig} propertiesPanelConfig\n * @param {Injector} injector\n * @param {EventBus} eventBus\n */\nexport default class PropertiesPanelRenderer {\n\n  constructor(propertiesPanelConfig, injector, eventBus) {\n    const {\n      parent\n    } = propertiesPanelConfig || {};\n\n    this._eventBus = eventBus;\n    this._injector = injector;\n\n    this._container = domify('<div class=\"fjs-properties-container\" input-handle-modified-keys=\"y,z\"></div>');\n\n    if (parent) {\n      this.attachTo(parent);\n    }\n\n    this._eventBus.once('formEditor.rendered', 500, () => {\n      this._render();\n    });\n  }\n\n\n  /**\n   * Attach the properties panel to a parent node.\n   *\n   * @param {HTMLElement} container\n   */\n  attachTo(container) {\n    if (!container) {\n      throw new Error('container required');\n    }\n\n    if (typeof container === 'string') {\n      container = domQuery(container);\n    }\n\n    // (1) detach from old parent\n    this.detach();\n\n    // (2) append to parent container\n    container.appendChild(this._container);\n\n    // (3) notify interested parties\n    this._eventBus.fire('propertiesPanel.attach');\n  }\n\n  /**\n   * Detach the properties panel from its parent node.\n   */\n  detach() {\n    const parentNode = this._container.parentNode;\n\n    if (parentNode) {\n      parentNode.removeChild(this._container);\n\n      this._eventBus.fire('propertiesPanel.detach');\n    }\n  }\n\n  _render() {\n    render(\n      <PropertiesPanel\n        eventBus={ this._eventBus }\n        injector={ this._injector }\n      />,\n      this._container\n    );\n\n    this._eventBus.fire('propertiesPanel.rendered');\n  }\n\n  _destroy() {\n    if (this._container) {\n      render(null, this._container);\n\n      this._eventBus.fire('propertiesPanel.destroyed');\n    }\n  }\n}\n\nPropertiesPanelRenderer.$inject = [ 'config.propertiesPanel', 'injector', 'eventBus' ];","import PropertiesPanelRenderer from './PropertiesPanelRenderer';\n\nexport default {\n  __init__: [ 'propertiesPanel' ],\n  propertiesPanel: [ 'type', PropertiesPanelRenderer ]\n};","import { clone, createFormContainer, createInjector, schemaVersion } from '@bpmn-io/form-js-viewer';\nimport Ids from 'ids';\nimport { isString, set } from 'min-dash';\n\nimport core from './core';\n\nimport EditorActionsModule from './features/editor-actions';\nimport KeyboardModule from './features/keyboard';\nimport ModelingModule from './features/modeling';\nimport SelectionModule from './features/selection';\nimport PaletteModule from './features/palette';\nimport PropertiesPanelModule from './features/properties-panel';\n\nconst ids = new Ids([ 32, 36, 1 ]);\n\n/**\n * @typedef { import('./types').Injector } Injector\n * @typedef { import('./types').Module } Module\n * @typedef { import('./types').Schema } Schema\n *\n * @typedef { import('./types').FormEditorOptions } FormEditorOptions\n * @typedef { import('./types').FormEditorProperties } FormEditorProperties\n *\n * @typedef { {\n *   properties: FormEditorProperties,\n *   schema: Schema\n * } } State\n *\n * @typedef { (type:string, priority:number, handler:Function) => void } OnEventWithPriority\n * @typedef { (type:string, handler:Function) => void } OnEventWithOutPriority\n * @typedef { OnEventWithPriority & OnEventWithOutPriority } OnEventType\n */\n\n/**\n * The form editor.\n */\nexport default class FormEditor {\n\n  /**\n   * @constructor\n   * @param {FormEditorOptions} options\n   */\n  constructor(options = {}) {\n\n    /**\n     * @public\n     * @type {OnEventType}\n     */\n    this.on = this._onEvent;\n\n    /**\n     * @public\n     * @type {String}\n     */\n    this._id = ids.next();\n\n    /**\n     * @private\n     * @type {Element}\n     */\n    this._container = createFormContainer();\n\n    this._container.setAttribute('input-handle-modified-keys', 'z,y');\n\n    const {\n      container,\n      exporter,\n      injector = this._createInjector(options, this._container),\n      properties = {}\n    } = options;\n\n    /**\n     * @private\n     * @type {any}\n     */\n    this.exporter = exporter;\n\n    /**\n     * @private\n     * @type {State}\n     */\n    this._state = {\n      properties,\n      schema: null\n    };\n\n    this.get = injector.get;\n\n    this.invoke = injector.invoke;\n\n    this.get('eventBus').fire('form.init');\n\n    if (container) {\n      this.attachTo(container);\n    }\n  }\n\n  clear() {\n\n    // clear form services\n    this._emit('diagram.clear');\n\n    // clear diagram services (e.g. EventBus)\n    this._emit('form.clear');\n  }\n\n  destroy() {\n\n    // destroy form services\n    this.get('eventBus').fire('form.destroy');\n\n    // destroy diagram services (e.g. EventBus)\n    this.get('eventBus').fire('diagram.destroy');\n\n    this._detach(false);\n  }\n\n  /**\n   * @param {Schema} schema\n   *\n   * @return {Promise<{ warnings: Array<any> }>}\n   */\n  importSchema(schema) {\n    return new Promise((resolve, reject) => {\n      try {\n        this.clear();\n\n        const {\n          schema: importedSchema,\n          warnings\n        } = this.get('importer').importSchema(schema);\n\n        this._setState({\n          schema: importedSchema\n        });\n\n        this._emit('import.done', { warnings });\n\n        return resolve({ warnings });\n      } catch (error) {\n        this._emit('import.done', {\n          error: error,\n          warnings: error.warnings || []\n        });\n\n        return reject(error);\n      }\n    });\n  }\n\n  /**\n   * @returns {Schema}\n   */\n  saveSchema() {\n    return this.getSchema();\n  }\n\n  /**\n   * @returns {Schema}\n   */\n  getSchema() {\n    const { schema } = this._getState();\n\n    return exportSchema(\n      schema,\n      this.exporter,\n      schemaVersion\n    );\n  }\n\n  /**\n   * @param {Element|string} parentNode\n   */\n  attachTo(parentNode) {\n    if (!parentNode) {\n      throw new Error('parentNode required');\n    }\n\n    this.detach();\n\n    if (isString(parentNode)) {\n      parentNode = document.querySelector(parentNode);\n    }\n\n    const container = this._container;\n\n    parentNode.appendChild(container);\n\n    this._emit('attach');\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  /**\n   * @internal\n   *\n   * @param {boolean} [emit]\n   */\n  _detach(emit = true) {\n    const container = this._container,\n          parentNode = container.parentNode;\n\n    if (!parentNode) {\n      return;\n    }\n\n    if (emit) {\n      this._emit('detach');\n    }\n\n    parentNode.removeChild(container);\n  }\n\n  /**\n   * @param {any} property\n   * @param {any} value\n   */\n  setProperty(property, value) {\n    const properties = set(this._getState().properties, [ property ], value);\n\n    this._setState({ properties });\n  }\n\n\n  /**\n   * @param {string} type\n   * @param {Function} handler\n   */\n  off(type, handler) {\n    this.get('eventBus').off(type, handler);\n  }\n\n  /**\n   * @internal\n   *\n   * @param {FormEditorOptions} options\n   * @param {Element} container\n   *\n   * @returns {Injector}\n   */\n  _createInjector(options, container) {\n    const {\n      additionalModules = [],\n      modules = this._getModules(),\n      renderer = {}\n    } = options;\n\n    const config = {\n      ...options,\n      renderer: {\n        ...renderer,\n        container\n      }\n    };\n\n    return createInjector([\n      { config: [ 'value', config ] },\n      { formEditor: [ 'value', this ] },\n      core,\n      ...modules,\n      ...additionalModules\n    ]);\n  }\n\n  /**\n   * @internal\n   */\n  _emit(type, data) {\n    this.get('eventBus').fire(type, data);\n  }\n\n  /**\n   * @internal\n   */\n  _getState() {\n    return this._state;\n  }\n\n  /**\n   * @internal\n   */\n  _setState(state) {\n    this._state = {\n      ...this._state,\n      ...state\n    };\n\n    this._emit('changed', this._getState());\n  }\n\n  /**\n   * @internal\n   */\n  _getModules() {\n    return [\n      ModelingModule,\n      EditorActionsModule,\n      KeyboardModule,\n      SelectionModule,\n      PaletteModule,\n      PropertiesPanelModule\n    ];\n  }\n\n  /**\n   * @internal\n   */\n  _onEvent(type, priority, handler) {\n    this.get('eventBus').on(type, priority, handler);\n  }\n\n}\n\n// helpers //////////\n\nexport function exportSchema(schema, exporter, schemaVersion) {\n\n  const exportDetails = exporter ? {\n    exporter\n  } : {};\n\n  const cleanedSchema = clone(schema, (name, value) => {\n    if ([ '_parent', '_path' ].includes(name)) {\n      return undefined;\n    }\n\n    return value;\n  });\n\n  return {\n    ...cleanedSchema,\n    ...exportDetails,\n    schemaVersion\n  };\n}","import FormEditor from './FormEditor';\r\n\r\nimport { schemaVersion } from '@bpmn-io/form-js-viewer';\r\n\r\nexport {\r\n  FormEditor,\r\n  schemaVersion\r\n};\r\n\r\n/**\r\n * @typedef { import('./types').CreateFormEditorOptions } CreateFormEditorOptions\r\n */\r\n\r\n/**\r\n * Create a form editor.\r\n *\r\n * @param {CreateFormEditorOptions} options\r\n *\r\n * @return {Promise<FormEditor>}\r\n */\r\nexport function createFormEditor(options) {\r\n  const {\r\n    schema,\r\n    ...rest\r\n  } = options;\r\n\r\n  const formEditor = new FormEditor(rest);\r\n\r\n  return formEditor.importSchema(schema).then(() => {\r\n    return formEditor;\r\n  });\r\n}"],"names":["FN_REF","DEFAULT_PRIORITY","slice","Array","prototype","EventBus","_listeners","on","_destroy","events","priority","callback","that","isArray","isFunction","isNumber","Error","actualCallback","bind","self","forEach","e","_addListener","next","once","event","wrappedCallback","__isTomb","result","apply","arguments","off","_removeListener","createEvent","data","InternalEvent","init","fire","type","firstListener","returnValue","args","call","originalType","_invokeListeners","undefined","defaultPrevented","handleError","error","listener","cancelBubble","_invokeListener","invokeFunction","stopPropagation","preventDefault","console","newListener","_getListeners","previousListener","_setListeners","name","nextListener","listenerCallback","assign","fn","DebounceFactory","config","timeout","debounce","$inject","FieldFactory","constructor","formFieldRegistry","formFields","_formFieldRegistry","_formFields","create","attrs","applyDefaults","id","key","fieldDefinition","get","_ids","assigned","_keys","labelAttrs","label","field","_ensureId","keyed","_ensureKey","claim","prefix","nextPrefixed","FormFieldRegistry","BaseFieldRegistry","updateId","formField","newId","_validateId","_eventBus","remove","add","component","components","_parent","Importer","fieldFactory","_fieldFactory","importSchema","schema","warnings","importedSchema","importFormField","clone","err","fieldAttrs","parentId","index","parent","path","_path","importFormFields","map","importer","editorFormFieldClasses","disabled","classNames","_extends","EditorText","props","text","Icon","iconsByType","_jsx","_jsxs","isExpression","Text","disableLinks","editorFormFields","EditorFormFields","FormFields","register","DragAndDropContext","createContext","drake","getService","strict","FormEditorContext","useContext","PALETTE_ENTRIES","filter","f","group","PALETTE_GROUPS","Palette","entries","setEntries","useState","searchTerm","setSearchTerm","inputRef","useRef","groups","groupEntries","useEffect","entry","search","toLowerCase","split","every","term","includes","handleInput","useCallback","target","value","handleClear","current","focus","getIndefiniteArticle","length","getGroup","find","push","g","CURSOR_CLS_PATTERN","set","mode","classes","domClasses","document","body","removeMatching","unset","ContextPad","children","Empty","Element","eventBus","useService","formEditor","modeling","selection","ref","scrollIntoView","elementBounds","getBoundingClientRect","containerBounds","_container","top","bottom","onClick","toggle","class","isSelected","onRemove","parentField","getFormFieldIndex","removeFormField","join","Children","FormEditor","injector","palette","paletteConfig","propertiesPanel","propertiesPanelConfig","_getState","paletteRef","propertiesPanelRef","setSelection","handleSelectionChanged","setDrake","dragAndDropContext","handleDragEvent","context","createDragulaInstance","dragulaInstance","dragula","isContainer","el","classList","contains","copy","accepts","slideFactorX","slideFactorY","element","source","sibling","container","setCursor","unsetCursor","targetFormField","dataset","siblingFormField","targetIndex","fieldType","addFormField","sourceFormField","sourceIndex","moveFormField","onDetach","destroy","onAttach","formRenderContext","formContext","errors","properties","readOnly","formId","_id","onSubmit","onReset","hasDefaultPalette","defaultPalette","attachTo","hasDefaultPropertiesPanel","defaultPropertiesPanel","fieldFormIndex","CreatePreview","handleCloned","original","findPaletteEntry","innerHTML","render","Renderer","renderConfig","compact","App","state","setState","formEditorContext","newState","__init__","renderer","__depends__","importModule","renderModule","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","_actions","_registerDefaultActions","editorActions","commandStack","zoomScroll","copyPaste","canvas","rules","keyboardMove","keyboardMoveSelection","undo","redo","selectedElements","paste","opts","stepZoom","zoom","allowed","elements","removableElements","removeElements","moveCanvas","moveSelection","direction","accelerated","trigger","action","actions","_registerAction","isRegistered","unregister","getActions","Object","keys","message","FormEditorActions","options","EditorActionsModule","KEYS_COPY","KEYS_PASTE","KEYS_REDO","KEYS_UNDO","hasModifier","ctrlKey","metaKey","shiftKey","altKey","isCmd","isKey","indexOf","code","isShift","isCopy","isPaste","isUndo","isRedo","KEYDOWN_EVENT","KEYUP_EVENT","HANDLE_MODIFIER_ATTRIBUTE","Keyboard","_config","_keydownHandler","_keyupHandler","_fire","unbind","bindTo","_keyHandler","eventBusResult","_isEventIgnored","keyEvent","isInput","_isModifiedKeyIgnored","allowedModifiers","_getAllowedModifiers","modifierContainer","domClosest","_node","getAttribute","node","domEvent","getBinding","addListener","removeListener","domMatches","contentEditable","LOW_PRIORITY","KeyboardBindings","keyboard","registerBindings","keyboardBindings","FormEditorKeyboardBindings","KeyboardModule","arrayAdd","array","item","splice","arrayRemove","updatePath","AddFormFieldHandler","_formEditor","execute","targetPath","_setState","revert","EditFormFieldHandler","oldProperties","property","MoveFormFieldHandler","sourcePath","arrayMove","RemoveFormFieldHandler","UpdateIdClaimHandler","claiming","unclaim","UpdateKeyClaimHandler","Modeling","_commandStack","registerHandlers","getHandlers","handler","registerHandler","editFormField","isObject","claimId","unclaimId","claimKey","unclaimKey","CommandInterceptor","unwrapEvent","command","hook","handlerFn","unwrap","fullEvent","hooks","IdBehavior","preExecute","KeyBehavior","ValidateBehavior","validate","validationType","newValidate","minLength","maxLength","pattern","idBehavior","keyBehavior","validateBehavior","CommandStack","_handlerMap","_stack","_stackIdx","_currentExecution","dirty","_injector","_uid","clear","_pushAction","_internalExecute","_popAction","canExecute","_getHandler","emit","_getUndoAction","_internalUndo","_getRedoAction","_setHandler","handlerCls","instantiate","canUndo","canRedo","_atomicDo","_markDirty","_revertedAction","qualifier","names","_createId","execution","atomic","_executedAction","postExecute","baseAction","pop","uniqueBy","reverse","concat","stackIdx","behaviorModule","commandModule","Selection","_selection","newSelection","SelectionBehavior","selectionBehavior","PaletteRenderer","domify","_render","domQuery","detach","appendChild","parentNode","removeChild","Header","headerProvider","getElementIcon","getDocumentationRef","getElementLabel","getTypeLabel","documentationRef","ElementIcon","width","height","viewBox","title","rel","href","ExternalLinkIcon","PropertiesPanelContext","countDecimals","number","num","Big","toString","toFixed","isValidNumber","isNaN","Number","textToLabel","line","displayLine","trim","INPUTS","VALUES_INPUTS","labelsByType","button","checkbox","checklist","columns","default","datetime","image","radio","select","taglist","textfield","textarea","PropertiesPanelHeaderProvider","alt","PropertiesPanelPlaceholderProvider","getEmpty","getMultiple","ActionEntry","editField","Action","isEdited","isSelectEntryEdited","getValue","setValue","getOptions","SelectEntry","FormPropertiesPanelContext","useVariables","form","getSchema","getSchemaVariables","AltTextEntry","AltText","isFeelEntryEdited","variables","FeelEntry","feel","ColumnsEntry","Columns","isNumberFieldEntryEdited","Default","NumberFieldEntry","DescriptionEntry","Description","isTextFieldEntryEdited","TextFieldEntry","EMPTY_OPTION","DefaultOptionEntry","values","defaultOptions","DefaultValueCheckbox","DefaultValueNumber","DefaultValueSingleSelect","DefaultValueTextfield","DefaultValueTextarea","isTextAreaEntryEdited","defaultValue","parseStringToBoolean","parseBooleanToString","decimalDigits","serializeToString","newValue","decimalDigitsSet","TextAreaEntry","DisabledEntry","Disabled","isCheckboxEntryEdited","CheckboxEntry","IdEntry","Id","isUndefined","validateId","SPACE_REGEX","QNAME_REGEX","ID_REGEX","idValue","containsSpace","test","KeyEntry","Key","description","simpleStringEntryFactory","SimpleStringComponent","simpleBoolEntryFactory","SimpleBoolComponent","LabelEntry","subtype","DATETIME_SUBTYPES","DATE","DATETIME","DATE_LABEL_PATH","TIME","TIME_LABEL_PATH","SourceEntry","Source","TextEntry","FeelTextAreaEntry","rows","NumberEntries","NumberDecimalDigits","NumberArrowStep","step","isInteger","clearLeadingZeroes","trimmed","replace","startsWith","cmp","minimumValue","NumberSerializationEntry","SerializeToString","DateTimeEntry","DateTimeSubtypeSelect","Use24h","DATETIME_SUBTYPE_PATH","clearTimeConfig","timeConfigPaths","TIME_USE24H_PATH","TIME_INTERVAL_PATH","TIME_SERIALISING_FORMAT_PATH","initTimeConfig","TIME_SERIALISING_FORMATS","UTC_OFFSET","clearDateConfig","dateConfigPaths","DATE_DISALLOW_PAST_PATH","initDateConfig","oldValue","getDatetimeSubtypes","DATETIME_SUBTYPES_LABELS","DateTimeConstraintsEntry","TimeIntervalSelect","DisallowPassedDates","timeIntervals","parseInt","getTimeIntervals","timeInterval","DateTimeFormatEntry","TimeFormatSelect","getTimeSerialisingFormats","format","TIME_SERIALISINGFORMAT_LABELS","SelectEntries","ValueEntry","idPrefix","validateFactory","Label","Value","CustomValueEntry","updateKey","updateValue","oldKey","newKey","reduce","newProperties","ValuesSourceSelectEntry","ValuesSourceSelect","getValuesSource","newField","VALUES_SOURCES","VALUES_SOURCES_DEFAULTS","VALUES_SOURCES_PATHS","getValuesSourceOptions","valueSource","VALUES_SOURCES_LABELS","InputKeyValuesSourceEntry","InputValuesKey","INPUT","StaticValuesSourceEntry","addEntry","getIndexedEntry","STATIC","removeEntry","without","isValueAssigned","items","autoFocusEntry","shouldSort","AdornerEntry","onChange","appearance","PrefixAdorner","SuffixAdorner","ConditionEntry","Condition","hide","GeneralGroup","DefaultValueEntry","ImageSourceEntry","SerializationGroup","DateTimeSerializationEntry","ConstraintsGroup","VALIDATION_TYPE_OPTIONS","custom","email","phone","ValidationGroup","isCustomValidation","Required","ValidationType","MinLength","MaxLength","Pattern","Min","Max","min","ValuesGroups","fieldId","valuesSourceId","Group","valuesSource","dynamicValuesId","staticValuesId","ListGroup","CustomValuesGroup","has","removeKey","AppearanceGroup","ConditionGroup","getGroups","FormPropertiesPanel","selectedFormField","_update","useLayoutEffect","onSelectionChange","onFieldChanged","propertiesPanelContext","onFocus","onBlur","PropertiesPanelRenderer","PropertiesPanel","ids","Ids","_onEvent","createFormContainer","setAttribute","exporter","_createInjector","_state","invoke","_emit","_detach","Promise","resolve","reject","saveSchema","exportSchema","schemaVersion","isString","querySelector","setProperty","additionalModules","modules","_getModules","createInjector","core","ModelingModule","SelectionModule","PaletteModule","PropertiesPanelModule","exportDetails","cleanedSchema","createFormEditor","rest","then"],"mappings":"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,EAAC;AAAE,OAAC,GAAG7K,UAAU,CAAA;MAEpC,IAAI6K,QAAQ,CAACC,cAAc,EAAE;AAC3B,QAAA,MAAMC,WAAW,GAAG;UAClB,GAAGF,QAAAA;SACJ,CAAA;QAED,OAAOE,WAAW,CAACC,SAAS,CAAA;QAC5B,OAAOD,WAAW,CAACE,SAAS,CAAA;QAC5B,OAAOF,WAAW,CAACG,OAAO,CAAA;AAE1BlL,QAAAA,UAAU,CAAC,UAAU,CAAC,GAAG+K,WAAW,CAAA;AACtC,OAAA;KACD,EAAE,IAAI,CAAC,CAAA;AACV,GAAA;AACF,CAAA;AAEAH,gBAAgB,CAACrX,OAAO,GAAG,CAAE,UAAU,CAAE;;AC1BzC,qBAAe;AACbmO,EAAAA,QAAQ,EAAE,CACR,YAAY,EACZ,aAAa,EACb,kBAAkB,CACnB;AACDyJ,EAAAA,UAAU,EAAE,CAAE,MAAM,EAAEV,UAAU,CAAE;AAClCW,EAAAA,WAAW,EAAE,CAAE,MAAM,EAAET,WAAW,CAAE;AACpCU,EAAAA,gBAAgB,EAAE,CAAE,MAAM,EAAET,gBAAgB,CAAA;AAC9C,CAAC;;ACPD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASU,YAAY,CAAC5P,QAAQ,EAAEwB,QAAQ,EAAE;AAEvD;AACF;AACA;AACA;AACA;AACE,EAAA,IAAI,CAACqO,WAAW,GAAG,EAAE,CAAA;;AAErB;AACF;AACA;AACA;AACA;EACE,IAAI,CAACC,MAAM,GAAG,EAAE,CAAA;;AAEhB;AACF;AACA;AACA;AACA;AACE,EAAA,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC,CAAA;;AAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE,IAAI,CAACC,iBAAiB,GAAG;AACvB7H,IAAAA,OAAO,EAAE,EAAE;AACX8H,IAAAA,KAAK,EAAE,EAAE;AACThI,IAAAA,OAAO,EAAE,IAAA;GACV,CAAA;EAGD,IAAI,CAACiI,SAAS,GAAG1O,QAAQ,CAAA;EACzB,IAAI,CAAC3H,SAAS,GAAGmG,QAAQ,CAAA;EAEzB,IAAI,CAACmQ,IAAI,GAAG,CAAC,CAAA;EAEbnQ,QAAQ,CAACjM,EAAE,CAAC,CACV,iBAAiB,EACjB,eAAe,CAChB,EAAE,YAAW;AACZ,IAAA,IAAI,CAACqc,KAAK,CAAC,KAAK,CAAC,CAAA;GAClB,EAAE,IAAI,CAAC,CAAA;AACV,CAAA;AAEAR,YAAY,CAAC/X,OAAO,GAAG,CAAE,UAAU,EAAE,UAAU,CAAE,CAAA;;AAGjD;AACA;AACA;AACA;AACA;AACA;AACA+X,YAAY,CAAChc,SAAS,CAACgZ,OAAO,GAAG,UAAS6B,OAAO,EAAEpM,OAAO,EAAE;EAC1D,IAAI,CAACoM,OAAO,EAAE;AACZ,IAAA,MAAM,IAAIja,KAAK,CAAC,kBAAkB,CAAC,CAAA;AACrC,GAAA;AAEA,EAAA,IAAI,CAACwb,iBAAiB,CAAC/H,OAAO,GAAG,SAAS,CAAA;AAE1C,EAAA,MAAMC,MAAM,GAAG;AAAEuG,IAAAA,OAAO,EAAEA,OAAO;AAAEpM,IAAAA,OAAO,EAAEA,OAAAA;GAAS,CAAA;AAErD,EAAA,IAAI,CAACgO,WAAW,CAACnI,MAAM,CAAC,CAAA;AACxB,EAAA,IAAI,CAACoI,gBAAgB,CAACpI,MAAM,CAAC,CAAA;AAC7B,EAAA,IAAI,CAACqI,UAAU,CAACrI,MAAM,CAAC,CAAA;AACzB,CAAC,CAAA;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA0H,YAAY,CAAChc,SAAS,CAAC4c,UAAU,GAAG,UAAS/B,OAAO,EAAEpM,OAAO,EAAE;AAE7D,EAAA,MAAM6F,MAAM,GAAG;AAAEuG,IAAAA,OAAO,EAAEA,OAAO;AAAEpM,IAAAA,OAAO,EAAEA,OAAAA;GAAS,CAAA;AAErD,EAAA,MAAM0L,OAAO,GAAG,IAAI,CAAC0C,WAAW,CAAChC,OAAO,CAAC,CAAA;EAEzC,IAAIrZ,MAAM,GAAG,IAAI,CAACmV,KAAK,CAACkE,OAAO,EAAE,YAAY,EAAEvG,MAAM,CAAC,CAAA;;AAEtD;AACA;EACA,IAAI9S,MAAM,KAAKiB,SAAS,EAAE;IACxB,IAAI,CAAC0X,OAAO,EAAE;AACZ,MAAA,OAAO,KAAK,CAAA;AACd,KAAA;IAEA,IAAIA,OAAO,CAACyC,UAAU,EAAE;AACtBpb,MAAAA,MAAM,GAAG2Y,OAAO,CAACyC,UAAU,CAACnO,OAAO,CAAC,CAAA;AACtC,KAAA;AACF,GAAA;AAEA,EAAA,OAAOjN,MAAM,CAAA;AACf,CAAC,CAAA;;AAGD;AACA;AACA;AACAwa,YAAY,CAAChc,SAAS,CAACwc,KAAK,GAAG,UAASM,IAAI,EAAE;AAC5C,EAAA,IAAI,CAACZ,MAAM,CAAChR,MAAM,GAAG,CAAC,CAAA;AACtB,EAAA,IAAI,CAACiR,SAAS,GAAG,CAAC,CAAC,CAAA;EAEnB,IAAIW,IAAI,KAAK,KAAK,EAAE;AAClB,IAAA,IAAI,CAACnG,KAAK,CAAC,SAAS,EAAE;AAAEtC,MAAAA,OAAO,EAAE,OAAA;AAAQ,KAAC,CAAC,CAAA;AAC7C,GAAA;AACF,CAAC,CAAA;;AAGD;AACA;AACA;AACA2H,YAAY,CAAChc,SAAS,CAACsT,IAAI,GAAG,YAAW;AACvC,EAAA,IAAIgB,MAAM,GAAG,IAAI,CAACyI,cAAc,EAAE;IAC9B5b,IAAI,CAAA;AAER,EAAA,IAAImT,MAAM,EAAE;AACV,IAAA,IAAI,CAAC8H,iBAAiB,CAAC/H,OAAO,GAAG,MAAM,CAAA;AAEvC,IAAA,IAAI,CAACoI,WAAW,CAACnI,MAAM,CAAC,CAAA;AAExB,IAAA,OAAOA,MAAM,EAAE;AACb,MAAA,IAAI,CAAC0I,aAAa,CAAC1I,MAAM,CAAC,CAAA;AAC1BnT,MAAAA,IAAI,GAAG,IAAI,CAAC4b,cAAc,EAAE,CAAA;MAE5B,IAAI,CAAC5b,IAAI,IAAIA,IAAI,CAACwD,EAAE,KAAK2P,MAAM,CAAC3P,EAAE,EAAE;AAClC,QAAA,MAAA;AACF,OAAA;AAEA2P,MAAAA,MAAM,GAAGnT,IAAI,CAAA;AACf,KAAA;IAEA,IAAI,CAACwb,UAAU,EAAE,CAAA;AACnB,GAAA;AACF,CAAC,CAAA;;AAGD;AACA;AACA;AACAX,YAAY,CAAChc,SAAS,CAACuT,IAAI,GAAG,YAAW;AACvC,EAAA,IAAIe,MAAM,GAAG,IAAI,CAAC2I,cAAc,EAAE;IAC9B9b,IAAI,CAAA;AAER,EAAA,IAAImT,MAAM,EAAE;AACV,IAAA,IAAI,CAAC8H,iBAAiB,CAAC/H,OAAO,GAAG,MAAM,CAAA;AAEvC,IAAA,IAAI,CAACoI,WAAW,CAACnI,MAAM,CAAC,CAAA;AAExB,IAAA,OAAOA,MAAM,EAAE;AACb,MAAA,IAAI,CAACoI,gBAAgB,CAACpI,MAAM,EAAE,IAAI,CAAC,CAAA;AACnCnT,MAAAA,IAAI,GAAG,IAAI,CAAC8b,cAAc,EAAE,CAAA;MAE5B,IAAI,CAAC9b,IAAI,IAAIA,IAAI,CAACwD,EAAE,KAAK2P,MAAM,CAAC3P,EAAE,EAAE;AAClC,QAAA,MAAA;AACF,OAAA;AAEA2P,MAAAA,MAAM,GAAGnT,IAAI,CAAA;AACf,KAAA;IAEA,IAAI,CAACwb,UAAU,EAAE,CAAA;AACnB,GAAA;AACF,CAAC,CAAA;;AAGD;AACA;AACA;AACA;AACA;AACA;AACAX,YAAY,CAAChc,SAAS,CAAC2I,QAAQ,GAAG,UAASkS,OAAO,EAAEV,OAAO,EAAE;AAC3D,EAAA,IAAI,CAAC+C,WAAW,CAACrC,OAAO,EAAEV,OAAO,CAAC,CAAA;AACpC,CAAC,CAAA;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA6B,YAAY,CAAChc,SAAS,CAACoa,eAAe,GAAG,UAASS,OAAO,EAAEsC,UAAU,EAAE;AAErE,EAAA,IAAI,CAACtC,OAAO,IAAI,CAACsC,UAAU,EAAE;AAC3B,IAAA,MAAM,IAAIvc,KAAK,CAAC,wCAAwC,CAAC,CAAA;AAC3D,GAAA;EAEA,MAAMuZ,OAAO,GAAG,IAAI,CAACmC,SAAS,CAACc,WAAW,CAACD,UAAU,CAAC,CAAA;AACtD,EAAA,IAAI,CAACxU,QAAQ,CAACkS,OAAO,EAAEV,OAAO,CAAC,CAAA;AACjC,CAAC,CAAA;AAED6B,YAAY,CAAChc,SAAS,CAACqd,OAAO,GAAG,YAAW;AAC1C,EAAA,OAAO,CAAC,CAAC,IAAI,CAACN,cAAc,EAAE,CAAA;AAChC,CAAC,CAAA;AAEDf,YAAY,CAAChc,SAAS,CAACsd,OAAO,GAAG,YAAW;AAC1C,EAAA,OAAO,CAAC,CAAC,IAAI,CAACL,cAAc,EAAE,CAAA;AAChC,CAAC,CAAA;;AAED;;AAEAjB,YAAY,CAAChc,SAAS,CAACid,cAAc,GAAG,YAAW;EACjD,OAAO,IAAI,CAACf,MAAM,CAAC,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC,CAAA;AACxC,CAAC,CAAA;AAGDH,YAAY,CAAChc,SAAS,CAAC+c,cAAc,GAAG,YAAW;AACjD,EAAA,OAAO,IAAI,CAACb,MAAM,CAAC,IAAI,CAACC,SAAS,CAAC,CAAA;AACpC,CAAC,CAAA;;AAGD;;AAEAH,YAAY,CAAChc,SAAS,CAACgd,aAAa,GAAG,UAAS1I,MAAM,EAAE;AACtD,EAAA,MAAMuG,OAAO,GAAGvG,MAAM,CAACuG,OAAO;IACxBpM,OAAO,GAAG6F,MAAM,CAAC7F,OAAO,CAAA;AAE9B,EAAA,MAAM0L,OAAO,GAAG,IAAI,CAAC0C,WAAW,CAAChC,OAAO,CAAC,CAAA;;AAEzC;EACA,IAAI,CAAC0C,SAAS,CAAC,MAAM;IACnB,IAAI,CAAC5G,KAAK,CAACkE,OAAO,EAAE,QAAQ,EAAEvG,MAAM,CAAC,CAAA;IAErC,IAAI6F,OAAO,CAAChB,MAAM,EAAE;MAClB,IAAI,CAACqE,UAAU,CAACrD,OAAO,CAAChB,MAAM,CAAC1K,OAAO,CAAC,CAAC,CAAA;AAC1C,KAAA;AAEA,IAAA,IAAI,CAACgP,eAAe,CAACnJ,MAAM,CAAC,CAAA;IAE5B,IAAI,CAACqC,KAAK,CAACkE,OAAO,EAAE,UAAU,EAAEvG,MAAM,CAAC,CAAA;AACzC,GAAC,CAAC,CAAA;AACJ,CAAC,CAAA;AAGD0H,YAAY,CAAChc,SAAS,CAAC2W,KAAK,GAAG,UAASkE,OAAO,EAAE6C,SAAS,EAAErc,KAAK,EAAE;AACjE,EAAA,IAAIK,SAAS,CAACwJ,MAAM,GAAG,CAAC,EAAE;AACxB7J,IAAAA,KAAK,GAAGqc,SAAS,CAAA;AACjBA,IAAAA,SAAS,GAAG,IAAI,CAAA;AAClB,GAAA;AAEA,EAAA,MAAMC,KAAK,GAAGD,SAAS,GAAG,CAAE7C,OAAO,GAAG,GAAG,GAAG6C,SAAS,EAAEA,SAAS,CAAE,GAAG,CAAE7C,OAAO,CAAE,CAAA;AAChF,EAAA,IAAIrZ,MAAM,CAAA;EAEVH,KAAK,GAAG,IAAI,CAAC4E,SAAS,CAACpE,WAAW,CAACR,KAAK,CAAC,CAAA;AAEzC,EAAA,KAAK,MAAMmC,IAAI,IAAIma,KAAK,EAAE;AACxBnc,IAAAA,MAAM,GAAG,IAAI,CAACyE,SAAS,CAAChE,IAAI,CAAC,eAAe,GAAGuB,IAAI,EAAEnC,KAAK,CAAC,CAAA;IAE3D,IAAIA,KAAK,CAACyB,YAAY,EAAE;AACtB,MAAA,MAAA;AACF,KAAA;AACF,GAAA;AAEA,EAAA,OAAOtB,MAAM,CAAA;AACf,CAAC,CAAA;AAEDwa,YAAY,CAAChc,SAAS,CAAC4d,SAAS,GAAG,YAAW;EAC5C,OAAO,IAAI,CAACrB,IAAI,EAAE,CAAA;AACpB,CAAC,CAAA;AAEDP,YAAY,CAAChc,SAAS,CAACud,SAAS,GAAG,UAAS3Z,EAAE,EAAE;AAE9C,EAAA,MAAMia,SAAS,GAAG,IAAI,CAACzB,iBAAiB,CAAA;EAExCyB,SAAS,CAACC,MAAM,GAAG,IAAI,CAAA;EAEvB,IAAI;AACFla,IAAAA,EAAE,EAAE,CAAA;AACN,GAAC,SAAS;IACRia,SAAS,CAACC,MAAM,GAAG,KAAK,CAAA;AAC1B,GAAA;AACF,CAAC,CAAA;AAED9B,YAAY,CAAChc,SAAS,CAAC0c,gBAAgB,GAAG,UAASpI,MAAM,EAAEf,IAAI,EAAE;AAC/D,EAAA,MAAMsH,OAAO,GAAGvG,MAAM,CAACuG,OAAO;IACxBpM,OAAO,GAAG6F,MAAM,CAAC7F,OAAO,CAAA;AAE9B,EAAA,MAAM0L,OAAO,GAAG,IAAI,CAAC0C,WAAW,CAAChC,OAAO,CAAC,CAAA;EAEzC,IAAI,CAACV,OAAO,EAAE;IACZ,MAAM,IAAIvZ,KAAK,CAAC,qCAAqC,GAAGia,OAAO,GAAG,GAAG,CAAC,CAAA;AACxE,GAAA;AAEA,EAAA,IAAI,CAAC4B,WAAW,CAACnI,MAAM,CAAC,CAAA;EAExB,IAAI,CAACf,IAAI,EAAE;IACT,IAAI,CAACoD,KAAK,CAACkE,OAAO,EAAE,YAAY,EAAEvG,MAAM,CAAC,CAAA;IAEzC,IAAI6F,OAAO,CAACiB,UAAU,EAAE;AACtBjB,MAAAA,OAAO,CAACiB,UAAU,CAAC3M,OAAO,CAAC,CAAA;AAC7B,KAAA;IAEA,IAAI,CAACkI,KAAK,CAACkE,OAAO,EAAE,aAAa,EAAEvG,MAAM,CAAC,CAAA;AAC5C,GAAA;;AAEA;EACA,IAAI,CAACiJ,SAAS,CAAC,MAAM;IAEnB,IAAI,CAAC5G,KAAK,CAACkE,OAAO,EAAE,SAAS,EAAEvG,MAAM,CAAC,CAAA;IAEtC,IAAI6F,OAAO,CAACnB,OAAO,EAAE;AAEnB;MACA,IAAI,CAACwE,UAAU,CAACrD,OAAO,CAACnB,OAAO,CAACvK,OAAO,CAAC,CAAC,CAAA;AAC3C,KAAA;;AAEA;AACA,IAAA,IAAI,CAACsP,eAAe,CAACzJ,MAAM,EAAEf,IAAI,CAAC,CAAA;IAElC,IAAI,CAACoD,KAAK,CAACkE,OAAO,EAAE,UAAU,EAAEvG,MAAM,CAAC,CAAA;AACzC,GAAC,CAAC,CAAA;EAEF,IAAI,CAACf,IAAI,EAAE;IACT,IAAI,CAACoD,KAAK,CAACkE,OAAO,EAAE,aAAa,EAAEvG,MAAM,CAAC,CAAA;IAE1C,IAAI6F,OAAO,CAAC6D,WAAW,EAAE;AACvB7D,MAAAA,OAAO,CAAC6D,WAAW,CAACvP,OAAO,CAAC,CAAA;AAC9B,KAAA;IAEA,IAAI,CAACkI,KAAK,CAACkE,OAAO,EAAE,cAAc,EAAEvG,MAAM,CAAC,CAAA;AAC7C,GAAA;AAEA,EAAA,IAAI,CAACqI,UAAU,CAACrI,MAAM,CAAC,CAAA;AACzB,CAAC,CAAA;AAGD0H,YAAY,CAAChc,SAAS,CAACyc,WAAW,GAAG,UAASnI,MAAM,EAAE;AAEpD,EAAA,MAAMuJ,SAAS,GAAG,IAAI,CAACzB,iBAAiB;IAClC7H,OAAO,GAAGsJ,SAAS,CAACtJ,OAAO,CAAA;AAEjC,EAAA,MAAM0J,UAAU,GAAG1J,OAAO,CAAC,CAAC,CAAC,CAAA;EAE7B,IAAIsJ,SAAS,CAACC,MAAM,EAAE;IACpB,MAAM,IAAIld,KAAK,CAAC,6DAA6D,GAAG0T,MAAM,CAACuG,OAAO,GAAG,GAAG,CAAC,CAAA;AACvG,GAAA;AAEA,EAAA,IAAI,CAACvG,MAAM,CAAC3P,EAAE,EAAE;AACd2P,IAAAA,MAAM,CAAC3P,EAAE,GAAIsZ,UAAU,IAAIA,UAAU,CAACtZ,EAAE,IAAK,IAAI,CAACiZ,SAAS,EAAE,CAAA;AAC/D,GAAA;AAEArJ,EAAAA,OAAO,CAAClJ,IAAI,CAACiJ,MAAM,CAAC,CAAA;AACtB,CAAC,CAAA;AAGD0H,YAAY,CAAChc,SAAS,CAAC2c,UAAU,GAAG,YAAW;AAC7C,EAAA,MAAMkB,SAAS,GAAG,IAAI,CAACzB,iBAAiB;IAClC/H,OAAO,GAAGwJ,SAAS,CAACxJ,OAAO;IAC3BE,OAAO,GAAGsJ,SAAS,CAACtJ,OAAO;IAC3B8H,KAAK,GAAGwB,SAAS,CAACxB,KAAK,CAAA;EAE7B9H,OAAO,CAAC2J,GAAG,EAAE,CAAA;AAEb,EAAA,IAAI,CAAC3J,OAAO,CAACrJ,MAAM,EAAE;AACnB,IAAA,IAAI,CAACjF,SAAS,CAAChE,IAAI,CAAC,kBAAkB,EAAE;MAAE6R,QAAQ,EAAEqK,QAAQ,CAAC,IAAI,EAAE9B,KAAK,CAAC+B,OAAO,EAAE,CAAA;AAAE,KAAC,CAAC,CAAA;IAEtF/B,KAAK,CAACnR,MAAM,GAAG,CAAC,CAAA;AAEhB,IAAA,IAAI,CAACyL,KAAK,CAAC,SAAS,EAAE;AAAEtC,MAAAA,OAAO,EAAEA,OAAAA;AAAQ,KAAC,CAAC,CAAA;IAE3CwJ,SAAS,CAACxJ,OAAO,GAAG,IAAI,CAAA;AAC1B,GAAA;AACF,CAAC,CAAA;AAGD2H,YAAY,CAAChc,SAAS,CAACwd,UAAU,GAAG,UAAS1J,QAAQ,EAAE;AACrD,EAAA,MAAM+J,SAAS,GAAG,IAAI,CAACzB,iBAAiB,CAAA;EAExC,IAAI,CAACtI,QAAQ,EAAE;AACb,IAAA,OAAA;AACF,GAAA;EAEAA,QAAQ,GAAGrT,OAAO,CAACqT,QAAQ,CAAC,GAAGA,QAAQ,GAAG,CAAEA,QAAQ,CAAE,CAAA;EAEtD+J,SAAS,CAACxB,KAAK,GAAGwB,SAAS,CAACxB,KAAK,CAACgC,MAAM,CAACvK,QAAQ,CAAC,CAAA;AACpD,CAAC,CAAA;AAGDkI,YAAY,CAAChc,SAAS,CAAC+d,eAAe,GAAG,UAASzJ,MAAM,EAAEf,IAAI,EAAE;AAC9D,EAAA,MAAM+K,QAAQ,GAAG,EAAE,IAAI,CAACnC,SAAS,CAAA;EAEjC,IAAI,CAAC5I,IAAI,EAAE;AACT,IAAA,IAAI,CAAC2I,MAAM,CAACvD,MAAM,CAAC2F,QAAQ,EAAE,IAAI,CAACpC,MAAM,CAAChR,MAAM,EAAEoJ,MAAM,CAAC,CAAA;AAC1D,GAAA;AACF,CAAC,CAAA;AAGD0H,YAAY,CAAChc,SAAS,CAACyd,eAAe,GAAG,UAASnJ,MAAM,EAAE;EACxD,IAAI,CAAC6H,SAAS,EAAE,CAAA;AAClB,CAAC,CAAA;AAGDH,YAAY,CAAChc,SAAS,CAAC6c,WAAW,GAAG,UAAShC,OAAO,EAAE;AACrD,EAAA,OAAO,IAAI,CAACoB,WAAW,CAACpB,OAAO,CAAC,CAAA;AAClC,CAAC,CAAA;AAEDmB,YAAY,CAAChc,SAAS,CAACkd,WAAW,GAAG,UAASrC,OAAO,EAAEV,OAAO,EAAE;AAC9D,EAAA,IAAI,CAACU,OAAO,IAAI,CAACV,OAAO,EAAE;AACxB,IAAA,MAAM,IAAIvZ,KAAK,CAAC,8BAA8B,CAAC,CAAA;AACjD,GAAA;AAEA,EAAA,IAAI,IAAI,CAACqb,WAAW,CAACpB,OAAO,CAAC,EAAE;IAC7B,MAAM,IAAIja,KAAK,CAAC,kCAAkC,GAAGia,OAAO,GAAG,GAAG,CAAC,CAAA;AACrE,GAAA;AAEA,EAAA,IAAI,CAACoB,WAAW,CAACpB,OAAO,CAAC,GAAGV,OAAO,CAAA;AACrC,CAAC;;AC/fD,oBAAe;AACbpH,EAAAA,YAAY,EAAE,CAAE,MAAM,EAAEiJ,YAAY,CAAA;AACtC,CAAC;;ACCD,qBAAe;AACb1J,EAAAA,WAAW,EAAE,CACXiM,cAAc,EACdC,aAAa,CACd;EACDpM,QAAQ,EAAE,CAAE,UAAU,CAAE;AACxB7F,EAAAA,QAAQ,EAAE,CAAE,MAAM,EAAEwN,QAAQ,CAAA;AAC9B,CAAC;;ACZc,MAAM0E,SAAS,CAAC;EAC7Bta,WAAW,CAACiI,QAAQ,EAAE;IACpB,IAAI,CAACnG,SAAS,GAAGmG,QAAQ,CAAA;IACzB,IAAI,CAACsS,UAAU,GAAG,IAAI,CAAA;AACxB,GAAA;AAEA5Z,EAAAA,GAAG,GAAG;IACJ,OAAO,IAAI,CAAC4Z,UAAU,CAAA;AACxB,GAAA;EAEAlT,GAAG,CAACgB,SAAS,EAAE;AACb,IAAA,IAAI,IAAI,CAACkS,UAAU,KAAKlS,SAAS,EAAE;AACjC,MAAA,OAAA;AACF,KAAA;IAEA,IAAI,CAACkS,UAAU,GAAGlS,SAAS,CAAA;AAE3B,IAAA,IAAI,CAACvG,SAAS,CAAChE,IAAI,CAAC,mBAAmB,EAAE;MACvCuK,SAAS,EAAE,IAAI,CAACkS,UAAAA;AAClB,KAAC,CAAC,CAAA;AACJ,GAAA;EAEAxR,MAAM,CAACV,SAAS,EAAE;IAChB,MAAMmS,YAAY,GAAG,IAAI,CAACD,UAAU,KAAKlS,SAAS,GAAG,IAAI,GAAGA,SAAS,CAAA;AAErE,IAAA,IAAI,CAAChB,GAAG,CAACmT,YAAY,CAAC,CAAA;AACxB,GAAA;AAEAnC,EAAAA,KAAK,GAAG;AACN,IAAA,IAAI,CAAChR,GAAG,CAAC,IAAI,CAAC,CAAA;AAChB,GAAA;EAEA4B,UAAU,CAACtH,SAAS,EAAE;AACpB,IAAA,OAAO,IAAI,CAAC4Y,UAAU,KAAK5Y,SAAS,CAAA;AACtC,GAAA;AACF,CAAA;AAEA2Y,SAAS,CAACxa,OAAO,GAAG,CAAE,UAAU,CAAE;;ACrCnB,MAAM2a,iBAAiB,CAAC;AACrCza,EAAAA,WAAW,CAACiI,QAAQ,EAAEI,SAAS,EAAE;IAC/BJ,QAAQ,CAACjM,EAAE,CAAC,CACV,yCAAyC,EACzC,0CAA0C,CAC3C,EAAE,CAAC;AAAEsO,MAAAA,OAAAA;AAAQ,KAAC,KAAK;MAClB,MAAM;AAAE3I,QAAAA,SAAAA;AAAU,OAAC,GAAG2I,OAAO,CAAA;AAE7BjC,MAAAA,SAAS,CAAChB,GAAG,CAAC1F,SAAS,CAAC,CAAA;AAC1B,KAAC,CAAC,CAAA;AAEFsG,IAAAA,QAAQ,CAACjM,EAAE,CAAC,4CAA4C,EAAE,CAAC;AAAEsO,MAAAA,OAAAA;AAAQ,KAAC,KAAK;MACzE,MAAM;QACJwB,eAAe;AACfC,QAAAA,WAAAA;AACF,OAAC,GAAGzB,OAAO,CAAA;AAEX,MAAA,MAAM3I,SAAS,GAAGmK,eAAe,CAAC5J,UAAU,CAAE6J,WAAW,CAAE,IAAID,eAAe,CAAC5J,UAAU,CAAE6J,WAAW,GAAG,CAAC,CAAE,CAAA;AAE5G,MAAA,IAAIpK,SAAS,EAAE;AACb0G,QAAAA,SAAS,CAAChB,GAAG,CAAC1F,SAAS,CAAC,CAAA;AAC1B,OAAC,MAAM;QACL0G,SAAS,CAACgQ,KAAK,EAAE,CAAA;AACnB,OAAA;AACF,KAAC,CAAC,CAAA;AAEFpQ,IAAAA,QAAQ,CAACjM,EAAE,CAAC,kBAAkB,EAAE,CAAC;AAAE2F,MAAAA,SAAAA;AAAU,KAAC,KAAK;AACjD,MAAA,IAAI0G,SAAS,CAACY,UAAU,CAACtH,SAAS,CAAC,EAAE;QACnC0G,SAAS,CAACgQ,KAAK,EAAE,CAAA;AACnB,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;AAEAoC,iBAAiB,CAAC3a,OAAO,GAAG,CAAE,UAAU,EAAE,WAAW,CAAE;;AC/BvD,sBAAe;AACbmO,EAAAA,QAAQ,EAAE,CAAE,WAAW,EAAE,mBAAmB,CAAE;AAC9C5F,EAAAA,SAAS,EAAE,CAAE,MAAM,EAAEiS,SAAS,CAAE;AAChCI,EAAAA,iBAAiB,EAAE,CAAE,MAAM,EAAED,iBAAiB,CAAA;AAChD,CAAC;;ACcc,MAAME,eAAe,CAAC;AAEnC3a,EAAAA,WAAW,CAAC2J,aAAa,EAAE1B,QAAQ,EAAE;IACnC,MAAM;AACJhF,MAAAA,MAAAA;AACF,KAAC,GAAG0G,aAAa,IAAI,EAAE,CAAA;IAEvB,IAAI,CAAC7H,SAAS,GAAGmG,QAAQ,CAAA;AAEzB,IAAA,IAAI,CAACU,UAAU,GAAGiS,MAAM,CAAC,2CAA2C,CAAC,CAAA;AAErE,IAAA,IAAI3X,MAAM,EAAE;AACV,MAAA,IAAI,CAAC8J,QAAQ,CAAC9J,MAAM,CAAC,CAAA;AACvB,KAAA;IAEA,IAAI,CAACnB,SAAS,CAAC7E,IAAI,CAAC,qBAAqB,EAAE,GAAG,EAAE,MAAM;MACpD,IAAI,CAAC4d,OAAO,EAAE,CAAA;AAChB,KAAC,CAAC,CAAA;AACJ,GAAA;;AAGA;AACF;AACA;AACA;AACA;EACE9N,QAAQ,CAAC1B,SAAS,EAAE;IAClB,IAAI,CAACA,SAAS,EAAE;AACd,MAAA,MAAM,IAAI5O,KAAK,CAAC,oBAAoB,CAAC,CAAA;AACvC,KAAA;AAEA,IAAA,IAAI,OAAO4O,SAAS,KAAK,QAAQ,EAAE;AACjCA,MAAAA,SAAS,GAAGyP,KAAQ,CAACzP,SAAS,CAAC,CAAA;AACjC,KAAA;;AAEA;IACA,IAAI,CAAC0P,MAAM,EAAE,CAAA;;AAEb;AACA1P,IAAAA,SAAS,CAAC2P,WAAW,CAAC,IAAI,CAACrS,UAAU,CAAC,CAAA;;AAEtC;AACA,IAAA,IAAI,CAAC7G,SAAS,CAAChE,IAAI,CAAC,gBAAgB,CAAC,CAAA;AACvC,GAAA;;AAEA;AACF;AACA;AACEid,EAAAA,MAAM,GAAG;AACP,IAAA,MAAME,UAAU,GAAG,IAAI,CAACtS,UAAU,CAACsS,UAAU,CAAA;AAE7C,IAAA,IAAIA,UAAU,EAAE;AACdA,MAAAA,UAAU,CAACC,WAAW,CAAC,IAAI,CAACvS,UAAU,CAAC,CAAA;AAEvC,MAAA,IAAI,CAAC7G,SAAS,CAAChE,IAAI,CAAC,gBAAgB,CAAC,CAAA;AACvC,KAAA;AACF,GAAA;AAEA+c,EAAAA,OAAO,GAAG;IACRrN,MAAM,CACJxJ,IAAC,OAAO,EAAA,EAAA,CAAG,EACX,IAAI,CAAC2E,UAAU,CAChB,CAAA;AAED,IAAA,IAAI,CAAC7G,SAAS,CAAChE,IAAI,CAAC,kBAAkB,CAAC,CAAA;AACzC,GAAA;AAEA7B,EAAAA,QAAQ,GAAG;IACT,IAAI,IAAI,CAAC0M,UAAU,EAAE;AACnB6E,MAAAA,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC7E,UAAU,CAAC,CAAA;AAE7B,MAAA,IAAI,CAAC7G,SAAS,CAAChE,IAAI,CAAC,mBAAmB,CAAC,CAAA;AAC1C,KAAA;AACF,GAAA;AACF,CAAA;AAEA6c,eAAe,CAAC7a,OAAO,GAAG,CAAE,gBAAgB,EAAE,UAAU,CAAE;;AC/F1D,oBAAe;AACb4J,EAAAA,OAAO,EAAE,CAAE,MAAM,EAAEiR,eAAe,CAAA;AACpC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYc,SAASQ,MAAM,CAACvX,KAAK,EAAE;EAEpC,MAAM;IACJsH,OAAO;AACPkQ,IAAAA,cAAAA;AACD,GAAA,GAAGxX,KAAK,CAAA;EAET,MAAM;IACJyX,cAAc;IACdC,mBAAmB;IACnBC,eAAe;AACfC,IAAAA,YAAAA;AACD,GAAA,GAAGJ,cAAc,CAAA;AAElB,EAAA,MAAMpa,KAAK,GAAGua,eAAe,CAACrQ,OAAO,CAAC,CAAA;AACtC,EAAA,MAAMnN,IAAI,GAAGyd,YAAY,CAACtQ,OAAO,CAAC,CAAA;AAClC,EAAA,MAAMuQ,gBAAgB,GAAGH,mBAAmB,IAAIA,mBAAmB,CAACpQ,OAAO,CAAC,CAAA;AAE5E,EAAA,MAAMwQ,WAAW,GAAGL,cAAc,CAACnQ,OAAO,CAAC,CAAA;EAE3C,OAAQjH,IAAAA,CAAAA,KAAAA,EAAAA;AAAK+E,IAAAA,KAAK,EAAC,6BAA6B;IAAAlB,QAC9C9D,EAAAA,CAAAA,GAAAA,CAAAA,KAAAA,EAAAA;AAAKgF,MAAAA,KAAK,EAAC,kCAAkC;MAAAlB,QACzC4T,EAAAA,WAAW,IAAI1X,GAAAA,CAAC0X,WAAW,EAAA;AAACC,QAAAA,KAAK,EAAC,IAAI;AAACC,QAAAA,MAAM,EAAC,IAAI;AAACC,QAAAA,OAAO,EAAC,WAAA;;MACzD,EACN5X,IAAAA,CAAAA,KAAAA,EAAAA;AAAK+E,MAAAA,KAAK,EAAC,oCAAoC;MAAAlB,QAC7C9D,EAAAA,CAAAA,GAAAA,CAAAA,KAAAA,EAAAA;AAAK8X,QAAAA,KAAK,EAAG/d,IAAM;AAACiL,QAAAA,KAAK,EAAC,kCAAkC;QAAAlB,QAAG/J,EAAAA,IAAAA;AAAY,OAAA,CAAA,EACzEiD,KAAK,GACLgD,GAAAA,CAAAA,KAAAA,EAAAA;AAAK8X,QAAAA,KAAK,EAAG9a,KAAO;AAACgI,QAAAA,KAAK,EAAC,mCAAmC;QAAAlB,QAAG9G,EAAAA,KAAAA;AAAa,OAAA,CAAA,GAC9E,IAAI,CAAA;MAEF,EACNgD,GAAAA,CAAAA,KAAAA,EAAAA;AAAKgF,MAAAA,KAAK,EAAC,qCAAqC;AAAAlB,MAAAA,QAAAA,EAC5C2T,gBAAgB,GAChBzX,GAAAA,CAAAA,GAAAA,EAAAA;AACE+X,QAAAA,GAAG,EAAC,UAAU;AACd/S,QAAAA,KAAK,EAAC,kCAAkC;AACxCgT,QAAAA,IAAI,EAAGP,gBAAkB;AACzBK,QAAAA,KAAK,EAAC,oBAAoB;AAC1BrV,QAAAA,MAAM,EAAC,QAAQ;AAAAqB,QAAAA,QAAAA,EACf9D,IAACiY,gBAAgB,EAAA,EAAA,CAAA;QACf,GACJ,IAAA;AAEE,KAAA,CAAA,CAAA;AACF,GAAA,CAAA,CAAA;AACR,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}